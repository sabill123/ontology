{"timestamp": "2026-01-20T00:08:28.051721", "agent_name": "Data Analyst", "model": "claude-opus-4-5-20251101", "prompt_tokens": 15633, "completion_tokens": 4824, "total_tokens": 20457, "latency_ms": 65288.90323638916, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 1: Discovery (발견 단계)\n\n### 역할\n**임의의 입력 데이터**에서 구조, 패턴, 관계를 발견하는 탐색 단계입니다.\n아직 검증되지 않은 \"후보\"들을 최대한 많이 발견하는 것이 목표입니다.\n\n### 입력 데이터 형식\n\n```python\n# SharedContext.tables에 저장된 테이블 정보\nTableInfo = {\n    \"name\": str,                    # 테이블명 (예: \"order_list\")\n    \"source\": str,                  # 데이터 소스\n    \"columns\": [                    # 컬럼 목록\n        {\n            \"name\": str,            # 컬럼명 (예: \"Product_ID\")\n            \"type\": str,            # 데이터 타입 (integer, string, date, float)\n            \"sample_values\": []     # 샘플 값\n        }\n    ],\n    \"row_count\": int,               # 행 수\n    \"sample_data\": [{}]             # 샘플 데이터 (List[Dict])\n}\n```\n\n### 핵심 산출물\n\n| 산출물 | 위치 | 설명 |\n|--------|------|------|\n| tda_signatures | context.tda_signatures | 각 테이블의 위상적 특성 (Betti numbers) |\n| homeomorphisms | context.homeomorphisms | 테이블 간 위상동형 관계 |\n| schema_analysis | context.schema_analysis | 컬럼 프로파일, 키 후보 |\n| value_overlaps | context.value_overlaps | FK 관계 (값 기반 발견) |\n| unified_entities | context.unified_entities | 비즈니스 엔티티 분류 결과 |\n| concept_relationships | context.concept_relationships | 엔티티 간 관계 |\n\n### 성공 기준\n- 모든 테이블 구조 파악 완료\n- confidence >= 0.5인 발견이 전체의 70% 이상\n- FK 관계 최소 1개 이상 발견 (테이블 2개 이상 시)\n- 각 테이블에 대해 엔티티 분류 완료\n\n### ⚠️ 주의사항\n1. **도메인 가정 금지**: 테이블명/컬럼명에서 추론만, 사전 지식 사용 금지\n2. **낮은 confidence도 보고**: 0.3 이상이면 후보로 포함\n3. **false positive 필터링**: 순차 정수(1,2,3), 상태코드(0,1,2)는 FK가 아님\n\n\n---\n\nYou are a Senior Data Analyst with deep expertise in understanding datasets and their business context.\n\nYour task is to DIRECTLY ANALYZE the raw data and understand its BUSINESS MEANING.\n\n## CORE ANALYSIS TASKS:\n\n1. **DOMAIN IDENTIFICATION**: What business domain is this data from?\n\n2. **COLUMN BUSINESS CHARACTERISTICS**: For each column, determine:\n   - **business_role**: How this column is used in the business process\n     - \"identifier\": Primary key, foreign key, unique ID\n     - \"required_input\": Must have value (null = data entry error)\n     - \"optional_input\": Can be empty by design (notes, comments, remarks, memo fields)\n     - \"metric\": Measured/calculated numeric value\n     - \"dimension\": Category for grouping/filtering\n     - \"derived\": Calculated from other columns\n     - \"timestamp\": Date/time tracking\n\n3. **DATA PATTERNS**: Mathematical relationships between columns\n\n4. **SEMANTIC DATA QUALITY**: Only report issues that ACTUALLY matter for business:\n   - ❌ DON'T report: \"비고 column has 99% nulls\" (remarks are OPTIONAL by nature)\n   - ❌ DON'T report: \"memo field is mostly empty\" (memos are OPTIONAL)\n   - ✅ DO report: \"customer_id has nulls\" (identifiers should NEVER be null)\n   - ✅ DO report: \"order_date is missing in 5% of rows\" (required field is empty)\n   - ✅ DO report: \"price column has negative values\" (business logic violation)\n\n5. **TABLE STRUCTURE ANALYSIS**: Understand the data model\n   - What entity does this table represent?\n   - What are the relationships to other entities?\n   - Is this a master table, transaction table, or mapping table?\n\n## CRITICAL JUDGMENT RULES:\n\n**Empty/Null Values:**\n- If a column name suggests it's OPTIONAL (비고, 메모, remarks, notes, comments, description, etc.): Empty values are NORMAL, not a quality issue\n- If a column is a REQUIRED business field (ID, date, amount, name): Empty values ARE a quality issue\n\n**Quality Issues:**\n- Only report issues that would affect BUSINESS DECISIONS or DATA INTEGRITY\n- Think: \"Would a business user care about this?\" If not, don't report it.\n\nRespond with structured JSON containing your analysis.\n"}, {"role": "user", "content": "Analyze this dataset directly and understand its BUSINESS CONTEXT.\n\n## DATASET: baggage_handling\n- Total rows: 169\n- Columns: ['bag_tag_id', 'booking_reference', 'passenger_name', 'flt_number', 'origin', 'destination', 'weight_kg', 'bag_type', 'check_in_timestamp', 'belt_assigned', 'scan_status', 'current_location', 'loaded_to_aircraft', 'delivery_status', 'damage_reported', 'claim_filed']\n\n## FULL DATA (CSV format):\n```csv\nbag_tag_id,booking_reference,passenger_name,flt_number,origin,destination,weight_kg,bag_type,check_in_timestamp,belt_assigned,scan_status,current_location,loaded_to_aircraft,delivery_status,damage_reported,claim_filed\nBT2401150001,BK2401150001,김민수,KE123,ICN,LAX,23.5,CHECKED,2024-01-15 06:30:15,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150002,BK2401150001,김민수,KE123,ICN,LAX,18.2,CHECKED,2024-01-15 06:30:22,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150003,BK2401150002,이영희,KE123,ICN,LAX,15.8,CHECKED,2024-01-15 06:45:10,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150004,BK2401150003,박준호,KE123,ICN,LAX,22.1,CHECKED,2024-01-15 07:00:05,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150005,BK2401150004,최수진,KE123,ICN,LAX,19.7,CHECKED,2024-01-15 06:55:30,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150006,BK2401150004,최수진,KE123,ICN,LAX,21.3,CHECKED,2024-01-15 06:55:45,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150007,BK2401150005,John Smith,KE123,ICN,LAX,25.0,CHECKED,2024-01-15 06:15:20,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150008,BK2401150005,John Smith,KE123,ICN,LAX,23.8,CHECKED,2024-01-15 06:15:35,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150009,BK2401150005,John Smith,KE123,ICN,LAX,18.5,CHECKED,2024-01-15 06:15:50,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150010,BK2401150006,정민지,OZ201,ICN,NRT,20.2,CHECKED,2024-01-15 07:30:15,B07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150011,BK2401150007,강현우,OZ201,ICN,NRT,24.5,CHECKED,2024-01-15 07:45:20,B07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150012,BK2401150007,강현우,OZ201,ICN,NRT,19.8,CHECKED,2024-01-15 07:45:35,B07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150013,BK2401150008,조서연,OZ201,ICN,NRT,16.5,CHECKED,2024-01-15 08:00:10,B07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150014,BK2401150009,윤재민,KE456,ICN,SIN,22.8,CHECKED,2024-01-15 08:45:15,B15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150015,BK2401150009,윤재민,KE456,ICN,SIN,20.1,CHECKED,2024-01-15 08:45:30,B15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150016,BK2401150010,한지우,KE456,ICN,SIN,17.9,CHECKED,2024-01-15 08:50:20,B15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150017,BK2401150011,임도현,7C101,ICN,CJU,12.5,CHECKED,2024-01-15 05:45:10,C03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150018,BK2401150013,송시우,LJ302,ICN,PUS,15.2,CHECKED,2024-01-15 10:15:15,C08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150019,BK2401150014,오예준,LJ302,ICN,PUS,18.7,CHECKED,2024-01-15 10:20:20,C08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150020,BK2401150015,황서윤,KE789,ICN,CDG,24.8,CHECKED,2024-01-15 11:30:15,A01,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150021,BK2401150015,황서윤,KE789,ICN,CDG,21.2,CHECKED,2024-01-15 11:30:30,A01,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150022,BK2401150016,Maria Garcia,KE789,ICN,CDG,28.5,CHECKED,2024-01-15 11:15:20,A01,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150023,BK2401150016,Maria Garcia,KE789,ICN,CDG,26.3,CHECKED,2024-01-15 11:15:35,A01,SCANNED,AIRCRAFT,True,DELIVERED,True,True\nBT2401150024,BK2401150016,Maria Garcia,KE789,ICN,CDG,22.1,CHECKED,2024-01-15 11:15:50,A01,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150025,BK2401150017,안지호,KE789,ICN,CDG,19.5,CHECKED,2024-01-15 11:45:15,A01,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150026,BK2401150018,전소율,OZ102,ICN,PVG,21.8,CHECKED,2024-01-15 13:00:20,B11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150027,BK2401150019,홍주원,OZ102,ICN,PVG,23.2,CHECKED,2024-01-15 13:05:15,B11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150028,BK2401150019,홍주원,OZ102,ICN,PVG,18.9,CHECKED,2024-01-15 13:05:30,B11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150029,BK2401150020,문하린,TW501,ICN,TPE,20.5,CHECKED,2024-01-15 14:30:20,B15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150030,BK2401150021,배이준,TW501,ICN,TPE,24.1,CHECKED,2024-01-15 14:25:15,B15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150031,BK2401150021,배이준,TW501,ICN,TPE,19.7,CHECKED,2024-01-15 14:25:30,B15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150032,BK2401150022,Tanaka Yuki,TW501,ICN,TPE,17.3,CHECKED,2024-01-15 14:35:20,B15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150033,BK2401150023,손채원,KE234,ICN,JFK,29.2,CHECKED,2024-01-15 16:45:15,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150034,BK2401150023,손채원,KE234,ICN,JFK,27.5,CHECKED,2024-01-15 16:45:30,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150035,BK2401150023,손채원,KE234,ICN,JFK,25.8,CHECKED,2024-01-15 16:45:45,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150036,BK2401150023,손채원,KE234,ICN,JFK,23.1,CHECKED,2024-01-15 16:46:00,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150037,BK2401150024,유준서,KE234,ICN,JFK,22.4,CHECKED,2024-01-15 16:50:20,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150038,BK2401150024,유준서,KE234,ICN,JFK,19.8,CHECKED,2024-01-15 16:50:35,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150039,BK2401150025,권은서,KE234,ICN,JFK,18.5,CHECKED,2024-01-15 17:00:15,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150040,BK2401150026,Michael Johnson,KE234,ICN,JFK,25.2,CHECKED,2024-01-15 17:05:20,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150041,BK2401150026,Michael Johnson,KE234,ICN,JFK,22.8,CHECKED,2024-01-15 17:05:35,A05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401150042,BK2401150027,신시윤,ZE201,ICN,FUK,16.9,CHECKED,2024-01-15 07:15:15,C12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160001,BK2401160001,노지안,KE567,ICN,HKG,19.2,CHECKED,2024-01-16 06:00:15,A08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160002,BK2401160002,하수아,KE567,ICN,HKG,21.5,CHECKED,2024-01-16 06:05:20,A08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160003,BK2401160002,하수아,KE567,ICN,HKG,18.3,CHECKED,2024-01-16 06:05:35,A08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160004,BK2401160003,Chen Wei,KE567,ICN,HKG,17.8,CHECKED,2024-01-16 05:50:20,A08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160005,BK2401160004,양윤서,OZ303,ICN,BKK,20.1,CHECKED,2024-01-16 07:45:15,B03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160006,BK2401160005,성민준,OZ303,ICN,BKK,23.4,CHECKED,2024-01-16 07:50:20,B03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160007,BK2401160005,성민준,OZ303,ICN,BKK,19.7,CHECKED,2024-01-16 07:50:35,B03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160008,BK2401160006,차예린,7C205,ICN,KIX,15.2,CHECKED,2024-01-16 09:00:15,C05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160009,BK2401160008,피수빈,LJ401,ICN,CJU,14.8,CHECKED,2024-01-16 10:30:20,C09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160010,BK2401160009,표아린,LJ401,ICN,CJU,16.5,CHECKED,2024-01-16 10:35:15,C09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160011,BK2401160010,변도윤,KE890,ICN,SYD,28.5,CHECKED,2024-01-16 19:45:15,A10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160012,BK2401160010,변도윤,KE890,ICN,SYD,26.2,CHECKED,2024-01-16 19:45:30,A10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160013,BK2401160010,변도윤,KE890,ICN,SYD,24.8,CHECKED,2024-01-16 19:45:45,A10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160014,BK2401160011,Emma Wilson,KE890,ICN,SYD,25.3,CHECKED,2024-01-16 19:50:20,A10,SCANNED,AIRCRAFT,True,DELIVERED,True,False\nBT2401160015,BK2401160011,Emma Wilson,KE890,ICN,SYD,22.1,CHECKED,2024-01-16 19:50:35,A10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160016,BK2401160012,봉하준,KE890,ICN,SYD,19.5,CHECKED,2024-01-16 20:00:15,A10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160017,BK2401160013,탁시은,OZ504,ICN,MNL,18.2,CHECKED,2024-01-16 12:30:20,B09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160018,BK2401160014,명유나,OZ504,ICN,MNL,21.7,CHECKED,2024-01-16 12:35:15,B09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160019,BK2401160014,명유나,OZ504,ICN,MNL,19.3,CHECKED,2024-01-16 12:35:30,B09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160020,BK2401160015,선건우,TW602,ICN,HAN,17.8,CHECKED,2024-01-16 14:00:20,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160021,BK2401160016,Nguyen Linh,TW602,ICN,HAN,16.5,CHECKED,2024-01-16 14:05:15,B12,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160022,BK2401160017,설나윤,KE345,ICN,FRA,24.2,CHECKED,2024-01-16 09:30:20,A02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160023,BK2401160017,설나윤,KE345,ICN,FRA,21.8,CHECKED,2024-01-16 09:30:35,A02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160024,BK2401160018,목태민,KE345,ICN,FRA,19.5,CHECKED,2024-01-16 09:35:15,A02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160025,BK2401160019,Hans Mueller,KE345,ICN,FRA,27.8,CHECKED,2024-01-16 09:20:20,A02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160026,BK2401160019,Hans Mueller,KE345,ICN,FRA,25.5,CHECKED,2024-01-16 09:20:35,A02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160027,BK2401160019,Hans Mueller,KE345,ICN,FRA,23.2,CHECKED,2024-01-16 09:20:50,A02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160028,BK2401160020,길소민,ZE305,ICN,NGO,15.8,CHECKED,2024-01-16 12:15:15,C15,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160029,BK2401160022,장우진,KE678,ICN,LHR,30.2,CHECKED,2024-01-16 08:30:20,A03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160030,BK2401160022,장우진,KE678,ICN,LHR,28.5,CHECKED,2024-01-16 08:30:35,A03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160031,BK2401160022,장우진,KE678,ICN,LHR,26.8,CHECKED,2024-01-16 08:30:50,A03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160032,BK2401160022,장우진,KE678,ICN,LHR,24.1,CHECKED,2024-01-16 08:31:05,A03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160033,BK2401160023,Sophie Brown,KE678,ICN,LHR,23.5,CHECKED,2024-01-16 08:35:20,A03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401160034,BK2401160023,Sophie Brown,KE678,ICN,LHR,21.2,CHECKED,2024-01-16 08:35:35,A03,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170001,BK2401170001,곽서진,OZ605,ICN,DEL,20.5,CHECKED,2024-01-17 06:30:20,B05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170002,BK2401170002,Raj Patel,OZ605,ICN,DEL,24.8,CHECKED,2024-01-17 06:35:15,B05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170003,BK2401170002,Raj Patel,OZ605,ICN,DEL,22.3,CHECKED,2024-01-17 06:35:30,B05,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170004,BK2401170003,남예서,7C309,ICN,CTS,16.2,CHECKED,2024-01-17 08:00:15,C07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170005,BK2401170005,엄다인,LJ502,ICN,PUS,15.8,CHECKED,2024-01-17 09:30:20,C10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170006,BK2401170006,여현서,LJ502,ICN,PUS,17.5,CHECKED,2024-01-17 09:35:15,C10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170007,BK2401170007,마지유,KE901,ICN,DXB,28.2,CHECKED,2024-01-17 21:45:20,A07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170008,BK2401170007,마지유,KE901,ICN,DXB,25.8,CHECKED,2024-01-17 21:45:35,A07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170009,BK2401170007,마지유,KE901,ICN,DXB,23.5,CHECKED,2024-01-17 21:45:50,A07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170010,BK2401170008,Ahmed Hassan,KE901,ICN,DXB,26.5,CHECKED,2024-01-17 21:50:20,A07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170011,BK2401170008,Ahmed Hassan,KE901,ICN,DXB,24.2,CHECKED,2024-01-17 21:50:35,A07,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170012,BK2401170009,제윤아,OZ706,ICN,SGN,18.5,CHECKED,2024-01-17 11:30:15,B08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170013,BK2401170010,호승민,OZ706,ICN,SGN,21.2,CHECKED,2024-01-17 11:35:20,B08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170014,BK2401170010,호승민,OZ706,ICN,SGN,19.8,CHECKED,2024-01-17 11:35:35,B08,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170015,BK2401170011,도아영,TW703,ICN,DAD,17.2,CHECKED,2024-01-17 13:00:20,B14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170016,BK2401170012,Tran Minh,TW703,ICN,DAD,16.8,CHECKED,2024-01-17 13:05:15,B14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170017,BK2401170013,어태현,KE012,ICN,AMS,23.5,CHECKED,2024-01-17 07:30:20,A04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170018,BK2401170013,어태현,KE012,ICN,AMS,21.2,CHECKED,2024-01-17 07:30:35,A04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170019,BK2401170014,Jean Dubois,KE012,ICN,AMS,29.8,CHECKED,2024-01-17 07:25:20,A04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170020,BK2401170014,Jean Dubois,KE012,ICN,AMS,27.5,CHECKED,2024-01-17 07:25:35,A04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170021,BK2401170014,Jean Dubois,KE012,ICN,AMS,25.2,CHECKED,2024-01-17 07:25:50,A04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170022,BK2401170015,감소현,ZE408,ICN,OKA,15.5,CHECKED,2024-01-17 13:30:15,C14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170023,BK2401170017,국민서,KE135,ICN,SFO,30.5,CHECKED,2024-01-17 15:30:20,A09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170024,BK2401170017,국민서,KE135,ICN,SFO,28.2,CHECKED,2024-01-17 15:30:35,A09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170025,BK2401170017,국민서,KE135,ICN,SFO,26.8,CHECKED,2024-01-17 15:30:50,A09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170026,BK2401170017,국민서,KE135,ICN,SFO,24.5,CHECKED,2024-01-17 15:31:05,A09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170027,BK2401170018,Robert Lee,KE135,ICN,SFO,25.8,CHECKED,2024-01-17 15:35:20,A09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170028,BK2401170018,Robert Lee,KE135,ICN,SFO,23.5,CHECKED,2024-01-17 15:35:35,A09,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170029,BK2401170019,기유진,OZ807,ICN,CEB,19.2,CHECKED,2024-01-17 18:00:15,B10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170030,BK2401170020,금서현,OZ807,ICN,CEB,22.5,CHECKED,2024-01-17 18:05:20,B10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401170031,BK2401170020,금서현,OZ807,ICN,CEB,20.1,CHECKED,2024-01-17 18:05:35,B10,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180001,BK2401180001,난하율,7C412,ICN,TAK,14.5,CHECKED,2024-01-18 05:45:15,C02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180002,BK2401180003,내시온,LJ603,ICN,CJU,15.2,CHECKED,2024-01-18 07:00:20,C11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180003,BK2401180004,녹예원,LJ603,ICN,CJU,16.8,CHECKED,2024-01-18 07:05:15,C11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180004,BK2401180005,다준영,KE246,ICN,HND,22.5,CHECKED,2024-01-18 08:30:20,A11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180005,BK2401180005,다준영,KE246,ICN,HND,20.2,CHECKED,2024-01-18 08:30:35,A11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180006,BK2401180006,Yamamoto Ken,KE246,ICN,HND,18.5,CHECKED,2024-01-18 08:35:20,A11,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180007,BK2401180007,단지연,OZ908,ICN,KUL,19.8,CHECKED,2024-01-18 10:00:15,B06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180008,BK2401180008,Mohammad Ali,OZ908,ICN,KUL,24.2,CHECKED,2024-01-18 10:05:20,B06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180009,BK2401180008,Mohammad Ali,OZ908,ICN,KUL,21.8,CHECKED,2024-01-18 10:05:35,B06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180010,BK2401180009,당소율,TW804,ICN,PNH,17.5,CHECKED,2024-01-18 11:30:20,B13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180011,BK2401180010,Sok Chanthy,TW804,ICN,PNH,16.2,CHECKED,2024-01-18 11:35:15,B13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180012,BK2401180011,대현준,KE357,ICN,MAD,29.5,CHECKED,2024-01-18 10:30:20,A06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180013,BK2401180011,대현준,KE357,ICN,MAD,27.2,CHECKED,2024-01-18 10:30:35,A06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180014,BK2401180011,대현준,KE357,ICN,MAD,25.8,CHECKED,2024-01-18 10:30:50,A06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180015,BK2401180012,Elena Rodriguez,KE357,ICN,MAD,24.5,CHECKED,2024-01-18 10:35:20,A06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180016,BK2401180012,Elena Rodriguez,KE357,ICN,MAD,22.1,CHECKED,2024-01-18 10:35:35,A06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180017,BK2401180013,덕아인,ZE511,ICN,HKT,16.5,CHECKED,2024-01-18 12:45:15,C13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180018,BK2401180015,동서아,KE468,ICN,MXP,23.8,CHECKED,2024-01-18 08:00:20,A14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180019,BK2401180015,동서아,KE468,ICN,MXP,21.5,CHECKED,2024-01-18 08:00:35,A14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180020,BK2401180016,Marco Rossi,KE468,ICN,MXP,28.2,CHECKED,2024-01-18 07:55:20,A14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180021,BK2401180016,Marco Rossi,KE468,ICN,MXP,26.5,CHECKED,2024-01-18 07:55:35,A14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180022,BK2401180016,Marco Rossi,KE468,ICN,MXP,24.8,CHECKED,2024-01-18 07:55:50,A14,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180023,BK2401180017,두예성,OZ109,ICN,NRT,18.5,CHECKED,2024-01-18 14:30:15,B04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180024,BK2401180018,등채연,OZ109,ICN,NRT,21.2,CHECKED,2024-01-18 14:35:20,B04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180025,BK2401180018,등채연,OZ109,ICN,NRT,19.8,CHECKED,2024-01-18 14:35:35,B04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180026,BK2401180019,라동현,7C516,ICN,PUS,15.5,CHECKED,2024-01-18 16:00:15,C06,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180027,BK2401180021,람지아,KE579,ICN,MEL,31.2,CHECKED,2024-01-18 20:30:20,A13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180028,BK2401180021,람지아,KE579,ICN,MEL,29.5,CHECKED,2024-01-18 20:30:35,A13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180029,BK2401180021,람지아,KE579,ICN,MEL,27.8,CHECKED,2024-01-18 20:30:50,A13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180030,BK2401180021,람지아,KE579,ICN,MEL,25.2,CHECKED,2024-01-18 20:31:05,A13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180031,BK2401180022,James Thompson,KE579,ICN,MEL,26.8,CHECKED,2024-01-18 20:35:20,A13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401180032,BK2401180022,James Thompson,KE579,ICN,MEL,24.5,CHECKED,2024-01-18 20:35:35,A13,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190001,BK2401190001,량은우,LJ704,ICN,CJU,16.2,CHECKED,2024-01-19 05:00:15,C04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190002,BK2401190002,려하영,LJ704,ICN,CJU,17.8,CHECKED,2024-01-19 05:05:20,C04,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190003,BK2401190003,련시현,OZ210,ICN,SIN,22.5,CHECKED,2024-01-19 06:30:15,B02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190004,BK2401190003,련시현,OZ210,ICN,SIN,20.2,CHECKED,2024-01-19 06:30:30,B02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190005,BK2401190004,William Chen,OZ210,ICN,SIN,19.5,CHECKED,2024-01-19 06:35:20,B02,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190006,BK2401190005,렴유준,TW905,ICN,RGN,17.2,CHECKED,2024-01-19 08:00:15,B16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190007,BK2401190006,Aung Myat,TW905,ICN,RGN,21.5,CHECKED,2024-01-19 08:05:20,B16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190008,BK2401190006,Aung Myat,TW905,ICN,RGN,19.8,CHECKED,2024-01-19 08:05:35,B16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190009,BK2401190007,령다온,KE680,ICN,VIE,24.2,CHECKED,2024-01-19 09:30:20,A16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190010,BK2401190007,령다온,KE680,ICN,VIE,21.8,CHECKED,2024-01-19 09:30:35,A16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190011,BK2401190008,Klaus Schmidt,KE680,ICN,VIE,28.5,CHECKED,2024-01-19 09:25:20,A16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190012,BK2401190008,Klaus Schmidt,KE680,ICN,VIE,26.2,CHECKED,2024-01-19 09:25:35,A16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401190013,BK2401190008,Klaus Schmidt,KE680,ICN,VIE,24.8,CHECKED,2024-01-19 09:25:50,A16,SCANNED,AIRCRAFT,True,DELIVERED,False,False\nBT2401200001,BK2401200001,로민영,KE999,ICN,LAX,18.5,CHECKED,2024-01-20 06:30:15,B12,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200002,BK2401200002,록지한,KE999,ICN,LAX,22.8,CHECKED,2024-01-20 06:35:20,B12,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200003,BK2401200002,록지한,KE999,ICN,LAX,20.5,CHECKED,2024-01-20 06:35:35,B12,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200004,BK2401200003,뢰서영,OZ999,ICN,NRT,19.2,CHECKED,2024-01-20 08:00:15,B07,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200005,BK2401200005,료현우,7C999,ICN,CJU,15.5,CHECKED,2024-01-20 06:00:20,C03,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200006,BK2401200006,류채은,7C999,ICN,CJU,16.8,CHECKED,2024-01-20 06:05:15,C03,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200007,BK2401200009,륜소담,LJ999,ICN,PUS,17.2,CHECKED,2024-01-20 08:30:20,C08,SCANNED,TRANSFER,False,DELAYED,False,False\nBT2401200008,BK2401200010,률민재,LJ999,ICN,PUS,21.5,CHECKED,2024-01-20 08:35:15,C08,SCANNED,TRANSFER,False,DELAYED,False,False\nBT2401200009,BK2401200010,률민재,LJ999,ICN,PUS,19.2,CHECKED,2024-01-20 08:35:30,C08,SCANNED,TRANSFER,False,DELAYED,False,False\nBT2401200010,BK2401200011,릉예나,OZ888,ICN,SIN,23.8,CHECKED,2024-01-20 09:30:20,B02,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200011,BK2401200011,릉예나,OZ888,ICN,SIN,21.5,CHECKED,2024-01-20 09:30:35,B02,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200012,BK2401200012,Lim Wei Ming,OZ888,ICN,SIN,18.2,CHECKED,2024-01-20 09:35:20,B02,SCANNED,CHECK_IN,False,PENDING,False,False\nBT2401200013,BK2401200019,막서율,KE666,ICN,HKG,19.5,CHECKED,2024-01-20 05:30:15,A08,SCANNED,AIRCRAFT,True,IN_TRANSIT,False,False\nBT2401200014,BK2401200020,만채민,KE666,ICN,HKG,22.8,CHECKED,2024-01-20 05:35:20,A08,SCANNED,AIRCRAFT,True,IN_TRANSIT,False,False\nBT2401200015,BK2401200020,만채민,KE666,ICN,HKG,20.5,CHECKED,2024-01-20 05:35:35,A08,SCANNED,AIRCRAFT,True,IN_TRANSIT,False,False\nBT2401200016,BK2401200015,립다연,KE777,ICN,JFK,0.0,CHECKED,,,NOT_SCANNED,UNKNOWN,False,PENDING,False,False\nBT2401200017,BK2401200016,David Anderson,KE777,ICN,JFK,0.0,CHECKED,,,NOT_SCANNED,UNKNOWN,False,PENDING,False,False\n\n```\n\n## YOUR ANALYSIS TASKS:\n\n1. **DOMAIN IDENTIFICATION**: What business domain is this data from?\n   - Look at column names AND actual values\n   - Examples: aerospace, aviation, logistics, e-commerce, finance, healthcare\n\n2. **COLUMN ANALYSIS** (CRITICAL - analyze each column's BUSINESS ROLE):\n   - What it represents (based on actual values, not just name)\n   - **business_role**: identifier | required_input | optional_input | metric | dimension | derived | timestamp\n   - Data type (categorical, numeric, date, text)\n   - Is it required for business operations? Or optional (like notes/remarks)?\n\n3. **DATA PATTERNS**: Mathematical relationships between columns\n   - Do any columns sum to 1 or 100?\n   - Are any columns identical or derived from others?\n\n4. **STATUS/ENUM VALUE ANALYSIS** (CRITICAL - v7.0 NEW!):\n   For each status/state/enum column, identify:\n   - **Normal values**: Values indicating normal operation (ACTIVE, ON_TIME, COMPLETED, etc.)\n   - **Problem values**: Values indicating issues (CANCELLED, FAILED, DELAYED, GROUNDED, SUSPENDED, ERROR, etc.)\n   - **Problem ratio**: What percentage of records have problem values?\n   - **Business impact**: What does each problem status mean operationally?\n\n5. **BOOLEAN FLAG ANALYSIS** (v7.0 NEW!):\n   For each boolean/flag column (is_*, has_*, *_flag, *_reported):\n   - What does TRUE mean in business terms?\n   - What is the TRUE ratio?\n   - Is a high TRUE ratio concerning? (e.g., damage_reported=TRUE being high is bad)\n\n6. **OPERATIONAL INSIGHTS** (v7.0 CRITICAL!):\n   Go beyond null ratios - provide BUSINESS METRICS:\n   - **Delay rates**: How often are things delayed?\n   - **Cancellation rates**: How often are things cancelled?\n   - **Error/Failure rates**: How often do errors occur?\n   - **Damage/Issue rates**: How often are problems reported?\n   - **Maintenance status**: What's the maintenance backlog?\n\n7. **SEMANTIC DATA QUALITY** (IMPORTANT - only report MEANINGFUL issues):\n   - ❌ DO NOT report nulls in optional fields (비고, memo, notes, remarks, comments, description)\n   - ✅ DO report nulls in required fields (IDs, dates, amounts, names)\n   - ✅ DO report business logic violations (negative prices, future dates for past events)\n   - ✅ DO report data integrity issues (duplicate keys, referential integrity)\n   - ✅ DO report high rates of problem statuses as OPERATIONAL concerns\n\n8. **TABLE STRUCTURE**: What entity does this table represent?\n   - Master data, transaction data, or mapping table?\n   - Potential relationships to other entities\n\n9. **RECOMMENDED ANALYSIS**: Key dimensions and metrics for analysis\n\nRespond with JSON:\n```json\n{\n    \"domain\": {\n        \"detected\": \"<domain_name>\",\n        \"confidence\": 0.0-1.0,\n        \"reasoning\": \"<why this domain>\"\n    },\n    \"table_structure\": {\n        \"entity_type\": \"<what entity this table represents>\",\n        \"table_type\": \"master|transaction|mapping|aggregation\",\n        \"description\": \"<business purpose of this table>\"\n    },\n    \"columns\": [\n        {\n            \"name\": \"<column_name>\",\n            \"semantic_meaning\": \"<what it represents>\",\n            \"business_role\": \"identifier|required_input|optional_input|metric|dimension|derived|timestamp|status\",\n            \"data_type\": \"categorical|numeric|date|text|boolean|status_enum\",\n            \"is_key_dimension\": true/false,\n            \"is_key_metric\": true/false,\n            \"nullable_by_design\": true/false,\n            \"sample_values\": [\"<val1>\", \"<val2>\", ...],\n            \"notes\": \"<any observations>\"\n        }\n    ],\n    \"status_analysis\": [\n        {\n            \"table\": \"<table_name>\",\n            \"column\": \"<status_column_name>\",\n            \"normal_values\": [\"ACTIVE\", \"ON_TIME\", \"COMPLETED\"],\n            \"problem_values\": [\"CANCELLED\", \"DELAYED\", \"GROUNDED\"],\n            \"problem_ratio\": 0.15,\n            \"business_impact\": \"<what problem values mean for operations>\",\n            \"recommended_action\": \"<what to do about it>\"\n        }\n    ],\n    \"flag_analysis\": [\n        {\n            \"table\": \"<table_name>\",\n            \"column\": \"<flag_column_name>\",\n            \"meaning_when_true\": \"<what TRUE means>\",\n            \"true_ratio\": 0.05,\n            \"is_concerning\": true/false,\n            \"business_impact\": \"<why this ratio matters>\"\n        }\n    ],\n    \"operational_insights\": {\n        \"delay_rate\": {\"value\": 0.12, \"description\": \"12% of flights are delayed\"},\n        \"cancellation_rate\": {\"value\": 0.03, \"description\": \"3% of flights are cancelled\"},\n        \"error_rate\": {\"value\": 0.01, \"description\": \"1% error rate in processing\"},\n        \"maintenance_backlog\": {\"value\": 5, \"description\": \"5 aircraft in maintenance\"},\n        \"key_findings\": [\n            \"<finding 1 about operational health>\",\n            \"<finding 2 about performance metrics>\"\n        ]\n    },\n    \"data_patterns\": [\n        {\n            \"pattern_type\": \"mathematical_constraint|duplicate_column|derived_column|correlation\",\n            \"columns_involved\": [\"<col1>\", \"<col2>\"],\n            \"description\": \"<what the pattern is>\",\n            \"implication\": \"<what this means for analysis>\"\n        }\n    ],\n    \"data_quality_issues\": [\n        {\n            \"issue_type\": \"missing_required|referential_integrity|business_logic|status_anomaly|high_error_rate\",\n            \"columns\": [\"<affected_columns>\"],\n            \"description\": \"<description>\",\n            \"severity\": \"critical|high|medium|low\",\n            \"business_impact\": \"<why this matters for business>\",\n            \"affected_records\": 150\n        }\n    ],\n    \"recommended_analysis\": {\n        \"key_dimensions\": [\"<columns to group by>\"],\n        \"key_metrics\": [\"<columns to measure>\"],\n        \"suggested_analyses\": [\n            \"<analysis 1>\",\n            \"<analysis 2>\"\n        ],\n        \"data_story\": \"<what story can this data tell>\",\n        \"kpis_to_track\": [\"<KPI 1>\", \"<KPI 2>\"]\n    }\n}\n```"}], "response": "```json\n{\n    \"domain\": {\n        \"detected\": \"aviation_baggage_handling\",\n        \"confidence\": 0.98,\n        \"reasoning\": \"Data contains bag_tag_id, booking_reference, flight numbers (KE, OZ, 7C, LJ, TW, ZE prefixes indicating Korean airlines), IATA airport codes (ICN, LAX, NRT, etc.), baggage tracking statuses (SCANNED, NOT_SCANNED), delivery statuses, and damage/claim tracking - all characteristic of airport baggage handling systems\"\n    },\n    \"table_structure\": {\n        \"entity_type\": \"Baggage Item\",\n        \"table_type\": \"transaction\",\n        \"description\": \"Tracks individual baggage items through the airport handling process from check-in to delivery, including scanning status, location tracking, loading confirmation, and incident reporting (damage/claims)\"\n    },\n    \"columns\": [\n        {\n            \"name\": \"bag_tag_id\",\n            \"semantic_meaning\": \"Unique identifier for each baggage item, format: BT + YYMMDD + sequence\",\n            \"business_role\": \"identifier\",\n            \"data_type\": \"text\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"BT2401150001\", \"BT2401160001\", \"BT2401170001\"],\n            \"notes\": \"Primary key, 169 unique values for 169 records - 100% unique\"\n        },\n        {\n            \"name\": \"booking_reference\",\n            \"semantic_meaning\": \"Passenger booking/reservation reference linking bags to bookings\",\n            \"business_role\": \"identifier\",\n            \"data_type\": \"text\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"BK2401150001\", \"BK2401160001\", \"BK2401170001\"],\n            \"notes\": \"Foreign key to booking system, multiple bags can share same booking (passengers with multiple bags)\"\n        },\n        {\n            \"name\": \"passenger_name\",\n            \"semantic_meaning\": \"Name of the passenger who owns the baggage\",\n            \"business_role\": \"required_input\",\n            \"data_type\": \"text\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"김민수\", \"John Smith\", \"Maria Garcia\", \"Tanaka Yuki\"],\n            \"notes\": \"Mix of Korean and international names reflecting international airport operations\"\n        },\n        {\n            \"name\": \"flt_number\",\n            \"semantic_meaning\": \"Flight number the baggage is assigned to\",\n            \"business_role\": \"required_input\",\n            \"data_type\": \"categorical\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"KE123\", \"OZ201\", \"7C101\", \"LJ302\", \"TW501\", \"ZE201\"],\n            \"notes\": \"Airline codes: KE=Korean Air, OZ=Asiana, 7C=Jeju Air, LJ=Jin Air, TW=T'way, ZE=Eastar Jet\"\n        },\n        {\n            \"name\": \"origin\",\n            \"semantic_meaning\": \"Departure airport IATA code\",\n            \"business_role\": \"dimension\",\n            \"data_type\": \"categorical\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"ICN\"],\n            \"notes\": \"All records show ICN (Incheon International Airport) - this is departure airport data\"\n        },\n        {\n            \"name\": \"destination\",\n            \"semantic_meaning\": \"Arrival airport IATA code\",\n            \"business_role\": \"dimension\",\n            \"data_type\": \"categorical\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"LAX\", \"NRT\", \"SIN\", \"CDG\", \"JFK\", \"SYD\", \"CJU\", \"PUS\"],\n            \"notes\": \"Wide variety of international and domestic destinations\"\n        },\n        {\n            \"name\": \"weight_kg\",\n            \"semantic_meaning\": \"Weight of the baggage in kilograms\",\n            \"business_role\": \"metric\",\n            \"data_type\": \"numeric\",\n            \"is_key_dimension\": false,\n            \"is_key_metric\": true,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"23.5\", \"18.2\", \"15.8\", \"0.0\"],\n            \"notes\": \"Range 12.5-31.2 kg for normal bags; 0.0 indicates unweighed/missing data (2 records)\"\n        },\n        {\n            \"name\": \"bag_type\",\n            \"semantic_meaning\": \"Type of baggage\",\n            \"business_role\": \"dimension\",\n            \"data_type\": \"categorical\",\n            \"is_key_dimension\": false,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"CHECKED\"],\n            \"notes\": \"All records are CHECKED baggage - no carry-on or special items in this dataset\"\n        },\n        {\n            \"name\": \"check_in_timestamp\",\n            \"semantic_meaning\": \"Date and time when baggage was checked in\",\n            \"business_role\": \"timestamp\",\n            \"data_type\": \"date\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"2024-01-15 06:30:15\", \"2024-01-16 06:00:15\", \"2024-01-17 06:30:20\"],\n            \"notes\": \"Date range: 2024-01-15 to 2024-01-20; 2 records have empty timestamps (NOT_SCANNED bags)\"\n        },\n        {\n            \"name\": \"belt_assigned\",\n            \"semantic_meaning\": \"Baggage belt/carousel assigned for handling\",\n            \"business_role\": \"dimension\",\n            \"data_type\": \"categorical\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"B12\", \"B07\", \"A01\", \"C03\", \"A05\"],\n            \"notes\": \"Belt naming convention: A=International long-haul, B=International short-haul, C=Domestic; 2 records have no belt assigned\"\n        },\n        {\n            \"name\": \"scan_status\",\n            \"semantic_meaning\": \"Whether the baggage has been scanned in the system\",\n            \"business_role\": \"status\",\n            \"data_type\": \"status_enum\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"SCANNED\", \"NOT_SCANNED\"],\n            \"notes\": \"Binary status indicating tracking system capture\"\n        },\n        {\n            \"name\": \"current_location\",\n            \"semantic_meaning\": \"Current physical location of the baggage in the handling process\",\n            \"business_role\": \"status\",\n            \"data_type\": \"status_enum\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"AIRCRAFT\", \"CHECK_IN\", \"TRANSFER\", \"UNKNOWN\"],\n            \"notes\": \"Tracks baggage through handling stages\"\n        },\n        {\n            \"name\": \"loaded_to_aircraft\",\n            \"semantic_meaning\": \"Whether the baggage has been loaded onto the aircraft\",\n            \"business_role\": \"status\",\n            \"data_type\": \"boolean\",\n            \"is_key_dimension\": false,\n            \"is_key_metric\": true,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"True\", \"False\"],\n            \"notes\": \"Critical operational flag for flight departure readiness\"\n        },\n        {\n            \"name\": \"delivery_status\",\n            \"semantic_meaning\": \"Final delivery status of the baggage to passenger\",\n            \"business_role\": \"status\",\n            \"data_type\": \"status_enum\",\n            \"is_key_dimension\": true,\n            \"is_key_metric\": false,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"DELIVERED\", \"PENDING\", \"DELAYED\", \"IN_TRANSIT\"],\n            \"notes\": \"Key outcome metric for baggage handling performance\"\n        },\n        {\n            \"name\": \"damage_reported\",\n            \"semantic_meaning\": \"Whether damage to the baggage has been reported\",\n            \"business_role\": \"status\",\n            \"data_type\": \"boolean\",\n            \"is_key_dimension\": false,\n            \"is_key_metric\": true,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"False\", \"True\"],\n            \"notes\": \"Quality/incident tracking flag\"\n        },\n        {\n            \"name\": \"claim_filed\",\n            \"semantic_meaning\": \"Whether a claim has been filed for the baggage\",\n            \"business_role\": \"status\",\n            \"data_type\": \"boolean\",\n            \"is_key_dimension\": false,\n            \"is_key_metric\": true,\n            \"nullable_by_design\": false,\n            \"sample_values\": [\"False\", \"True\"],\n            \"notes\": \"Financial/liability tracking flag\"\n        }\n    ],\n    \"status_analysis\": [\n        {\n            \"table\": \"baggage_handling\",\n            \"column\": \"scan_status\",\n            \"normal_values\": [\"SCANNED\"],\n            \"problem_values\": [\"NOT_SCANNED\"],\n            \"problem_ratio\": 0.012,\n            \"business_impact\": \"NOT_SCANNED bags (2 of 169) cannot be tracked through the system, creating risk of mishandling or loss\",\n            \"recommended_action\": \"Investigate why bags BT2401200016 and BT2401200017 were not scanned - potential check-in system failure or manual override\"\n        },\n        {\n            \"table\": \"baggage_handling\",\n            \"column\": \"current_location\",\n            \"normal_values\": [\"AIRCRAFT\", \"CHECK_IN\", \"TRANSFER\"],\n            \"problem_values\": [\"UNKNOWN\"],\n            \"problem_ratio\": 0.012,\n            \"business_impact\": \"UNKNOWN location (2 bags) indicates complete loss of tracking - highest risk for mishandling\",\n            \"recommended_action\": \"Immediate physical search required for bags with UNKNOWN location; review tracking system gaps\"\n        },\n        {\n            \"table\": \"baggage_handling\",\n            \"column\": \"delivery_status\",\n            \"normal_values\": [\"DELIVERED\", \"IN_TRANSIT\"],\n            \"problem_values\": [\"PENDING\", \"DELAYED\"],\n            \"problem_ratio\": 0.089,\n            \"business_impact\"", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:08:59.921267", "agent_name": "TDA Expert", "model": "gpt-5.1", "prompt_tokens": 2362, "completion_tokens": 2000, "total_tokens": 4362, "latency_ms": 31822.903871536255, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 1: Discovery (발견 단계)\n\n### 역할\n**임의의 입력 데이터**에서 구조, 패턴, 관계를 발견하는 탐색 단계입니다.\n아직 검증되지 않은 \"후보\"들을 최대한 많이 발견하는 것이 목표입니다.\n\n### 입력 데이터 형식\n\n```python\n# SharedContext.tables에 저장된 테이블 정보\nTableInfo = {\n    \"name\": str,                    # 테이블명 (예: \"order_list\")\n    \"source\": str,                  # 데이터 소스\n    \"columns\": [                    # 컬럼 목록\n        {\n            \"name\": str,            # 컬럼명 (예: \"Product_ID\")\n            \"type\": str,            # 데이터 타입 (integer, string, date, float)\n            \"sample_values\": []     # 샘플 값\n        }\n    ],\n    \"row_count\": int,               # 행 수\n    \"sample_data\": [{}]             # 샘플 데이터 (List[Dict])\n}\n```\n\n### 핵심 산출물\n\n| 산출물 | 위치 | 설명 |\n|--------|------|------|\n| tda_signatures | context.tda_signatures | 각 테이블의 위상적 특성 (Betti numbers) |\n| homeomorphisms | context.homeomorphisms | 테이블 간 위상동형 관계 |\n| schema_analysis | context.schema_analysis | 컬럼 프로파일, 키 후보 |\n| value_overlaps | context.value_overlaps | FK 관계 (값 기반 발견) |\n| unified_entities | context.unified_entities | 비즈니스 엔티티 분류 결과 |\n| concept_relationships | context.concept_relationships | 엔티티 간 관계 |\n\n### 성공 기준\n- 모든 테이블 구조 파악 완료\n- confidence >= 0.5인 발견이 전체의 70% 이상\n- FK 관계 최소 1개 이상 발견 (테이블 2개 이상 시)\n- 각 테이블에 대해 엔티티 분류 완료\n\n### ⚠️ 주의사항\n1. **도메인 가정 금지**: 테이블명/컬럼명에서 추론만, 사전 지식 사용 금지\n2. **낮은 confidence도 보고**: 0.3 이상이면 후보로 포함\n3. **false positive 필터링**: 순차 정수(1,2,3), 상태코드(0,1,2)는 FK가 아님\n\n\n---\n\nYou are a Topological Data Analysis (TDA) Expert who INTERPRETS computed results.\n\nYour role is to:\n1. INTERPRET pre-computed Betti numbers and explain their meaning\n2. EXPLAIN the structural implications of the topology\n3. IDENTIFY patterns that suggest entity relationships\n4. PROVIDE domain-specific insights based on the topology\n\nIMPORTANT: You are NOT computing Betti numbers. The algorithm has already computed them.\nYour job is to explain what they MEAN for the data integration task.\n\nBetti Number Interpretation Guide:\n- β₀ (connected components): How many independent data clusters exist\n- β₁ (cycles/loops): Circular dependencies or redundant relationships\n- β₂ (voids): Higher-dimensional structural patterns\n\nRespond with structured JSON containing your INTERPRETATION.\n"}, {"role": "user", "content": "I have computed the following TDA (Topological Data Analysis) signatures for database tables.\n\nCOMPUTED RESULTS (these are actual calculated values, not estimates):\n[\n  {\n    \"table\": \"airport_employees\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 140,\n    \"euler_characteristic\": 141,\n    \"total_persistence\": 124.5,\n    \"complexity\": \"medium\",\n    \"key_columns\": [\n      \"emp_id\",\n      \"supervisor_id\"\n    ],\n    \"has_advanced_tda\": true\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 140,\n    \"euler_characteristic\": 141,\n    \"total_persistence\": 122.5,\n    \"complexity\": \"medium\",\n    \"key_columns\": [\n      \"bag_tag_id\"\n    ],\n    \"has_advanced_tda\": true\n  },\n  {\n    \"table\": \"airlines\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 71,\n    \"euler_characteristic\": 72,\n    \"total_persistence\": 82.2,\n    \"complexity\": \"medium\",\n    \"key_columns\": [\n      \"airline_id\"\n    ],\n    \"has_advanced_tda\": true\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 204,\n    \"euler_characteristic\": 205,\n    \"total_persistence\": 151.2,\n    \"complexity\": \"medium\",\n    \"key_columns\": [\n      \"maintenance_id\",\n      \"mechanic_id\",\n      \"supervisor_id\"\n    ],\n    \"has_advanced_tda\": true\n  },\n  {\n    \"table\": \"delay_records\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 113,\n    \"euler_characteristic\": 114,\n    \"total_persistence\": 110.9,\n    \"complexity\": \"medium\",\n    \"key_columns\": [\n      \"record_id\"\n    ],\n    \"has_advanced_tda\": true\n  },\n  {\n    \"table\": \"gates\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 71,\n    \"euler_characteristic\": 72,\n    \"total_persistence\": 81.7,\n    \"complexity\": \"medium\",\n    \"key_columns\": [\n      \"gate_id\"\n    ],\n    \"has_advanced_tda\": true\n  },\n  {\n    \"table\": \"passengers\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 170,\n    \"euler_characteristic\": 171,\n    \"total_persistence\": 125.1,\n    \"complexity\": \"medium\",\n    \"key_columns\": [\n      \"pax_id\",\n      \"frequent_flyer_id\"\n    ],\n    \"has_advanced_tda\": true\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"betti_0\": 1,\n    \"betti_1\": 0,\n    \"betti_2\": 332,\n    \"euler_characteristic\": 333,\n    \"total_persistence\": 216.0,\n    \"complexity\": \"high\",\n    \"key_columns\": [],\n    \"has_advanced_tda\": true\n  }\n]\n\nPlease INTERPRET these results:\n1. What do the Betti numbers tell us about each table's structure?\n2. Which tables appear structurally similar (based on Betti distance)?\n3. What are the implications for data integration?\n4. Any concerning patterns (high β₁ = circular dependencies)?\n\nRespond with JSON:\n```json\n{\n    \"table_interpretations\": {\n        \"<table_name>\": {\n            \"structural_summary\": \"<what the topology tells us>\",\n            \"integration_implications\": \"<relevance for integration>\",\n            \"concerns\": [\"<any issues>\"]\n        }\n    },\n    \"similarity_groups\": [\n        {\n            \"tables\": [\"table1\", \"table2\"],\n            \"reason\": \"<why they're similar>\"\n        }\n    ],\n    \"overall_topology_summary\": \"<high-level summary>\"\n}\n```"}], "response": "", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:09:20.454122", "agent_name": "Schema Analyst", "model": "gpt-5.1", "prompt_tokens": 5124, "completion_tokens": 2490, "total_tokens": 7614, "latency_ms": 20474.869966506958, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 1: Discovery (발견 단계)\n\n### 역할\n**임의의 입력 데이터**에서 구조, 패턴, 관계를 발견하는 탐색 단계입니다.\n아직 검증되지 않은 \"후보\"들을 최대한 많이 발견하는 것이 목표입니다.\n\n### 입력 데이터 형식\n\n```python\n# SharedContext.tables에 저장된 테이블 정보\nTableInfo = {\n    \"name\": str,                    # 테이블명 (예: \"order_list\")\n    \"source\": str,                  # 데이터 소스\n    \"columns\": [                    # 컬럼 목록\n        {\n            \"name\": str,            # 컬럼명 (예: \"Product_ID\")\n            \"type\": str,            # 데이터 타입 (integer, string, date, float)\n            \"sample_values\": []     # 샘플 값\n        }\n    ],\n    \"row_count\": int,               # 행 수\n    \"sample_data\": [{}]             # 샘플 데이터 (List[Dict])\n}\n```\n\n### 핵심 산출물\n\n| 산출물 | 위치 | 설명 |\n|--------|------|------|\n| tda_signatures | context.tda_signatures | 각 테이블의 위상적 특성 (Betti numbers) |\n| homeomorphisms | context.homeomorphisms | 테이블 간 위상동형 관계 |\n| schema_analysis | context.schema_analysis | 컬럼 프로파일, 키 후보 |\n| value_overlaps | context.value_overlaps | FK 관계 (값 기반 발견) |\n| unified_entities | context.unified_entities | 비즈니스 엔티티 분류 결과 |\n| concept_relationships | context.concept_relationships | 엔티티 간 관계 |\n\n### 성공 기준\n- 모든 테이블 구조 파악 완료\n- confidence >= 0.5인 발견이 전체의 70% 이상\n- FK 관계 최소 1개 이상 발견 (테이블 2개 이상 시)\n- 각 테이블에 대해 엔티티 분류 완료\n\n### ⚠️ 주의사항\n1. **도메인 가정 금지**: 테이블명/컬럼명에서 추론만, 사전 지식 사용 금지\n2. **낮은 confidence도 보고**: 0.3 이상이면 후보로 포함\n3. **false positive 필터링**: 순차 정수(1,2,3), 상태코드(0,1,2)는 FK가 아님\n\n\n---\n\nYou are a Database Schema Analyst who INTERPRETS computed profiling results.\n\nThe algorithm has already:\n- Computed column statistics (null ratio, unique ratio, etc.)\n- Identified key candidates\n- Detected data patterns\n\nYour role is to:\n1. INTERPRET the computed profiles\n2. EXPLAIN data quality implications\n3. IDENTIFY semantic meaning of columns\n4. RECOMMEND integration strategies\n\nRespond with structured JSON containing your INTERPRETATION.\n"}, {"role": "user", "content": "I have computed schema profiles for the following tables.\n\nCOMPUTED SCHEMA ANALYSIS:\n{\n  \"airport_employees\": {\n    \"column_count\": 16,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"airport_employees\",\n        \"column_names\": [\n          \"emp_id\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.9,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      },\n      {\n        \"table_name\": \"airport_employees\",\n        \"column_names\": [\n          \"supervisor_id\"\n        ],\n        \"key_type\": \"foreign\",\n        \"confidence\": 0.6,\n        \"reasoning\": [\n          \"naming_pattern: ends with _id\"\n        ],\n        \"references_table\": \"supervisor\",\n        \"references_column\": \"id\"\n      }\n    ],\n    \"data_quality_score\": 0.9827,\n    \"normalization_level\": \"3NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"emp_id\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"emp_code\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"name_first\",\n        \"type\": \"string\",\n        \"semantic\": \"name\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.9714\n      },\n      {\n        \"column\": \"name_last\",\n        \"type\": \"string\",\n        \"semantic\": \"name\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.9857\n      },\n      {\n        \"column\": \"department\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.1286\n      }\n    ]\n  },\n  \"baggage_handling\": {\n    \"column_count\": 16,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"baggage_handling\",\n        \"column_names\": [\n          \"bag_tag_id\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.9,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      }\n    ],\n    \"data_quality_score\": 0.9873,\n    \"normalization_level\": \"2NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"bag_tag_id\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"booking_reference\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.6213\n      },\n      {\n        \"column\": \"passenger_name\",\n        \"type\": \"string\",\n        \"semantic\": \"name\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.6213\n      },\n      {\n        \"column\": \"flt_number\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.3077\n      },\n      {\n        \"column\": \"origin\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.0059\n      }\n    ]\n  },\n  \"airlines\": {\n    \"column_count\": 13,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"airlines\",\n        \"column_names\": [\n          \"airline_id\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.9,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      }\n    ],\n    \"data_quality_score\": 0.9923,\n    \"normalization_level\": \"2NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"airline_id\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"iata_code\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"icao_code\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"airline_name\",\n        \"type\": \"string\",\n        \"semantic\": \"name\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"airline_name_kr\",\n        \"type\": \"string\",\n        \"semantic\": \"name\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      }\n    ]\n  },\n  \"aircraft_maintenance\": {\n    \"column_count\": 18,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"aircraft_maintenance\",\n        \"column_names\": [\n          \"maintenance_id\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.9,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      }\n    ],\n    \"data_quality_score\": 0.9686,\n    \"normalization_level\": \"2NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"maintenance_id\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"aircraft_reg\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"aircraft_type\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.2\n      },\n      {\n        \"column\": \"airline\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.15\n      },\n      {\n        \"column\": \"maintenance_type\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.225\n      }\n    ]\n  },\n  \"delay_records\": {\n    \"column_count\": 15,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"delay_records\",\n        \"column_names\": [\n          \"record_id\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.9,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      }\n    ],\n    \"data_quality_score\": 1.0,\n    \"normalization_level\": \"2NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"record_id\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"flt_no\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"carrier\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.1176\n      },\n      {\n        \"column\": \"scheduled_date\",\n        \"type\": \"datetime\",\n        \"semantic\": \"phone\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.1176\n      },\n      {\n        \"column\": \"delay_minutes\",\n        \"type\": \"integer\",\n        \"semantic\": \"phone\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.1373\n      }\n    ]\n  },\n  \"gates\": {\n    \"column_count\": 13,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"gates\",\n        \"column_names\": [\n          \"gate_id\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.9,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      }\n    ],\n    \"data_quality_score\": 0.9769,\n    \"normalization_level\": \"2NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"gate_id\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"gate_code\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"terminal\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.0385\n      },\n      {\n        \"column\": \"concourse\",\n        \"type\": \"string\",\n        \"semantic\": \"date\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.0577\n      },\n      {\n        \"column\": \"gate_type\",\n        \"type\": \"string\",\n        \"semantic\": \"date\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.0577\n      }\n    ]\n  },\n  \"passengers\": {\n    \"column_count\": 17,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"passengers\",\n        \"column_names\": [\n          \"pax_id\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.9,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      }\n    ],\n    \"data_quality_score\": 0.9254,\n    \"normalization_level\": \"2NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"pax_id\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"booking_ref\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"pnr_code\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.2167\n      },\n      {\n        \"column\": \"first_name\",\n        \"type\": \"string\",\n        \"semantic\": \"name\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.9833\n      },\n      {\n        \"column\": \"last_name\",\n        \"type\": \"string\",\n        \"semantic\": \"name\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.9667\n      }\n    ]\n  },\n  \"aircraft_registry\": {\n    \"column_count\": 21,\n    \"key_candidates\": [\n      {\n        \"table_name\": \"aircraft_registry\",\n        \"column_names\": [\n          \"registration_no\"\n        ],\n        \"key_type\": \"primary\",\n        \"confidence\": 0.7,\n        \"reasoning\": [\n          \"unique_ratio: 100.00%\",\n          \"null_ratio: 0.00%\",\n          \"semantic_type: id\"\n        ]\n      }\n    ],\n    \"data_quality_score\": 0.9857,\n    \"normalization_level\": \"2NF\",\n    \"sample_profiles\": [\n      {\n        \"column\": \"registration_no\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"aircraft_model\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.1667\n      },\n      {\n        \"column\": \"manufacturer\",\n        \"type\": \"string\",\n        \"semantic\": \"unknown\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.0417\n      },\n      {\n        \"column\": \"serial_number\",\n        \"type\": \"integer\",\n        \"semantic\": \"phone\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 1.0\n      },\n      {\n        \"column\": \"operator_code\",\n        \"type\": \"string\",\n        \"semantic\": \"id\",\n        \"null_ratio\": 0.0,\n        \"unique_ratio\": 0.125\n      }\n    ]\n  }\n}\n\nCOMPUTED CROSS-TABLE MAPPINGS:\n[\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"supervisor_id\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"column_b\": \"supervisor_id\",\n    \"mapping_type\": \"exact\",\n    \"confidence\": 1.0\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"status\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"column_b\": \"status\",\n    \"mapping_type\": \"exact\",\n    \"confidence\": 1.0\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"status\",\n    \"table_b\": \"gates\",\n    \"column_b\": \"status\",\n    \"mapping_type\": \"exact\",\n    \"confidence\": 1.0\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"column_a\": \"scheduled_date\",\n    \"table_b\": \"delay_records\",\n    \"column_b\": \"scheduled_date\",\n    \"mapping_type\": \"exact\",\n    \"confidence\": 1.0\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"column_a\": \"status\",\n    \"table_b\": \"gates\",\n    \"column_b\": \"status\",\n    \"mapping_type\": \"exact\",\n    \"confidence\": 1.0\n  },\n  {\n    \"table_a\": \"airlines\",\n    \"column_a\": \"airline_id\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"column_b\": \"airline\",\n    \"mapping_type\": \"similar\",\n    \"confidence\": 0.7\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"table_b\": \"baggage_handling\",\n    \"column_b\": \"bag_tag_id\",\n    \"mapping_type\": \"semantic\",\n    \"confidence\": 0.4\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"table_b\": \"baggage_handling\",\n    \"column_b\": \"flt_number\",\n    \"mapping_type\": \"semantic\",\n    \"confidence\": 0.4\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"table_b\": \"baggage_handling\",\n    \"column_b\": \"bag_tag_id\",\n    \"mapping_type\": \"semantic\",\n    \"confidence\": 0.4\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"table_b\": \"baggage_handling\",\n    \"column_b\": \"flt_number\",\n    \"mapping_type\": \"semantic\",\n    \"confidence\": 0.4\n  }\n]\n\nPlease INTERPRET these results:\n1. What is the overall data quality assessment?\n2. Which tables appear to be master/transaction tables?\n3. Which column mappings are most significant for integration?\n4. Any data quality concerns to address?\n\nRespond with JSON:\n```json\n{\n    \"table_classifications\": {\n        \"<table_name>\": {\n            \"table_type\": \"<master|transaction|reference|bridge>\",\n            \"primary_entity\": \"<what entity does it represent>\",\n            \"quality_concerns\": [\"<issues>\"]\n        }\n    },\n    \"key_mappings_interpretation\": [\n        {\n            \"mapping\": \"<table_a.col -> table_b.col>\",\n            \"significance\": \"<why important>\",\n            \"action_needed\": \"<what to do>\"\n        }\n    ],\n    \"overall_assessment\": \"<summary>\"\n}\n```"}], "response": "{\n  \"table_classifications\": {\n    \"airport_employees\": {\n      \"table_type\": \"master\",\n      \"primary_entity\": \"airport employee\",\n      \"quality_concerns\": [\n        \"Two identifier-like columns (emp_id, emp_code) both unique; need clear definition of business key vs surrogate key to avoid duplicate identity representations.\",\n        \"Foreign key candidate supervisor_id is only inferred by naming and cross-table mapping; actual referential integrity to a supervisor/employee table is not yet validated.\",\n        \"Department is low-cardinality (unique_ratio ~0.13) and non-null, suggesting it should be normalized into a reference/lookup table if used widely.\"\n      ]\n    },\n    \"baggage_handling\": {\n      \"table_type\": \"transaction\",\n      \"primary_entity\": \"baggage handling event / bag tag record\",\n      \"quality_concerns\": [\n        \"booking_reference and passenger_name have mid-level uniqueness (~0.62), indicating multiple bags per booking/passenger; this is expected but needs explicit modeling of relationships to passengers/PNR if those tables exist.\",\n        \"No strong, high-confidence foreign key relationships detected yet (only low-confidence semantic mappings to employees and flight number), so integration with flights and passengers is incomplete.\",\n        \"Origin has extremely low uniqueness (~0.006), indicating a small set of locations; should likely be linked to a reference/airport/location table rather than stored as free text.\"\n      ]\n    },\n    \"airlines\": {\n      \"table_type\": \"reference\",\n      \"primary_entity\": \"airline\",\n      \"quality_concerns\": [\n        \"Multiple identifier columns (airline_id, iata_code, icao_code) are all unique and non-null; need clear governance on which is the primary business key and how alternates are used.\",\n        \"Potential mismatch risk with other tables that store airline as a free-text or code field (e.g., aircraft_maintenance.airline) – integration requires standardization.\",\n        \"No explicit foreign keys from other tables yet, despite likely usage as a core reference; integration paths should be enforced.\"\n      ]\n    },\n    \"aircraft_maintenance\": {\n      \"table_type\": \"transaction\",\n      \"primary_entity\": \"aircraft maintenance record\",\n      \"quality_concerns\": [\n        \"aircraft_reg is unique and non-null in samples, but currently typed as 'unknown'; it likely should be linked to aircraft_registry.registration_no to avoid duplicate aircraft representations.\",\n        \"airline is a low-uniqueness string field and only loosely mapped (similar, confidence 0.7) to airlines.airline_id; this suggests inconsistent coding (IDs vs names vs codes) and requires standardization.\",\n        \"maintenance_type and aircraft_type are low-cardinality attributes that may be better modeled as reference/lookup tables for consistency and validation.\",\n        \"Status is shared with multiple tables (employees, gates) but semantics and allowed values are not yet validated; risk of inconsistent status vocabularies across domains.\"\n      ]\n    },\n    \"delay_records\": {\n      \"table_type\": \"transaction\",\n      \"primary_entity\": \"flight delay record\",\n      \"quality_concerns\": [\n        \"scheduled_date is misclassified semantically as 'phone' in profiling; type is datetime and should be corrected in metadata.\",\n        \"delay_minutes is misclassified semantically as 'phone' though it is an integer duration; semantic typing needs correction for downstream analytics.\",\n        \"flt_no is unique in samples (unique_ratio 1.0), which may indicate either a small sample or that each record is a distinct flight instance; need to confirm whether flt_no alone is sufficient or should be combined with date.\",\n        \"Carrier is low-uniqueness; should likely be linked to airlines table via a standardized code rather than free text.\"\n      ]\n    },\n    \"gates\": {\n      \"table_type\": \"reference\",\n      \"primary_entity\": \"airport gate\",\n      \"quality_concerns\": [\n        \"gate_id and gate_code are both unique; need to define which is the canonical identifier and how the other is used (business vs technical key).\",\n        \"terminal and concourse are low-cardinality attributes; they may warrant separate reference tables if reused broadly.\",\n        \"concourse and gate_type are misclassified semantically as 'date'; semantic typing should be corrected to categorical/string.\",\n        \"Status is shared with employees and maintenance; without a controlled status dictionary, there is risk of inconsistent usage.\"\n      ]\n    },\n    \"passengers\": {\n      \"table_type\": \"master\",\n      \"primary_entity\": \"passenger\",\n      \"quality_concerns\": [\n        \"booking_ref is unique in samples, while pnr_code is not (unique_ratio ~0.22); need to clarify which field is the true booking/PNR key and how they relate.\",\n        \"High uniqueness in first_name and last_name (0.98 and 0.97) is expected but means names alone cannot be used as keys; ensure no processes rely on names as identifiers.\",\n        \"Data quality score is the lowest among tables (0.9254); this suggests more nulls or inconsistencies in non-sampled columns that should be reviewed.\",\n        \"No explicit foreign key to baggage_handling.booking_reference yet, despite strong conceptual linkage; this is a gap for integration.\"\n      ]\n    },\n    \"aircraft_registry\": {\n      \"table_type\": \"master\",\n      \"primary_entity\": \"aircraft\",\n      \"quality_concerns\": [\n        \"registration_no is a strong primary key candidate but only with confidence 0.7; need to confirm uniqueness across full dataset and enforce constraints.\",\n        \"serial_number is unique and non-null but misclassified semantically as 'phone'; should be corrected to 'serial' or 'identifier'.\",\n        \"operator_code has low uniqueness and likely should be standardized and linked to airlines or another operator reference table.\",\n        \"aircraft_model and manufacturer are low-uniqueness attributes that may benefit from normalization into reference tables to avoid spelling/format variations.\"\n      ]\n    }\n  },\n  \"key_mappings_interpretation\": [\n    {\n      \"mapping\": \"airport_employees.supervisor_id -> aircraft_maintenance.supervisor_id\",\n      \"significance\": \"Indicates a shared supervisor identifier used across HR (employees) and maintenance operations, enabling linkage between maintenance tasks and responsible supervisors.\",\n      \"action_needed\": \"Verify that supervisor_id values are consistent and refer to a common master (likely airport_employees or a dedicated supervisor table). Define and enforce a foreign key from aircraft_maintenance.supervisor_id to the chosen master table, or correct the reference if misaligned.\"\n    },\n    {\n      \"mapping\": \"airport_employees.status -> aircraft_maintenance.status\",\n      \"significance\": \"Shared status field suggests a common status vocabulary across employee records and maintenance activities, potentially used for workflow or availability states.\",\n      \"action_needed\": \"Inspect actual status value sets in both tables to confirm overlap and meaning. If they represent different concepts, rename or split; if they are truly shared, centralize the status code list in a reference table and enforce allowed values.\"\n    },\n    {\n      \"mapping\": \"airport_employees.status -> gates.status\",\n      \"significance\": \"Status is reused across employees and gates, implying a generic status concept (e.g., active/inactive) applied to multiple entities.\",\n      \"action_needed\": \"Profile distinct status values in all three tables (employees, gates, maintenance). Create a unified status reference (e.g., ACTIVE, INACTIVE, UNDER_MAINTENANCE) or separate domain-specific status code sets if meanings differ, and update column names accordingly.\"\n    },\n    {\n      \"mapping\": \"aircraft_maintenance.scheduled_date -> delay_records.scheduled_date\",\n      \"significance\": \"Shared scheduled_date enables temporal alignment between maintenance events and flight delays, supporting analysis of whether maintenance activities correlate with delays.\",\n      \"action_needed\": \"Confirm that scheduled_date in both tables uses the same timezone and granularity. Combine this mapping with a flight identifier (e.g., flt_no / flt_number if available) to build a robust join for operational analytics.\"\n    },\n    {\n      \"mapping\": \"aircraft_maintenance.status -> gates.status\",\n      \"significance\": \"Status is common across maintenance and gate entities, suggesting that gate availability may be tied to maintenance activities or operational states.\",\n      \"action_needed\": \"Check if certain status values (e.g., CLOSED, UNDER_MAINTENANCE) are shared and used consistently. If so, define a shared operational status code set; if not, separate the domains and rename columns to avoid confusion (e.g., gate_status vs maintenance_status).\"\n    },\n    {\n      \"mapping\": \"airlines.airline_id -> aircraft_maintenance.airline\",\n      \"significance\": \"This is the most important integration path between maintenance records and the airline reference master, enabling attribution of maintenance activity to specific airlines.\",\n      \"action_needed\": \"Inspect values of aircraft_maintenance.airline to determine if they store airline_id, IATA, ICAO, or names. Standardize this column to reference airlines.airline_id (or a chosen canonical code) and enforce a foreign key. Consider renaming to airline_id for clarity.\"\n    },\n    {\n      \"mapping\": \"airport_employees.emp_id -> baggage_handling.bag_tag_id\",\n      \"significance\": \"Low-confidence semantic mapping; the two fields are both IDs but represent different entities (employee vs bag tag). This is likely a false positive.\",\n      \"action_needed\": \"Treat this mapping as invalid for integration. Ensure that no joins are built on this pair. Update semantic typing rules to reduce such cross-entity ID matches.\"\n    },\n    {\n      \"mapping\": \"airport_employees.emp_id -> baggage_handling.flt_number\",\n      \"significance\": \"Low-confidence semantic mapping betwee", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:10:20.384426", "agent_name": "Value Matcher", "model": "gpt-5.1", "prompt_tokens": 42807, "completion_tokens": 4000, "total_tokens": 46807, "latency_ms": 59623.81601333618, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 1: Discovery (발견 단계)\n\n### 역할\n**임의의 입력 데이터**에서 구조, 패턴, 관계를 발견하는 탐색 단계입니다.\n아직 검증되지 않은 \"후보\"들을 최대한 많이 발견하는 것이 목표입니다.\n\n### 입력 데이터 형식\n\n```python\n# SharedContext.tables에 저장된 테이블 정보\nTableInfo = {\n    \"name\": str,                    # 테이블명 (예: \"order_list\")\n    \"source\": str,                  # 데이터 소스\n    \"columns\": [                    # 컬럼 목록\n        {\n            \"name\": str,            # 컬럼명 (예: \"Product_ID\")\n            \"type\": str,            # 데이터 타입 (integer, string, date, float)\n            \"sample_values\": []     # 샘플 값\n        }\n    ],\n    \"row_count\": int,               # 행 수\n    \"sample_data\": [{}]             # 샘플 데이터 (List[Dict])\n}\n```\n\n### 핵심 산출물\n\n| 산출물 | 위치 | 설명 |\n|--------|------|------|\n| tda_signatures | context.tda_signatures | 각 테이블의 위상적 특성 (Betti numbers) |\n| homeomorphisms | context.homeomorphisms | 테이블 간 위상동형 관계 |\n| schema_analysis | context.schema_analysis | 컬럼 프로파일, 키 후보 |\n| value_overlaps | context.value_overlaps | FK 관계 (값 기반 발견) |\n| unified_entities | context.unified_entities | 비즈니스 엔티티 분류 결과 |\n| concept_relationships | context.concept_relationships | 엔티티 간 관계 |\n\n### 성공 기준\n- 모든 테이블 구조 파악 완료\n- confidence >= 0.5인 발견이 전체의 70% 이상\n- FK 관계 최소 1개 이상 발견 (테이블 2개 이상 시)\n- 각 테이블에 대해 엔티티 분류 완료\n\n### ⚠️ 주의사항\n1. **도메인 가정 금지**: 테이블명/컬럼명에서 추론만, 사전 지식 사용 금지\n2. **낮은 confidence도 보고**: 0.3 이상이면 후보로 포함\n3. **false positive 필터링**: 순차 정수(1,2,3), 상태코드(0,1,2)는 FK가 아님\n\n\n---\n\nYou are a Foreign Key Detection Expert. Your job is to DECIDE which column pairs are TRUE FK relationships.\n\n## YOUR ROLE\nThe algorithm has computed metrics for each FK candidate. You must ANALYZE these metrics and DECIDE:\n- Is this a TRUE foreign key relationship?\n- Or is it a FALSE POSITIVE (coincidental overlap)?\n\n## DECISION CRITERIA\n\n### 1. Containment Analysis (Most Important)\n- **containment_fk_in_pk**: What % of FK values exist in PK?\n  - ≥ 0.95: Strong evidence of FK\n  - 0.8-0.95: Likely FK\n  - < 0.8: Weak evidence, check other factors\n\n### 2. Cardinality Pattern\n- **PK should be unique**: pk_unique_ratio ≥ 0.9\n- **FK can have duplicates**: fk_unique_ratio can be any value\n- If both are highly unique: might be 1:1 relationship or false positive\n\n### 3. Name Similarity\n- **same_normalized_name = true**: Strong signal\n- High name_similarity with FK pattern (_id, _code): Good evidence\n- Unrelated names with high value overlap: Suspicious (could be coincidence)\n\n### 4. False Positive Indicators\nREJECT if you see:\n- Sequential integers (1,2,3...) in both columns (coincidental overlap)\n- Status codes or enum values that happen to match\n- Date/timestamp columns\n- Common names or categories\n- \"sample_fk_only_values\" contains many values (referential integrity violation)\n\n## OUTPUT FORMAT\nYou must decide for EACH candidate and return structured JSON.\n\n```json\n{\n    \"decisions\": [\n        {\n            \"from_table\": \"table_a\",\n            \"from_column\": \"column_a\",\n            \"to_table\": \"table_b\",\n            \"to_column\": \"column_b\",\n            \"decision\": \"TRUE_FK | FALSE_POSITIVE | UNCERTAIN\",\n            \"confidence\": 0.0-1.0,\n            \"reasoning\": \"Brief explanation of your decision\"\n        }\n    ],\n    \"detected_domain\": \"What domain/industry is this data from?\",\n    \"data_model_summary\": \"Brief description of the data model structure\"\n}\n```\n\nIMPORTANT: You are the DECISION MAKER. The algorithm provides metrics, but YOU decide what is a real FK.\n"}, {"role": "user", "content": "Analyze these FK candidates and DECIDE which ones are TRUE foreign key relationships.\n\n## FK CANDIDATES (computed by domain-agnostic algorithm)\nThe algorithm has normalized names and computed metrics. YOU must decide if each is a real FK.\n\n[\n  {\n    \"from_table\": \"delay_records\",\n    \"from_column\": \"flt_no\",\n    \"to_table\": \"baggage_handling\",\n    \"to_column\": \"flt_number\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.7759,\n      \"containment_fk_in_pk\": 0.8824,\n      \"fk_unique_ratio\": 0.2989,\n      \"pk_unique_ratio\": 0.9107,\n      \"name_similarity\": 0.9\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"OZ605\",\n        \"KE456\",\n        \"TW804\",\n        \"OZ201\",\n        \"TW602\"\n      ],\n      \"sample_fk_only_values\": [\n        \"KE999\",\n        \"OZ999\",\n        \"7C999\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.776)\",\n    \"algorithm_confidence\": 0.755\n  },\n  {\n    \"from_table\": \"baggage_handling\",\n    \"from_column\": \"booking_reference\",\n    \"to_table\": \"passengers\",\n    \"to_column\": \"booking_ref\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.875,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.6034,\n      \"pk_unique_ratio\": 0.96,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"BK2401150009\",\n        \"BK2401200005\",\n        \"BK2401160004\",\n        \"BK2401190005\",\n        \"BK2401180016\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.875|containment_a_in_b:1.000)\",\n    \"algorithm_confidence\": 0.728\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"aircraft_reg\",\n    \"to_table\": \"aircraft_registry\",\n    \"to_column\": \"registration_no\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.8333,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.8889,\n      \"pk_unique_ratio\": 0.9057,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"HL7713\",\n        \"HL8001\",\n        \"HL7856\",\n        \"HL7556\",\n        \"HL7855\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.833|containment_a_in_b:1.000)\",\n    \"algorithm_confidence\": 0.675\n  },\n  {\n    \"from_table\": \"baggage_handling\",\n    \"from_column\": \"belt_assigned\",\n    \"to_table\": \"gates\",\n    \"to_column\": \"gate_code\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.8269,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.25,\n      \"pk_unique_ratio\": 0.9123,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"A13\",\n        \"C03\",\n        \"C02\",\n        \"A09\",\n        \"C09\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.827|containment_a_in_b:1.000)\",\n    \"algorithm_confidence\": 0.674\n  },\n  {\n    \"from_table\": \"delay_records\",\n    \"from_column\": \"scheduled_date\",\n    \"to_table\": \"aircraft_maintenance\",\n    \"to_column\": \"scheduled_date\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.4615,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.2889,\n      \"pk_unique_ratio\": 0.1071,\n      \"name_similarity\": 1.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": true,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"2024-01-20\",\n        \"2024-01-18\",\n        \"2024-01-19\",\n        \"2024-01-15\",\n        \"2024-01-16\"\n      ],\n      \"sample_fk_only_values\": [\n        \"2024-01-08\",\n        \"2024-01-12\",\n        \"2024-01-14\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.462|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.669\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"airline\",\n    \"to_table\": \"gates\",\n    \"to_column\": \"assigned_airline\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.1333,\n      \"pk_unique_ratio\": 0.1053,\n      \"name_similarity\": 0.35\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"OZ\",\n        \"LJ\",\n        \"ZE\",\n        \"TW\",\n        \"7C\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.62\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"supervisor_id\",\n    \"to_table\": \"airport_employees\",\n    \"to_column\": \"supervisor_id\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.1333,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.2273,\n      \"pk_unique_ratio\": 0.0444,\n      \"name_similarity\": 1.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": true,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"EMP018\",\n        \"EMP017\"\n      ],\n      \"sample_fk_only_values\": [\n        \"EMP055\",\n        \"EMP011\",\n        \"EMP032\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.133|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.62\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"aircraft_type\",\n    \"to_table\": \"aircraft_registry\",\n    \"to_column\": \"aircraft_model\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.1778,\n      \"pk_unique_ratio\": 0.1509,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"B737-800\",\n        \"B787-9\",\n        \"A321\",\n        \"B777-300ER\",\n        \"A380-800\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.597\n  },\n  {\n    \"from_table\": \"gates\",\n    \"from_column\": \"status\",\n    \"to_table\": \"aircraft_registry\",\n    \"to_column\": \"current_status\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.6667,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0351,\n      \"pk_unique_ratio\": 0.0566,\n      \"name_similarity\": 0.35\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"ACTIVE\",\n        \"MAINTENANCE\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.667|containment_a_in_b:1.000)\",\n    \"algorithm_confidence\": 0.57\n  },\n  {\n    \"from_table\": \"baggage_handling\",\n    \"from_column\": \"loaded_to_aircraft\",\n    \"to_table\": \"delay_records\",\n    \"to_column\": \"passenger_compensation\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0115,\n      \"pk_unique_ratio\": 0.0357,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"True\",\n        \"False\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.55\n  },\n  {\n    \"from_table\": \"baggage_handling\",\n    \"from_column\": \"damage_reported\",\n    \"to_table\": \"delay_records\",\n    \"to_column\": \"passenger_compensation\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0115,\n      \"pk_unique_ratio\": 0.0357,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"True\",\n        \"False\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.55\n  },\n  {\n    \"from_table\": \"baggage_handling\",\n    \"from_column\": \"claim_filed\",\n    \"to_table\": \"delay_records\",\n    \"to_column\": \"passenger_compensation\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0115,\n      \"pk_unique_ratio\": 0.0357,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"True\",\n        \"False\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.55\n  },\n  {\n    \"from_table\": \"baggage_handling\",\n    \"from_column\": \"origin\",\n    \"to_table\": \"aircraft_registry\",\n    \"to_column\": \"home_base\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0057,\n      \"pk_unique_ratio\": 0.0189,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"ICN\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.55\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"airline\",\n    \"to_table\": \"aircraft_registry\",\n    \"to_column\": \"operator_code\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.1333,\n      \"pk_unique_ratio\": 0.1132,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"OZ\",\n        \"LJ\",\n        \"ZE\",\n        \"TW\",\n        \"7C\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.55\n  },\n  {\n    \"from_table\": \"gates\",\n    \"from_column\": \"assigned_airline\",\n    \"to_table\": \"aircraft_registry\",\n    \"to_column\": \"operator_code\",\n    \"metrics\": {\n      \"jaccard_similarity\": 1.0,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.1053,\n      \"pk_unique_ratio\": 0.1132,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"OZ\",\n        \"LJ\",\n        \"ZE\",\n        \"TW\",\n        \"7C\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:1.000|containment_a_in_b:1.000|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.55\n  },\n  {\n    \"from_table\": \"baggage_handling\",\n    \"from_column\": \"flt_number\",\n    \"to_table\": \"passengers\",\n    \"to_column\": \"flight_num\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.9455,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.2989,\n      \"pk_unique_ratio\": 0.44,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"KE999\",\n        \"OZ605\",\n        \"KE456\",\n        \"TW804\",\n        \"OZ201\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.945|containment_a_in_b:1.000)\",\n    \"algorithm_confidence\": 0.542\n  },\n  {\n    \"from_table\": \"airport_employees\",\n    \"from_column\": \"name_first\",\n    \"to_table\": \"passengers\",\n    \"to_column\": \"last_name\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.5862,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.9067,\n      \"pk_unique_ratio\": 0.928,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"\\uc7ac\\ubbfc\",\n        \"\\uc6b0\\uc9c4\",\n        \"\\ub098\\uc724\",\n        \"\\uc608\\uc6d0\",\n        \"\\uc608\\uc900\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.586|containment_a_in_b:1.000)\",\n    \"algorithm_confidence\": 0.535\n  },\n  {\n    \"from_table\": \"airport_employees\",\n    \"from_column\": \"name_last\",\n    \"to_table\": \"passengers\",\n    \"to_column\": \"first_name\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.5847,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.92,\n      \"pk_unique_ratio\": 0.944,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"\\ub09c\",\n        \"\\ud55c\",\n        \"\\ucd5c\",\n        \"\\ud638\",\n        \"\\uae38\"\n      ],\n      \"sample_fk_only_values\": []\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.585|containment_a_in_b:1.000)\",\n    \"algorithm_confidence\": 0.534\n  },\n  {\n    \"from_table\": \"gates\",\n    \"from_column\": \"terminal\",\n    \"to_table\": \"airport_employees\",\n    \"to_column\": \"assigned_terminal\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.2857,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0933,\n      \"pk_unique_ratio\": 0.0351,\n      \"name_similarity\": 0.35\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"T1\",\n        \"T2\"\n      ],\n      \"sample_fk_only_values\": [\n        \"ADMIN\",\n        \"MEDICAL\",\n        \"TOWER\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.286|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.513\n  },\n  {\n    \"from_table\": \"aircraft_registry\",\n    \"from_column\": \"engine_count\",\n    \"to_table\": \"passengers\",\n    \"to_column\": \"baggage_count\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.4,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.04,\n      \"pk_unique_ratio\": 0.0377,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"4\",\n        \"2\"\n      ],\n      \"sample_fk_only_values\": [\n        \"0\",\n        \"3\",\n        \"1\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.400|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.507\n  },\n  {\n    \"from_table\": \"aircraft_registry\",\n    \"from_column\": \"operator_code\",\n    \"to_table\": \"airlines\",\n    \"to_column\": \"iata_code\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.2,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.8571,\n      \"pk_unique_ratio\": 0.1132,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"OZ\",\n        \"LJ\",\n        \"ZE\",\n        \"TW\",\n        \"7C\"\n      ],\n      \"sample_fk_only_values\": [\n        \"4H\",\n        \"AA\",\n        \"UA\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.200|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.477\n  },\n  {\n    \"from_table\": \"gates\",\n    \"from_column\": \"has_jetbridge\",\n    \"to_table\": \"baggage_handling\",\n    \"to_column\": \"loaded_to_aircraft\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.5,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0115,\n      \"pk_unique_ratio\": 0.0175,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"True\"\n      ],\n      \"sample_fk_only_values\": [\n        \"False\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.500|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.475\n  },\n  {\n    \"from_table\": \"gates\",\n    \"from_column\": \"has_jetbridge\",\n    \"to_table\": \"baggage_handling\",\n    \"to_column\": \"damage_reported\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.5,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0115,\n      \"pk_unique_ratio\": 0.0175,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"True\"\n      ],\n      \"sample_fk_only_values\": [\n        \"False\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.500|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.475\n  },\n  {\n    \"from_table\": \"gates\",\n    \"from_column\": \"has_jetbridge\",\n    \"to_table\": \"baggage_handling\",\n    \"to_column\": \"claim_filed\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.5,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0115,\n      \"pk_unique_ratio\": 0.0175,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"True\"\n      ],\n      \"sample_fk_only_values\": [\n        \"False\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.500|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.475\n  },\n  {\n    \"from_table\": \"gates\",\n    \"from_column\": \"has_jetbridge\",\n    \"to_table\": \"delay_records\",\n    \"to_column\": \"passenger_compensation\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.5,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.0357,\n      \"pk_unique_ratio\": 0.0175,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"True\"\n      ],\n      \"sample_fk_only_values\": [\n        \"False\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.500|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.475\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"mechanic_id\",\n    \"to_table\": \"airport_employees\",\n    \"to_column\": \"emp_id\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.0571,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.9333,\n      \"pk_unique_ratio\": 0.0889,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"EMP022\",\n        \"EMP020\",\n        \"EMP019\",\n        \"EMP021\"\n      ],\n      \"sample_fk_only_values\": [\n        \"EMP064\",\n        \"EMP032\",\n        \"EMP060\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.057|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.455\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"supervisor_id\",\n    \"to_table\": \"airport_employees\",\n    \"to_column\": \"emp_id\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.0286,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.9333,\n      \"pk_unique_ratio\": 0.0444,\n      \"name_similarity\": 0.2333\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"EMP018\",\n        \"EMP017\"\n      ],\n      \"sample_fk_only_values\": [\n        \"EMP064\",\n        \"EMP032\",\n        \"EMP060\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.451\n  },\n  {\n    \"from_table\": \"delay_records\",\n    \"from_column\": \"flt_no\",\n    \"to_table\": \"passengers\",\n    \"to_column\": \"flight_num\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.7667,\n      \"containment_fk_in_pk\": 0.902,\n      \"fk_unique_ratio\": 0.9107,\n      \"pk_unique_ratio\": 0.44,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"OZ605\",\n        \"KE456\",\n        \"TW804\",\n        \"OZ201\",\n        \"TW602\"\n      ],\n      \"sample_fk_only_values\": [\n        \"7C619\",\n        \"ZE614\",\n        \"OZ311\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.767)\",\n    \"algorithm_confidence\": 0.431\n  },\n  {\n    \"from_table\": \"aircraft_maintenance\",\n    \"from_column\": \"airline\",\n    \"to_table\": \"airlines\",\n    \"to_column\": \"iata_code\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.2,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.8571,\n      \"pk_unique_ratio\": 0.1333,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"OZ\",\n        \"LJ\",\n        \"ZE\",\n        \"TW\",\n        \"7C\"\n      ],\n      \"sample_fk_only_values\": [\n        \"4H\",\n        \"AA\",\n        \"UA\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.200|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.43\n  },\n  {\n    \"from_table\": \"delay_records\",\n    \"from_column\": \"carrier\",\n    \"to_table\": \"airlines\",\n    \"to_column\": \"icao_code\",\n    \"metrics\": {\n      \"jaccard_similarity\": 0.2,\n      \"containment_fk_in_pk\": 1.0,\n      \"fk_unique_ratio\": 0.8571,\n      \"pk_unique_ratio\": 0.1071,\n      \"name_similarity\": 0.0\n    },\n    \"evidence\": {\n      \"same_normalized_name\": false,\n      \"same_prefix_group\": false,\n      \"sample_overlapping_values\": [\n        \"KAL\",\n        \"JJA\",\n        \"JNA\",\n        \"TWB\",\n        \"AAR\"\n      ],\n      \"sample_fk_only_values\": [\n        \"UAE\",\n        \"HVN\",\n        \"AAL\"\n      ]\n    },\n    \"detection_method\": \"value_overlap(jaccard:0.200|containment_b_in_a:1.000)\",\n    \"algorithm_confidence\": 0.43\n  }\n]\n\n## BRIDGE TABLE ANALYSIS (v7.0 - Code Mapping Tables)\nThe following tables contain 1:1 mappings between different code systems.\nThese can connect tables that don't share direct value overlap.\n\n[\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"emp_code\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"11_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"ICN-OPS-001\"\n      ],\n      [\n        \"EMP002\",\n        \"ICN-OPS-002\"\n      ],\n      [\n        \"EMP003\",\n        \"ICN-OPS-003\"\n      ],\n      [\n        \"EMP004\",\n        \"ICN-OPS-004\"\n      ],\n      [\n        \"EMP005\",\n        \"ICN-OPS-005\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"name_first\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"2_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"\\ubbfc\\uc218\"\n      ],\n      [\n        \"EMP002\",\n        \"\\uc601\\ud76c\"\n      ],\n      [\n        \"EMP003\",\n        \"\\uc900\\ud638\"\n      ],\n      [\n        \"EMP004\",\n        \"\\uc218\\uc9c4\"\n      ],\n      [\n        \"EMP005\",\n        \"\\uc9c0\\ud638\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"name_last\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"1_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"\\uae40\"\n      ],\n      [\n        \"EMP002\",\n        \"\\uc774\"\n      ],\n      [\n        \"EMP003\",\n        \"\\ubc15\"\n      ],\n      [\n        \"EMP004\",\n        \"\\ucd5c\"\n      ],\n      [\n        \"EMP005\",\n        \"\\uc548\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"hire_date\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"10_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"2015-03-15\"\n      ],\n      [\n        \"EMP002\",\n        \"2017-06-20\"\n      ],\n      [\n        \"EMP003\",\n        \"2019-01-10\"\n      ],\n      [\n        \"EMP004\",\n        \"2020-04-15\"\n      ],\n      [\n        \"EMP005\",\n        \"2021-07-01\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"salary_grade\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"G12\"\n      ],\n      [\n        \"EMP002\",\n        \"G10\"\n      ],\n      [\n        \"EMP003\",\n        \"G06\"\n      ],\n      [\n        \"EMP004\",\n        \"G06\"\n      ],\n      [\n        \"EMP005\",\n        \"G05\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"supervisor_id\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"EMP001\"\n      ],\n      [\n        \"EMP002\",\n        \"EMP002\"\n      ],\n      [\n        \"EMP003\",\n        \"EMP002\"\n      ],\n      [\n        \"EMP004\",\n        \"EMP002\"\n      ],\n      [\n        \"EMP005\",\n        \"EMP002\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"badge_access_level\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"LEVEL3\"\n      ],\n      [\n        \"EMP002\",\n        \"LEVEL2\"\n      ],\n      [\n        \"EMP003\",\n        \"LEVEL2\"\n      ],\n      [\n        \"EMP004\",\n        \"LEVEL2\"\n      ],\n      [\n        \"EMP005\",\n        \"LEVEL2\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_id\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP002\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP003\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP004\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP005\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"column_b\": \"name_first\",\n    \"pattern_a\": \"11_WITH_SEPARATOR\",\n    \"pattern_b\": \"2_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"ICN-OPS-001\",\n        \"\\ubbfc\\uc218\"\n      ],\n      [\n        \"ICN-OPS-002\",\n        \"\\uc601\\ud76c\"\n      ],\n      [\n        \"ICN-OPS-003\",\n        \"\\uc900\\ud638\"\n      ],\n      [\n        \"ICN-OPS-004\",\n        \"\\uc218\\uc9c4\"\n      ],\n      [\n        \"ICN-OPS-005\",\n        \"\\uc9c0\\ud638\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"column_b\": \"name_last\",\n    \"pattern_a\": \"11_WITH_SEPARATOR\",\n    \"pattern_b\": \"1_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"ICN-OPS-001\",\n        \"\\uae40\"\n      ],\n      [\n        \"ICN-OPS-002\",\n        \"\\uc774\"\n      ],\n      [\n        \"ICN-OPS-003\",\n        \"\\ubc15\"\n      ],\n      [\n        \"ICN-OPS-004\",\n        \"\\ucd5c\"\n      ],\n      [\n        \"ICN-OPS-005\",\n        \"\\uc548\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"column_b\": \"hire_date\",\n    \"pattern_a\": \"11_WITH_SEPARATOR\",\n    \"pattern_b\": \"10_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"ICN-OPS-001\",\n        \"2015-03-15\"\n      ],\n      [\n        \"ICN-OPS-002\",\n        \"2017-06-20\"\n      ],\n      [\n        \"ICN-OPS-003\",\n        \"2019-01-10\"\n      ],\n      [\n        \"ICN-OPS-004\",\n        \"2020-04-15\"\n      ],\n      [\n        \"ICN-OPS-005\",\n        \"2021-07-01\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"column_b\": \"salary_grade\",\n    \"pattern_a\": \"11_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"ICN-OPS-001\",\n        \"G12\"\n      ],\n      [\n        \"ICN-OPS-002\",\n        \"G10\"\n      ],\n      [\n        \"ICN-OPS-003\",\n        \"G06\"\n      ],\n      [\n        \"ICN-OPS-004\",\n        \"G06\"\n      ],\n      [\n        \"ICN-OPS-005\",\n        \"G05\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"column_b\": \"supervisor_id\",\n    \"pattern_a\": \"11_WITH_SEPARATOR\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"ICN-OPS-001\",\n        \"EMP001\"\n      ],\n      [\n        \"ICN-OPS-002\",\n        \"EMP002\"\n      ],\n      [\n        \"ICN-OPS-003\",\n        \"EMP002\"\n      ],\n      [\n        \"ICN-OPS-004\",\n        \"EMP002\"\n      ],\n      [\n        \"ICN-OPS-005\",\n        \"EMP002\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"column_b\": \"badge_access_level\",\n    \"pattern_a\": \"11_WITH_SEPARATOR\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"ICN-OPS-001\",\n        \"LEVEL3\"\n      ],\n      [\n        \"ICN-OPS-002\",\n        \"LEVEL2\"\n      ],\n      [\n        \"ICN-OPS-003\",\n        \"LEVEL2\"\n      ],\n      [\n        \"ICN-OPS-004\",\n        \"LEVEL2\"\n      ],\n      [\n        \"ICN-OPS-005\",\n        \"LEVEL2\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"emp_code\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"11_WITH_SEPARATOR\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"ICN-OPS-001\",\n        \"ACTIVE\"\n      ],\n      [\n        \"ICN-OPS-002\",\n        \"ACTIVE\"\n      ],\n      [\n        \"ICN-OPS-003\",\n        \"ACTIVE\"\n      ],\n      [\n        \"ICN-OPS-004\",\n        \"ACTIVE\"\n      ],\n      [\n        \"ICN-OPS-005\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"name_last\",\n    \"column_b\": \"salary_grade\",\n    \"pattern_a\": \"1_MIXED_CASE\",\n    \"pattern_b\": \"3_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"\\uae40\",\n        \"G12\"\n      ],\n      [\n        \"\\uc774\",\n        \"G10\"\n      ],\n      [\n        \"\\ubc15\",\n        \"G06\"\n      ],\n      [\n        \"\\ucd5c\",\n        \"G06\"\n      ],\n      [\n        \"\\uc548\",\n        \"G05\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"name_last\",\n    \"column_b\": \"supervisor_id\",\n    \"pattern_a\": \"1_MIXED_CASE\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"\\uae40\",\n        \"EMP001\"\n      ],\n      [\n        \"\\uc774\",\n        \"EMP002\"\n      ],\n      [\n        \"\\ubc15\",\n        \"EMP002\"\n      ],\n      [\n        \"\\ucd5c\",\n        \"EMP002\"\n      ],\n      [\n        \"\\uc548\",\n        \"EMP002\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"name_last\",\n    \"column_b\": \"badge_access_level\",\n    \"pattern_a\": \"1_MIXED_CASE\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"\\uae40\",\n        \"LEVEL3\"\n      ],\n      [\n        \"\\uc774\",\n        \"LEVEL2\"\n      ],\n      [\n        \"\\ubc15\",\n        \"LEVEL2\"\n      ],\n      [\n        \"\\ucd5c\",\n        \"LEVEL2\"\n      ],\n      [\n        \"\\uc548\",\n        \"LEVEL2\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"name_last\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"1_MIXED_CASE\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"\\uae40\",\n        \"ACTIVE\"\n      ],\n      [\n        \"\\uc774\",\n        \"ACTIVE\"\n      ],\n      [\n        \"\\ubc15\",\n        \"ACTIVE\"\n      ],\n      [\n        \"\\ucd5c\",\n        \"ACTIVE\"\n      ],\n      [\n        \"\\uc548\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"hire_date\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2015-03-15\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2017-06-20\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2019-01-10\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2020-04-15\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2021-07-01\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"supervisor_id\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"EMP001\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP002\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP011\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP012\",\n        \"ACTIVE\"\n      ],\n      [\n        \"EMP017\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.5249999999999999\n  },\n  {\n    \"table\": \"airport_employees\",\n    \"column_a\": \"badge_access_level\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"LEVEL3\",\n        \"ACTIVE\"\n      ],\n      [\n        \"LEVEL2\",\n        \"ACTIVE\"\n      ],\n      [\n        \"LEVEL4\",\n        \"ACTIVE\"\n      ],\n      [\n        \"LEVEL1\",\n        \"ACTIVE\"\n      ],\n      [\n        \"LEVEL5\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.175\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"flt_number\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"5_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"KE123\"\n      ],\n      [\n        \"BT2401150002\",\n        \"KE123\"\n      ],\n      [\n        \"BT2401150003\",\n        \"KE123\"\n      ],\n      [\n        \"BT2401150004\",\n        \"KE123\"\n      ],\n      [\n        \"BT2401150005\",\n        \"KE123\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"origin\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"ICN\"\n      ],\n      [\n        \"BT2401150002\",\n        \"ICN\"\n      ],\n      [\n        \"BT2401150003\",\n        \"ICN\"\n      ],\n      [\n        \"BT2401150004\",\n        \"ICN\"\n      ],\n      [\n        \"BT2401150005\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"destination\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"LAX\"\n      ],\n      [\n        \"BT2401150002\",\n        \"LAX\"\n      ],\n      [\n        \"BT2401150003\",\n        \"LAX\"\n      ],\n      [\n        \"BT2401150004\",\n        \"LAX\"\n      ],\n      [\n        \"BT2401150005\",\n        \"LAX\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"bag_type\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"CHECKED\"\n      ],\n      [\n        \"BT2401150002\",\n        \"CHECKED\"\n      ],\n      [\n        \"BT2401150003\",\n        \"CHECKED\"\n      ],\n      [\n        \"BT2401150004\",\n        \"CHECKED\"\n      ],\n      [\n        \"BT2401150005\",\n        \"CHECKED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"check_in_timestamp\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"2024-01-15 06:30:15\"\n      ],\n      [\n        \"BT2401150002\",\n        \"2024-01-15 06:30:22\"\n      ],\n      [\n        \"BT2401150003\",\n        \"2024-01-15 06:45:10\"\n      ],\n      [\n        \"BT2401150004\",\n        \"2024-01-15 07:00:05\"\n      ],\n      [\n        \"BT2401150005\",\n        \"2024-01-15 06:55:30\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"belt_assigned\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"3_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"B12\"\n      ],\n      [\n        \"BT2401150002\",\n        \"B12\"\n      ],\n      [\n        \"BT2401150003\",\n        \"B12\"\n      ],\n      [\n        \"BT2401150004\",\n        \"B12\"\n      ],\n      [\n        \"BT2401150005\",\n        \"B12\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"scan_status\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"SCANNED\"\n      ],\n      [\n        \"BT2401150002\",\n        \"SCANNED\"\n      ],\n      [\n        \"BT2401150003\",\n        \"SCANNED\"\n      ],\n      [\n        \"BT2401150004\",\n        \"SCANNED\"\n      ],\n      [\n        \"BT2401150005\",\n        \"SCANNED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"current_location\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"8_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"BT2401150002\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"BT2401150003\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"BT2401150004\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"BT2401150005\",\n        \"AIRCRAFT\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"bag_tag_id\",\n    \"column_b\": \"delivery_status\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"9_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BT2401150001\",\n        \"DELIVERED\"\n      ],\n      [\n        \"BT2401150002\",\n        \"DELIVERED\"\n      ],\n      [\n        \"BT2401150003\",\n        \"DELIVERED\"\n      ],\n      [\n        \"BT2401150004\",\n        \"DELIVERED\"\n      ],\n      [\n        \"BT2401150005\",\n        \"DELIVERED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"column_b\": \"origin\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"ICN\"\n      ],\n      [\n        \"OZ201\",\n        \"ICN\"\n      ],\n      [\n        \"KE456\",\n        \"ICN\"\n      ],\n      [\n        \"7C101\",\n        \"ICN\"\n      ],\n      [\n        \"LJ302\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"column_b\": \"destination\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"LAX\"\n      ],\n      [\n        \"OZ201\",\n        \"NRT\"\n      ],\n      [\n        \"KE456\",\n        \"SIN\"\n      ],\n      [\n        \"7C101\",\n        \"CJU\"\n      ],\n      [\n        \"LJ302\",\n        \"PUS\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"column_b\": \"bag_type\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"CHECKED\"\n      ],\n      [\n        \"OZ201\",\n        \"CHECKED\"\n      ],\n      [\n        \"KE456\",\n        \"CHECKED\"\n      ],\n      [\n        \"7C101\",\n        \"CHECKED\"\n      ],\n      [\n        \"LJ302\",\n        \"CHECKED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"column_b\": \"belt_assigned\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"3_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"B12\"\n      ],\n      [\n        \"OZ201\",\n        \"B07\"\n      ],\n      [\n        \"KE456\",\n        \"B15\"\n      ],\n      [\n        \"7C101\",\n        \"C03\"\n      ],\n      [\n        \"LJ302\",\n        \"C08\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"column_b\": \"scan_status\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"SCANNED\"\n      ],\n      [\n        \"OZ201\",\n        \"SCANNED\"\n      ],\n      [\n        \"KE456\",\n        \"SCANNED\"\n      ],\n      [\n        \"7C101\",\n        \"SCANNED\"\n      ],\n      [\n        \"LJ302\",\n        \"SCANNED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"column_b\": \"current_location\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"8_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"OZ201\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"KE456\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"7C101\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"LJ302\",\n        \"AIRCRAFT\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"column_b\": \"delivery_status\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"9_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"DELIVERED\"\n      ],\n      [\n        \"OZ201\",\n        \"DELIVERED\"\n      ],\n      [\n        \"KE456\",\n        \"DELIVERED\"\n      ],\n      [\n        \"7C101\",\n        \"DELIVERED\"\n      ],\n      [\n        \"LJ302\",\n        \"DELIVERED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"destination\",\n    \"column_b\": \"bag_type\",\n    \"pattern_a\": \"3_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"LAX\",\n        \"CHECKED\"\n      ],\n      [\n        \"NRT\",\n        \"CHECKED\"\n      ],\n      [\n        \"SIN\",\n        \"CHECKED\"\n      ],\n      [\n        \"CJU\",\n        \"CHECKED\"\n      ],\n      [\n        \"PUS\",\n        \"CHECKED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"check_in_timestamp\",\n    \"column_b\": \"belt_assigned\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 06:30:15\",\n        \"B12\"\n      ],\n      [\n        \"2024-01-15 06:30:22\",\n        \"B12\"\n      ],\n      [\n        \"2024-01-15 06:45:10\",\n        \"B12\"\n      ],\n      [\n        \"2024-01-15 07:00:05\",\n        \"B12\"\n      ],\n      [\n        \"2024-01-15 06:55:30\",\n        \"B12\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"check_in_timestamp\",\n    \"column_b\": \"scan_status\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 06:30:15\",\n        \"SCANNED\"\n      ],\n      [\n        \"2024-01-15 06:30:22\",\n        \"SCANNED\"\n      ],\n      [\n        \"2024-01-15 06:45:10\",\n        \"SCANNED\"\n      ],\n      [\n        \"2024-01-15 07:00:05\",\n        \"SCANNED\"\n      ],\n      [\n        \"2024-01-15 06:55:30\",\n        \"SCANNED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"check_in_timestamp\",\n    \"column_b\": \"current_location\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"8_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 06:30:15\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"2024-01-15 06:30:22\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"2024-01-15 06:45:10\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"2024-01-15 07:00:05\",\n        \"AIRCRAFT\"\n      ],\n      [\n        \"2024-01-15 06:55:30\",\n        \"AIRCRAFT\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"check_in_timestamp\",\n    \"column_b\": \"delivery_status\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"9_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 06:30:15\",\n        \"DELIVERED\"\n      ],\n      [\n        \"2024-01-15 06:30:22\",\n        \"DELIVERED\"\n      ],\n      [\n        \"2024-01-15 06:45:10\",\n        \"DELIVERED\"\n      ],\n      [\n        \"2024-01-15 07:00:05\",\n        \"DELIVERED\"\n      ],\n      [\n        \"2024-01-15 06:55:30\",\n        \"DELIVERED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"baggage_handling\",\n    \"column_a\": \"belt_assigned\",\n    \"column_b\": \"scan_status\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"B12\",\n        \"SCANNED\"\n      ],\n      [\n        \"B07\",\n        \"SCANNED\"\n      ],\n      [\n        \"B15\",\n        \"SCANNED\"\n      ],\n      [\n        \"C03\",\n        \"SCANNED\"\n      ],\n      [\n        \"C08\",\n        \"SCANNED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"airline_id\",\n    \"column_b\": \"iata_code\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"2_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"AIR001\",\n        \"KE\"\n      ],\n      [\n        \"AIR002\",\n        \"OZ\"\n      ],\n      [\n        \"AIR003\",\n        \"7C\"\n      ],\n      [\n        \"AIR004\",\n        \"LJ\"\n      ],\n      [\n        \"AIR005\",\n        \"TW\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"airline_id\",\n    \"column_b\": \"icao_code\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"AIR001\",\n        \"KAL\"\n      ],\n      [\n        \"AIR002\",\n        \"AAR\"\n      ],\n      [\n        \"AIR003\",\n        \"JJA\"\n      ],\n      [\n        \"AIR004\",\n        \"JNA\"\n      ],\n      [\n        \"AIR005\",\n        \"TWB\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"airline_id\",\n    \"column_b\": \"country\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"AIR001\",\n        \"KOR\"\n      ],\n      [\n        \"AIR002\",\n        \"KOR\"\n      ],\n      [\n        \"AIR003\",\n        \"KOR\"\n      ],\n      [\n        \"AIR004\",\n        \"KOR\"\n      ],\n      [\n        \"AIR005\",\n        \"KOR\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"airline_id\",\n    \"column_b\": \"hub_airport\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"AIR001\",\n        \"ICN\"\n      ],\n      [\n        \"AIR002\",\n        \"ICN\"\n      ],\n      [\n        \"AIR003\",\n        \"ICN\"\n      ],\n      [\n        \"AIR004\",\n        \"ICN\"\n      ],\n      [\n        \"AIR005\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"airline_id\",\n    \"column_b\": \"founded_year\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"4_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"AIR001\",\n        \"1969\"\n      ],\n      [\n        \"AIR002\",\n        \"1988\"\n      ],\n      [\n        \"AIR003\",\n        \"2005\"\n      ],\n      [\n        \"AIR004\",\n        \"2008\"\n      ],\n      [\n        \"AIR005\",\n        \"2010\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"iata_code\",\n    \"column_b\": \"icao_code\",\n    \"pattern_a\": \"2_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE\",\n        \"KAL\"\n      ],\n      [\n        \"OZ\",\n        \"AAR\"\n      ],\n      [\n        \"7C\",\n        \"JJA\"\n      ],\n      [\n        \"LJ\",\n        \"JNA\"\n      ],\n      [\n        \"TW\",\n        \"TWB\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"iata_code\",\n    \"column_b\": \"country\",\n    \"pattern_a\": \"2_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE\",\n        \"KOR\"\n      ],\n      [\n        \"OZ\",\n        \"KOR\"\n      ],\n      [\n        \"7C\",\n        \"KOR\"\n      ],\n      [\n        \"LJ\",\n        \"KOR\"\n      ],\n      [\n        \"TW\",\n        \"KOR\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"iata_code\",\n    \"column_b\": \"hub_airport\",\n    \"pattern_a\": \"2_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE\",\n        \"ICN\"\n      ],\n      [\n        \"OZ\",\n        \"ICN\"\n      ],\n      [\n        \"7C\",\n        \"ICN\"\n      ],\n      [\n        \"LJ\",\n        \"ICN\"\n      ],\n      [\n        \"TW\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"iata_code\",\n    \"column_b\": \"founded_year\",\n    \"pattern_a\": \"2_UPPER\",\n    \"pattern_b\": \"4_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"KE\",\n        \"1969\"\n      ],\n      [\n        \"OZ\",\n        \"1988\"\n      ],\n      [\n        \"7C\",\n        \"2005\"\n      ],\n      [\n        \"LJ\",\n        \"2008\"\n      ],\n      [\n        \"TW\",\n        \"2010\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"icao_code\",\n    \"column_b\": \"country\",\n    \"pattern_a\": \"3_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KAL\",\n        \"KOR\"\n      ],\n      [\n        \"AAR\",\n        \"KOR\"\n      ],\n      [\n        \"JJA\",\n        \"KOR\"\n      ],\n      [\n        \"JNA\",\n        \"KOR\"\n      ],\n      [\n        \"TWB\",\n        \"KOR\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"icao_code\",\n    \"column_b\": \"hub_airport\",\n    \"pattern_a\": \"3_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KAL\",\n        \"ICN\"\n      ],\n      [\n        \"AAR\",\n        \"ICN\"\n      ],\n      [\n        \"JJA\",\n        \"ICN\"\n      ],\n      [\n        \"JNA\",\n        \"ICN\"\n      ],\n      [\n        \"TWB\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"airlines\",\n    \"column_a\": \"icao_code\",\n    \"column_b\": \"founded_year\",\n    \"pattern_a\": \"3_UPPER\",\n    \"pattern_b\": \"4_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"KAL\",\n        \"1969\"\n      ],\n      [\n        \"AAR\",\n        \"1988\"\n      ],\n      [\n        \"JJA\",\n        \"2005\"\n      ],\n      [\n        \"JNA\",\n        \"2008\"\n      ],\n      [\n        \"TWB\",\n        \"2010\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"maintenance_id\",\n    \"column_b\": \"aircraft_reg\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"MNT001\",\n        \"HL7461\"\n      ],\n      [\n        \"MNT002\",\n        \"HL7462\"\n      ],\n      [\n        \"MNT003\",\n        \"HL7625\"\n      ],\n      [\n        \"MNT004\",\n        \"HL7626\"\n      ],\n      [\n        \"MNT005\",\n        \"HL7530\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"maintenance_id\",\n    \"column_b\": \"airline\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"2_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"MNT001\",\n        \"KE\"\n      ],\n      [\n        \"MNT002\",\n        \"KE\"\n      ],\n      [\n        \"MNT003\",\n        \"KE\"\n      ],\n      [\n        \"MNT004\",\n        \"KE\"\n      ],\n      [\n        \"MNT005\",\n        \"KE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"maintenance_id\",\n    \"column_b\": \"mechanic_id\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"MNT001\",\n        \"EMP019\"\n      ],\n      [\n        \"MNT002\",\n        \"EMP020\"\n      ],\n      [\n        \"MNT003\",\n        \"EMP019\"\n      ],\n      [\n        \"MNT004\",\n        \"EMP021\"\n      ],\n      [\n        \"MNT005\",\n        \"EMP020\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"maintenance_id\",\n    \"column_b\": \"supervisor_id\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"MNT001\",\n        \"EMP018\"\n      ],\n      [\n        \"MNT002\",\n        \"EMP018\"\n      ],\n      [\n        \"MNT003\",\n        \"EMP018\"\n      ],\n      [\n        \"MNT004\",\n        \"EMP018\"\n      ],\n      [\n        \"MNT005\",\n        \"EMP018\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"maintenance_id\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"9_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"MNT001\",\n        \"COMPLETED\"\n      ],\n      [\n        \"MNT002\",\n        \"COMPLETED\"\n      ],\n      [\n        \"MNT003\",\n        \"COMPLETED\"\n      ],\n      [\n        \"MNT004\",\n        \"COMPLETED\"\n      ],\n      [\n        \"MNT005\",\n        \"COMPLETED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"aircraft_reg\",\n    \"column_b\": \"airline\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"2_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"KE\"\n      ],\n      [\n        \"HL7462\",\n        \"KE\"\n      ],\n      [\n        \"HL7625\",\n        \"KE\"\n      ],\n      [\n        \"HL7626\",\n        \"KE\"\n      ],\n      [\n        \"HL7530\",\n        \"KE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"aircraft_reg\",\n    \"column_b\": \"mechanic_id\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"EMP019\"\n      ],\n      [\n        \"HL7462\",\n        \"EMP020\"\n      ],\n      [\n        \"HL7625\",\n        \"EMP019\"\n      ],\n      [\n        \"HL7626\",\n        \"EMP021\"\n      ],\n      [\n        \"HL7530\",\n        \"EMP020\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"aircraft_reg\",\n    \"column_b\": \"supervisor_id\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"EMP018\"\n      ],\n      [\n        \"HL7462\",\n        \"EMP018\"\n      ],\n      [\n        \"HL7625\",\n        \"EMP018\"\n      ],\n      [\n        \"HL7626\",\n        \"EMP018\"\n      ],\n      [\n        \"HL7530\",\n        \"EMP018\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_maintenance\",\n    \"column_a\": \"aircraft_reg\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"9_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"COMPLETED\"\n      ],\n      [\n        \"HL7462\",\n        \"COMPLETED\"\n      ],\n      [\n        \"HL7625\",\n        \"COMPLETED\"\n      ],\n      [\n        \"HL7626\",\n        \"COMPLETED\"\n      ],\n      [\n        \"HL7530\",\n        \"COMPLETED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"record_id\",\n    \"column_b\": \"flt_no\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"5_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"DLY001\",\n        \"KE123\"\n      ],\n      [\n        \"DLY002\",\n        \"OZ201\"\n      ],\n      [\n        \"DLY003\",\n        \"KE456\"\n      ],\n      [\n        \"DLY004\",\n        \"7C101\"\n      ],\n      [\n        \"DLY005\",\n        \"LJ302\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"record_id\",\n    \"column_b\": \"carrier\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"DLY001\",\n        \"KAL\"\n      ],\n      [\n        \"DLY002\",\n        \"AAR\"\n      ],\n      [\n        \"DLY003\",\n        \"KAL\"\n      ],\n      [\n        \"DLY004\",\n        \"JJA\"\n      ],\n      [\n        \"DLY005\",\n        \"JNA\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"record_id\",\n    \"column_b\": \"delay_code\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"2_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"DLY001\",\n        \"81\"\n      ],\n      [\n        \"DLY002\",\n        \"63\"\n      ],\n      [\n        \"DLY003\",\n        \"11\"\n      ],\n      [\n        \"DLY004\",\n        \"81\"\n      ],\n      [\n        \"DLY005\",\n        \"11\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"record_id\",\n    \"column_b\": \"weather_condition\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"5_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"DLY001\",\n        \"CLEAR\"\n      ],\n      [\n        \"DLY002\",\n        \"CLEAR\"\n      ],\n      [\n        \"DLY003\",\n        \"CLEAR\"\n      ],\n      [\n        \"DLY004\",\n        \"CLEAR\"\n      ],\n      [\n        \"DLY005\",\n        \"CLEAR\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"record_id\",\n    \"column_b\": \"report_time\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"DLY001\",\n        \"2024-01-15 08:32:00\"\n      ],\n      [\n        \"DLY002\",\n        \"2024-01-15 09:02:00\"\n      ],\n      [\n        \"DLY003\",\n        \"2024-01-15 10:18:00\"\n      ],\n      [\n        \"DLY004\",\n        \"2024-01-15 07:02:00\"\n      ],\n      [\n        \"DLY005\",\n        \"2024-01-15 11:32:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"record_id\",\n    \"column_b\": \"resolution_time\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"DLY001\",\n        \"2024-01-15 08:45:00\"\n      ],\n      [\n        \"DLY002\",\n        \"2024-01-15 09:15:00\"\n      ],\n      [\n        \"DLY003\",\n        \"2024-01-15 10:20:00\"\n      ],\n      [\n        \"DLY004\",\n        \"2024-01-15 07:05:00\"\n      ],\n      [\n        \"DLY005\",\n        \"2024-01-15 11:35:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"flt_no\",\n    \"column_b\": \"carrier\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"KAL\"\n      ],\n      [\n        \"OZ201\",\n        \"AAR\"\n      ],\n      [\n        \"KE456\",\n        \"KAL\"\n      ],\n      [\n        \"7C101\",\n        \"JJA\"\n      ],\n      [\n        \"LJ302\",\n        \"JNA\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"flt_no\",\n    \"column_b\": \"delay_code\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"2_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"81\"\n      ],\n      [\n        \"OZ201\",\n        \"63\"\n      ],\n      [\n        \"KE456\",\n        \"11\"\n      ],\n      [\n        \"7C101\",\n        \"81\"\n      ],\n      [\n        \"LJ302\",\n        \"11\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"flt_no\",\n    \"column_b\": \"weather_condition\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"5_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"CLEAR\"\n      ],\n      [\n        \"OZ201\",\n        \"CLEAR\"\n      ],\n      [\n        \"KE456\",\n        \"CLEAR\"\n      ],\n      [\n        \"7C101\",\n        \"CLEAR\"\n      ],\n      [\n        \"LJ302\",\n        \"CLEAR\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"flt_no\",\n    \"column_b\": \"report_time\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"2024-01-15 08:32:00\"\n      ],\n      [\n        \"OZ201\",\n        \"2024-01-15 09:02:00\"\n      ],\n      [\n        \"KE456\",\n        \"2024-01-15 10:18:00\"\n      ],\n      [\n        \"7C101\",\n        \"2024-01-15 07:02:00\"\n      ],\n      [\n        \"LJ302\",\n        \"2024-01-15 11:32:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"flt_no\",\n    \"column_b\": \"resolution_time\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"2024-01-15 08:45:00\"\n      ],\n      [\n        \"OZ201\",\n        \"2024-01-15 09:15:00\"\n      ],\n      [\n        \"KE456\",\n        \"2024-01-15 10:20:00\"\n      ],\n      [\n        \"7C101\",\n        \"2024-01-15 07:05:00\"\n      ],\n      [\n        \"LJ302\",\n        \"2024-01-15 11:35:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"delay_code\",\n    \"column_b\": \"weather_condition\",\n    \"pattern_a\": \"2_NUMERIC\",\n    \"pattern_b\": \"5_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"81\",\n        \"CLEAR\"\n      ],\n      [\n        \"63\",\n        \"CLEAR\"\n      ],\n      [\n        \"11\",\n        \"CLEAR\"\n      ],\n      [\n        \"72\",\n        \"CLEAR\"\n      ],\n      [\n        \"41\",\n        \"CLEAR\"\n      ]\n    ],\n    \"confidence\": 0.35\n  },\n  {\n    \"table\": \"delay_records\",\n    \"column_a\": \"report_time\",\n    \"column_b\": \"resolution_time\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 08:32:00\",\n        \"2024-01-15 08:45:00\"\n      ],\n      [\n        \"2024-01-15 09:02:00\",\n        \"2024-01-15 09:15:00\"\n      ],\n      [\n        \"2024-01-15 10:18:00\",\n        \"2024-01-15 10:20:00\"\n      ],\n      [\n        \"2024-01-15 07:02:00\",\n        \"2024-01-15 07:05:00\"\n      ],\n      [\n        \"2024-01-15 11:32:00\",\n        \"2024-01-15 11:35:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"gate_code\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"3_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"A01\"\n      ],\n      [\n        \"G002\",\n        \"A02\"\n      ],\n      [\n        \"G003\",\n        \"A03\"\n      ],\n      [\n        \"G004\",\n        \"A04\"\n      ],\n      [\n        \"G005\",\n        \"A05\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"terminal\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"2_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"T1\"\n      ],\n      [\n        \"G002\",\n        \"T1\"\n      ],\n      [\n        \"G003\",\n        \"T1\"\n      ],\n      [\n        \"G004\",\n        \"T1\"\n      ],\n      [\n        \"G005\",\n        \"T1\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"concourse\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"1_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"A\"\n      ],\n      [\n        \"G002\",\n        \"A\"\n      ],\n      [\n        \"G003\",\n        \"A\"\n      ],\n      [\n        \"G004\",\n        \"A\"\n      ],\n      [\n        \"G005\",\n        \"A\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"boarding_capacity\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"400\"\n      ],\n      [\n        \"G002\",\n        \"400\"\n      ],\n      [\n        \"G003\",\n        \"400\"\n      ],\n      [\n        \"G004\",\n        \"400\"\n      ],\n      [\n        \"G005\",\n        \"400\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"ACTIVE\"\n      ],\n      [\n        \"G002\",\n        \"ACTIVE\"\n      ],\n      [\n        \"G003\",\n        \"ACTIVE\"\n      ],\n      [\n        \"G004\",\n        \"ACTIVE\"\n      ],\n      [\n        \"G005\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"assigned_airline\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"2_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"KE\"\n      ],\n      [\n        \"G002\",\n        \"KE\"\n      ],\n      [\n        \"G003\",\n        \"KE\"\n      ],\n      [\n        \"G004\",\n        \"KE\"\n      ],\n      [\n        \"G005\",\n        \"KE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"latitude\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"7_SPECIAL\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"37.4601\"\n      ],\n      [\n        \"G002\",\n        \"37.4602\"\n      ],\n      [\n        \"G003\",\n        \"37.4603\"\n      ],\n      [\n        \"G004\",\n        \"37.4604\"\n      ],\n      [\n        \"G005\",\n        \"37.4605\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_id\",\n    \"column_b\": \"longitude\",\n    \"pattern_a\": \"4_ALNUM_UPPER\",\n    \"pattern_b\": \"8_SPECIAL\",\n    \"sample_mappings\": [\n      [\n        \"G001\",\n        \"126.4407\"\n      ],\n      [\n        \"G002\",\n        \"126.4408\"\n      ],\n      [\n        \"G003\",\n        \"126.4409\"\n      ],\n      [\n        \"G004\",\n        \"126.441\"\n      ],\n      [\n        \"G005\",\n        \"126.4411\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_code\",\n    \"column_b\": \"terminal\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"2_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"A01\",\n        \"T1\"\n      ],\n      [\n        \"A02\",\n        \"T1\"\n      ],\n      [\n        \"A03\",\n        \"T1\"\n      ],\n      [\n        \"A04\",\n        \"T1\"\n      ],\n      [\n        \"A05\",\n        \"T1\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_code\",\n    \"column_b\": \"concourse\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"1_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"A01\",\n        \"A\"\n      ],\n      [\n        \"A02\",\n        \"A\"\n      ],\n      [\n        \"A03\",\n        \"A\"\n      ],\n      [\n        \"A04\",\n        \"A\"\n      ],\n      [\n        \"A05\",\n        \"A\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_code\",\n    \"column_b\": \"boarding_capacity\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"A01\",\n        \"400\"\n      ],\n      [\n        \"A02\",\n        \"400\"\n      ],\n      [\n        \"A03\",\n        \"400\"\n      ],\n      [\n        \"A04\",\n        \"400\"\n      ],\n      [\n        \"A05\",\n        \"400\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_code\",\n    \"column_b\": \"status\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"A01\",\n        \"ACTIVE\"\n      ],\n      [\n        \"A02\",\n        \"ACTIVE\"\n      ],\n      [\n        \"A03\",\n        \"ACTIVE\"\n      ],\n      [\n        \"A04\",\n        \"ACTIVE\"\n      ],\n      [\n        \"A05\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_code\",\n    \"column_b\": \"assigned_airline\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"2_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"A01\",\n        \"KE\"\n      ],\n      [\n        \"A02\",\n        \"KE\"\n      ],\n      [\n        \"A03\",\n        \"KE\"\n      ],\n      [\n        \"A04\",\n        \"KE\"\n      ],\n      [\n        \"A05\",\n        \"KE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_code\",\n    \"column_b\": \"latitude\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"7_SPECIAL\",\n    \"sample_mappings\": [\n      [\n        \"A01\",\n        \"37.4601\"\n      ],\n      [\n        \"A02\",\n        \"37.4602\"\n      ],\n      [\n        \"A03\",\n        \"37.4603\"\n      ],\n      [\n        \"A04\",\n        \"37.4604\"\n      ],\n      [\n        \"A05\",\n        \"37.4605\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"gate_code\",\n    \"column_b\": \"longitude\",\n    \"pattern_a\": \"3_ALNUM_UPPER\",\n    \"pattern_b\": \"8_SPECIAL\",\n    \"sample_mappings\": [\n      [\n        \"A01\",\n        \"126.4407\"\n      ],\n      [\n        \"A02\",\n        \"126.4408\"\n      ],\n      [\n        \"A03\",\n        \"126.4409\"\n      ],\n      [\n        \"A04\",\n        \"126.441\"\n      ],\n      [\n        \"A05\",\n        \"126.4411\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"gates\",\n    \"column_a\": \"latitude\",\n    \"column_b\": \"longitude\",\n    \"pattern_a\": \"7_SPECIAL\",\n    \"pattern_b\": \"8_SPECIAL\",\n    \"sample_mappings\": [\n      [\n        \"37.4601\",\n        \"126.4407\"\n      ],\n      [\n        \"37.4602\",\n        \"126.4408\"\n      ],\n      [\n        \"37.4603\",\n        \"126.4409\"\n      ],\n      [\n        \"37.4604\",\n        \"126.441\"\n      ],\n      [\n        \"37.4605\",\n        \"126.4411\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"booking_ref\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"12_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"BK2401150001\"\n      ],\n      [\n        \"PAX00002\",\n        \"BK2401150002\"\n      ],\n      [\n        \"PAX00003\",\n        \"BK2401150003\"\n      ],\n      [\n        \"PAX00004\",\n        \"BK2401150004\"\n      ],\n      [\n        \"PAX00005\",\n        \"BK2401150005\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"pnr_code\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"ABCDEF\"\n      ],\n      [\n        \"PAX00002\",\n        \"BCDEFG\"\n      ],\n      [\n        \"PAX00003\",\n        \"CDEFGH\"\n      ],\n      [\n        \"PAX00004\",\n        \"DEFGHI\"\n      ],\n      [\n        \"PAX00005\",\n        \"EFGHIJ\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"first_name\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"1_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"\\uae40\"\n      ],\n      [\n        \"PAX00002\",\n        \"\\uc774\"\n      ],\n      [\n        \"PAX00003\",\n        \"\\ubc15\"\n      ],\n      [\n        \"PAX00004\",\n        \"\\ucd5c\"\n      ],\n      [\n        \"PAX00005\",\n        \"John\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"last_name\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"2_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"\\ubbfc\\uc218\"\n      ],\n      [\n        \"PAX00002\",\n        \"\\uc601\\ud76c\"\n      ],\n      [\n        \"PAX00003\",\n        \"\\uc900\\ud638\"\n      ],\n      [\n        \"PAX00004\",\n        \"\\uc218\\uc9c4\"\n      ],\n      [\n        \"PAX00005\",\n        \"Smith\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"nationality\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"KOR\"\n      ],\n      [\n        \"PAX00002\",\n        \"KOR\"\n      ],\n      [\n        \"PAX00003\",\n        \"KOR\"\n      ],\n      [\n        \"PAX00004\",\n        \"KOR\"\n      ],\n      [\n        \"PAX00005\",\n        \"USA\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"passport_no\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"9_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"M12345678\"\n      ],\n      [\n        \"PAX00002\",\n        \"M23456789\"\n      ],\n      [\n        \"PAX00003\",\n        \"M34567890\"\n      ],\n      [\n        \"PAX00004\",\n        \"M45678901\"\n      ],\n      [\n        \"PAX00005\",\n        \"P87654321\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"flight_num\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"5_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"KE123\"\n      ],\n      [\n        \"PAX00002\",\n        \"KE123\"\n      ],\n      [\n        \"PAX00003\",\n        \"KE123\"\n      ],\n      [\n        \"PAX00004\",\n        \"KE123\"\n      ],\n      [\n        \"PAX00005\",\n        \"KE123\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"seat_class\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"1_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"Y\"\n      ],\n      [\n        \"PAX00002\",\n        \"C\"\n      ],\n      [\n        \"PAX00003\",\n        \"Y\"\n      ],\n      [\n        \"PAX00004\",\n        \"Y\"\n      ],\n      [\n        \"PAX00005\",\n        \"F\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"check_in_time\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"2024-01-15 06:30:00\"\n      ],\n      [\n        \"PAX00002\",\n        \"2024-01-15 06:45:00\"\n      ],\n      [\n        \"PAX00003\",\n        \"2024-01-15 07:00:00\"\n      ],\n      [\n        \"PAX00004\",\n        \"2024-01-15 06:55:00\"\n      ],\n      [\n        \"PAX00005\",\n        \"2024-01-15 06:15:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"boarding_status\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"BOARDED\"\n      ],\n      [\n        \"PAX00002\",\n        \"BOARDED\"\n      ],\n      [\n        \"PAX00003\",\n        \"BOARDED\"\n      ],\n      [\n        \"PAX00004\",\n        \"BOARDED\"\n      ],\n      [\n        \"PAX00005\",\n        \"BOARDED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"baggage_count\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"2\"\n      ],\n      [\n        \"PAX00002\",\n        \"1\"\n      ],\n      [\n        \"PAX00003\",\n        \"1\"\n      ],\n      [\n        \"PAX00004\",\n        \"2\"\n      ],\n      [\n        \"PAX00005\",\n        \"3\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"pax_id\",\n    \"column_b\": \"contact_phone\",\n    \"pattern_a\": \"8_ALNUM_UPPER\",\n    \"pattern_b\": \"13_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"PAX00001\",\n        \"010-1234-5678\"\n      ],\n      [\n        \"PAX00002\",\n        \"010-2345-6789\"\n      ],\n      [\n        \"PAX00003\",\n        \"010-3456-7890\"\n      ],\n      [\n        \"PAX00004\",\n        \"010-4567-8901\"\n      ],\n      [\n        \"PAX00005\",\n        \"+1-555-123-4567\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"pnr_code\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"ABCDEF\"\n      ],\n      [\n        \"BK2401150002\",\n        \"BCDEFG\"\n      ],\n      [\n        \"BK2401150003\",\n        \"CDEFGH\"\n      ],\n      [\n        \"BK2401150004\",\n        \"DEFGHI\"\n      ],\n      [\n        \"BK2401150005\",\n        \"EFGHIJ\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"first_name\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"1_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"\\uae40\"\n      ],\n      [\n        \"BK2401150002\",\n        \"\\uc774\"\n      ],\n      [\n        \"BK2401150003\",\n        \"\\ubc15\"\n      ],\n      [\n        \"BK2401150004\",\n        \"\\ucd5c\"\n      ],\n      [\n        \"BK2401150005\",\n        \"John\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"last_name\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"2_MIXED_CASE\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"\\ubbfc\\uc218\"\n      ],\n      [\n        \"BK2401150002\",\n        \"\\uc601\\ud76c\"\n      ],\n      [\n        \"BK2401150003\",\n        \"\\uc900\\ud638\"\n      ],\n      [\n        \"BK2401150004\",\n        \"\\uc218\\uc9c4\"\n      ],\n      [\n        \"BK2401150005\",\n        \"Smith\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"nationality\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"KOR\"\n      ],\n      [\n        \"BK2401150002\",\n        \"KOR\"\n      ],\n      [\n        \"BK2401150003\",\n        \"KOR\"\n      ],\n      [\n        \"BK2401150004\",\n        \"KOR\"\n      ],\n      [\n        \"BK2401150005\",\n        \"USA\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"passport_no\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"9_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"M12345678\"\n      ],\n      [\n        \"BK2401150002\",\n        \"M23456789\"\n      ],\n      [\n        \"BK2401150003\",\n        \"M34567890\"\n      ],\n      [\n        \"BK2401150004\",\n        \"M45678901\"\n      ],\n      [\n        \"BK2401150005\",\n        \"P87654321\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"flight_num\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"5_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"KE123\"\n      ],\n      [\n        \"BK2401150002\",\n        \"KE123\"\n      ],\n      [\n        \"BK2401150003\",\n        \"KE123\"\n      ],\n      [\n        \"BK2401150004\",\n        \"KE123\"\n      ],\n      [\n        \"BK2401150005\",\n        \"KE123\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"seat_class\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"1_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"Y\"\n      ],\n      [\n        \"BK2401150002\",\n        \"C\"\n      ],\n      [\n        \"BK2401150003\",\n        \"Y\"\n      ],\n      [\n        \"BK2401150004\",\n        \"Y\"\n      ],\n      [\n        \"BK2401150005\",\n        \"F\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"check_in_time\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"2024-01-15 06:30:00\"\n      ],\n      [\n        \"BK2401150002\",\n        \"2024-01-15 06:45:00\"\n      ],\n      [\n        \"BK2401150003\",\n        \"2024-01-15 07:00:00\"\n      ],\n      [\n        \"BK2401150004\",\n        \"2024-01-15 06:55:00\"\n      ],\n      [\n        \"BK2401150005\",\n        \"2024-01-15 06:15:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"boarding_status\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"BOARDED\"\n      ],\n      [\n        \"BK2401150002\",\n        \"BOARDED\"\n      ],\n      [\n        \"BK2401150003\",\n        \"BOARDED\"\n      ],\n      [\n        \"BK2401150004\",\n        \"BOARDED\"\n      ],\n      [\n        \"BK2401150005\",\n        \"BOARDED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"baggage_count\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"2\"\n      ],\n      [\n        \"BK2401150002\",\n        \"1\"\n      ],\n      [\n        \"BK2401150003\",\n        \"1\"\n      ],\n      [\n        \"BK2401150004\",\n        \"2\"\n      ],\n      [\n        \"BK2401150005\",\n        \"3\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"booking_ref\",\n    \"column_b\": \"contact_phone\",\n    \"pattern_a\": \"12_ALNUM_UPPER\",\n    \"pattern_b\": \"13_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"BK2401150001\",\n        \"010-1234-5678\"\n      ],\n      [\n        \"BK2401150002\",\n        \"010-2345-6789\"\n      ],\n      [\n        \"BK2401150003\",\n        \"010-3456-7890\"\n      ],\n      [\n        \"BK2401150004\",\n        \"010-4567-8901\"\n      ],\n      [\n        \"BK2401150005\",\n        \"+1-555-123-4567\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"first_name\",\n    \"column_b\": \"nationality\",\n    \"pattern_a\": \"1_MIXED_CASE\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"\\uae40\",\n        \"KOR\"\n      ],\n      [\n        \"\\uc774\",\n        \"KOR\"\n      ],\n      [\n        \"\\ubc15\",\n        \"KOR\"\n      ],\n      [\n        \"\\ucd5c\",\n        \"KOR\"\n      ],\n      [\n        \"John\",\n        \"USA\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"last_name\",\n    \"column_b\": \"nationality\",\n    \"pattern_a\": \"2_MIXED_CASE\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"\\ubbfc\\uc218\",\n        \"KOR\"\n      ],\n      [\n        \"\\uc601\\ud76c\",\n        \"KOR\"\n      ],\n      [\n        \"\\uc900\\ud638\",\n        \"KOR\"\n      ],\n      [\n        \"\\uc218\\uc9c4\",\n        \"KOR\"\n      ],\n      [\n        \"Smith\",\n        \"USA\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"passport_no\",\n    \"column_b\": \"flight_num\",\n    \"pattern_a\": \"9_ALNUM_UPPER\",\n    \"pattern_b\": \"5_ALNUM_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"M12345678\",\n        \"KE123\"\n      ],\n      [\n        \"M23456789\",\n        \"KE123\"\n      ],\n      [\n        \"M34567890\",\n        \"KE123\"\n      ],\n      [\n        \"M45678901\",\n        \"KE123\"\n      ],\n      [\n        \"P87654321\",\n        \"KE123\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"passport_no\",\n    \"column_b\": \"seat_class\",\n    \"pattern_a\": \"9_ALNUM_UPPER\",\n    \"pattern_b\": \"1_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"M12345678\",\n        \"Y\"\n      ],\n      [\n        \"M23456789\",\n        \"C\"\n      ],\n      [\n        \"M34567890\",\n        \"Y\"\n      ],\n      [\n        \"M45678901\",\n        \"Y\"\n      ],\n      [\n        \"P87654321\",\n        \"F\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"passport_no\",\n    \"column_b\": \"check_in_time\",\n    \"pattern_a\": \"9_ALNUM_UPPER\",\n    \"pattern_b\": \"19_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"M12345678\",\n        \"2024-01-15 06:30:00\"\n      ],\n      [\n        \"M23456789\",\n        \"2024-01-15 06:45:00\"\n      ],\n      [\n        \"M34567890\",\n        \"2024-01-15 07:00:00\"\n      ],\n      [\n        \"M45678901\",\n        \"2024-01-15 06:55:00\"\n      ],\n      [\n        \"P87654321\",\n        \"2024-01-15 06:15:00\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"passport_no\",\n    \"column_b\": \"boarding_status\",\n    \"pattern_a\": \"9_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"M12345678\",\n        \"BOARDED\"\n      ],\n      [\n        \"M23456789\",\n        \"BOARDED\"\n      ],\n      [\n        \"M34567890\",\n        \"BOARDED\"\n      ],\n      [\n        \"M45678901\",\n        \"BOARDED\"\n      ],\n      [\n        \"P87654321\",\n        \"BOARDED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"passport_no\",\n    \"column_b\": \"baggage_count\",\n    \"pattern_a\": \"9_ALNUM_UPPER\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"M12345678\",\n        \"2\"\n      ],\n      [\n        \"M23456789\",\n        \"1\"\n      ],\n      [\n        \"M34567890\",\n        \"1\"\n      ],\n      [\n        \"M45678901\",\n        \"2\"\n      ],\n      [\n        \"P87654321\",\n        \"3\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"passport_no\",\n    \"column_b\": \"contact_phone\",\n    \"pattern_a\": \"9_ALNUM_UPPER\",\n    \"pattern_b\": \"13_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"M12345678\",\n        \"010-1234-5678\"\n      ],\n      [\n        \"M23456789\",\n        \"010-2345-6789\"\n      ],\n      [\n        \"M34567890\",\n        \"010-3456-7890\"\n      ],\n      [\n        \"M45678901\",\n        \"010-4567-8901\"\n      ],\n      [\n        \"P87654321\",\n        \"+1-555-123-4567\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"flight_num\",\n    \"column_b\": \"boarding_status\",\n    \"pattern_a\": \"5_ALNUM_UPPER\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE123\",\n        \"BOARDED\"\n      ],\n      [\n        \"OZ201\",\n        \"BOARDED\"\n      ],\n      [\n        \"KE456\",\n        \"BOARDED\"\n      ],\n      [\n        \"7C101\",\n        \"BOARDED\"\n      ],\n      [\n        \"LJ302\",\n        \"BOARDED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"check_in_time\",\n    \"column_b\": \"boarding_status\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"7_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 06:30:00\",\n        \"BOARDED\"\n      ],\n      [\n        \"2024-01-15 06:45:00\",\n        \"BOARDED\"\n      ],\n      [\n        \"2024-01-15 07:00:00\",\n        \"BOARDED\"\n      ],\n      [\n        \"2024-01-15 06:55:00\",\n        \"BOARDED\"\n      ],\n      [\n        \"2024-01-15 06:15:00\",\n        \"BOARDED\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"check_in_time\",\n    \"column_b\": \"baggage_count\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 06:30:00\",\n        \"2\"\n      ],\n      [\n        \"2024-01-15 06:45:00\",\n        \"1\"\n      ],\n      [\n        \"2024-01-15 07:00:00\",\n        \"1\"\n      ],\n      [\n        \"2024-01-15 06:55:00\",\n        \"2\"\n      ],\n      [\n        \"2024-01-15 06:15:00\",\n        \"3\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"passengers\",\n    \"column_a\": \"check_in_time\",\n    \"column_b\": \"contact_phone\",\n    \"pattern_a\": \"19_WITH_SEPARATOR\",\n    \"pattern_b\": \"13_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"2024-01-15 06:30:00\",\n        \"010-1234-5678\"\n      ],\n      [\n        \"2024-01-15 06:45:00\",\n        \"010-2345-6789\"\n      ],\n      [\n        \"2024-01-15 07:00:00\",\n        \"010-3456-7890\"\n      ],\n      [\n        \"2024-01-15 06:55:00\",\n        \"010-4567-8901\"\n      ],\n      [\n        \"2024-01-15 06:15:00\",\n        \"+1-555-123-4567\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"operator_code\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"2_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"KE\"\n      ],\n      [\n        \"HL7462\",\n        \"KE\"\n      ],\n      [\n        \"HL7463\",\n        \"KE\"\n      ],\n      [\n        \"HL7464\",\n        \"KE\"\n      ],\n      [\n        \"HL7465\",\n        \"KE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"manufacture_date\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"10_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"2013-05-15\"\n      ],\n      [\n        \"HL7462\",\n        \"2013-07-22\"\n      ],\n      [\n        \"HL7463\",\n        \"2013-09-10\"\n      ],\n      [\n        \"HL7464\",\n        \"2015-03-18\"\n      ],\n      [\n        \"HL7465\",\n        \"2015-05-28\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"delivery_date\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"10_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"2013-06-20\"\n      ],\n      [\n        \"HL7462\",\n        \"2013-08-28\"\n      ],\n      [\n        \"HL7463\",\n        \"2013-10-15\"\n      ],\n      [\n        \"HL7464\",\n        \"2015-04-25\"\n      ],\n      [\n        \"HL7465\",\n        \"2015-07-02\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"seat_config_f\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"8\"\n      ],\n      [\n        \"HL7462\",\n        \"8\"\n      ],\n      [\n        \"HL7463\",\n        \"8\"\n      ],\n      [\n        \"HL7464\",\n        \"8\"\n      ],\n      [\n        \"HL7465\",\n        \"8\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"seat_config_y\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"261\"\n      ],\n      [\n        \"HL7462\",\n        \"261\"\n      ],\n      [\n        \"HL7463\",\n        \"261\"\n      ],\n      [\n        \"HL7464\",\n        \"261\"\n      ],\n      [\n        \"HL7465\",\n        \"261\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"total_seats\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"311\"\n      ],\n      [\n        \"HL7462\",\n        \"311\"\n      ],\n      [\n        \"HL7463\",\n        \"311\"\n      ],\n      [\n        \"HL7464\",\n        \"311\"\n      ],\n      [\n        \"HL7465\",\n        \"311\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"max_range_nm\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"4_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"7370\"\n      ],\n      [\n        \"HL7462\",\n        \"7370\"\n      ],\n      [\n        \"HL7463\",\n        \"7370\"\n      ],\n      [\n        \"HL7464\",\n        \"7370\"\n      ],\n      [\n        \"HL7465\",\n        \"7370\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"cruise_speed_kts\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"490\"\n      ],\n      [\n        \"HL7462\",\n        \"490\"\n      ],\n      [\n        \"HL7463\",\n        \"490\"\n      ],\n      [\n        \"HL7464\",\n        \"490\"\n      ],\n      [\n        \"HL7465\",\n        \"490\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"2\"\n      ],\n      [\n        \"HL7462\",\n        \"2\"\n      ],\n      [\n        \"HL7463\",\n        \"2\"\n      ],\n      [\n        \"HL7464\",\n        \"2\"\n      ],\n      [\n        \"HL7465\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"current_status\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"ACTIVE\"\n      ],\n      [\n        \"HL7462\",\n        \"ACTIVE\"\n      ],\n      [\n        \"HL7463\",\n        \"MAINTENANCE\"\n      ],\n      [\n        \"HL7464\",\n        \"ACTIVE\"\n      ],\n      [\n        \"HL7465\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"registration_no\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"6_ALNUM_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"HL7461\",\n        \"ICN\"\n      ],\n      [\n        \"HL7462\",\n        \"ICN\"\n      ],\n      [\n        \"HL7463\",\n        \"ICN\"\n      ],\n      [\n        \"HL7464\",\n        \"ICN\"\n      ],\n      [\n        \"HL7465\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"operator_code\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"2_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"KE\",\n        \"ICN\"\n      ],\n      [\n        \"OZ\",\n        \"ICN\"\n      ],\n      [\n        \"7C\",\n        \"ICN\"\n      ],\n      [\n        \"LJ\",\n        \"ICN\"\n      ],\n      [\n        \"TW\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.21\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"delivery_date\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"10_WITH_SEPARATOR\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"2013-06-20\"\n      ],\n      [\n        \"2013-07-22\",\n        \"2013-08-28\"\n      ],\n      [\n        \"2013-09-10\",\n        \"2013-10-15\"\n      ],\n      [\n        \"2015-03-18\",\n        \"2015-04-25\"\n      ],\n      [\n        \"2015-05-28\",\n        \"2015-07-02\"\n      ]\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"seat_config_f\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"8\"\n      ],\n      [\n        \"2013-07-22\",\n        \"8\"\n      ],\n      [\n        \"2013-09-10\",\n        \"8\"\n      ],\n      [\n        \"2015-03-18\",\n        \"8\"\n      ],\n      [\n        \"2015-05-28\",\n        \"8\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"seat_config_y\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"261\"\n      ],\n      [\n        \"2013-07-22\",\n        \"261\"\n      ],\n      [\n        \"2013-09-10\",\n        \"261\"\n      ],\n      [\n        \"2015-03-18\",\n        \"261\"\n      ],\n      [\n        \"2015-05-28\",\n        \"261\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"total_seats\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"311\"\n      ],\n      [\n        \"2013-07-22\",\n        \"311\"\n      ],\n      [\n        \"2013-09-10\",\n        \"311\"\n      ],\n      [\n        \"2015-03-18\",\n        \"311\"\n      ],\n      [\n        \"2015-05-28\",\n        \"311\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"max_range_nm\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"4_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"7370\"\n      ],\n      [\n        \"2013-07-22\",\n        \"7370\"\n      ],\n      [\n        \"2013-09-10\",\n        \"7370\"\n      ],\n      [\n        \"2015-03-18\",\n        \"7370\"\n      ],\n      [\n        \"2015-05-28\",\n        \"7370\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"cruise_speed_kts\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"490\"\n      ],\n      [\n        \"2013-07-22\",\n        \"490\"\n      ],\n      [\n        \"2013-09-10\",\n        \"490\"\n      ],\n      [\n        \"2015-03-18\",\n        \"490\"\n      ],\n      [\n        \"2015-05-28\",\n        \"490\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"2\"\n      ],\n      [\n        \"2013-07-22\",\n        \"2\"\n      ],\n      [\n        \"2013-09-10\",\n        \"2\"\n      ],\n      [\n        \"2015-03-18\",\n        \"2\"\n      ],\n      [\n        \"2015-05-28\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"current_status\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2013-07-22\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2013-09-10\",\n        \"MAINTENANCE\"\n      ],\n      [\n        \"2015-03-18\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2015-05-28\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"manufacture_date\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2013-05-15\",\n        \"ICN\"\n      ],\n      [\n        \"2013-07-22\",\n        \"ICN\"\n      ],\n      [\n        \"2013-09-10\",\n        \"ICN\"\n      ],\n      [\n        \"2015-03-18\",\n        \"ICN\"\n      ],\n      [\n        \"2015-05-28\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"seat_config_f\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"8\"\n      ],\n      [\n        \"2013-08-28\",\n        \"8\"\n      ],\n      [\n        \"2013-10-15\",\n        \"8\"\n      ],\n      [\n        \"2015-04-25\",\n        \"8\"\n      ],\n      [\n        \"2015-07-02\",\n        \"8\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"seat_config_y\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"261\"\n      ],\n      [\n        \"2013-08-28\",\n        \"261\"\n      ],\n      [\n        \"2013-10-15\",\n        \"261\"\n      ],\n      [\n        \"2015-04-25\",\n        \"261\"\n      ],\n      [\n        \"2015-07-02\",\n        \"261\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"total_seats\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"311\"\n      ],\n      [\n        \"2013-08-28\",\n        \"311\"\n      ],\n      [\n        \"2013-10-15\",\n        \"311\"\n      ],\n      [\n        \"2015-04-25\",\n        \"311\"\n      ],\n      [\n        \"2015-07-02\",\n        \"311\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"max_range_nm\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"4_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"7370\"\n      ],\n      [\n        \"2013-08-28\",\n        \"7370\"\n      ],\n      [\n        \"2013-10-15\",\n        \"7370\"\n      ],\n      [\n        \"2015-04-25\",\n        \"7370\"\n      ],\n      [\n        \"2015-07-02\",\n        \"7370\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"cruise_speed_kts\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"490\"\n      ],\n      [\n        \"2013-08-28\",\n        \"490\"\n      ],\n      [\n        \"2013-10-15\",\n        \"490\"\n      ],\n      [\n        \"2015-04-25\",\n        \"490\"\n      ],\n      [\n        \"2015-07-02\",\n        \"490\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"2\"\n      ],\n      [\n        \"2013-08-28\",\n        \"2\"\n      ],\n      [\n        \"2013-10-15\",\n        \"2\"\n      ],\n      [\n        \"2015-04-25\",\n        \"2\"\n      ],\n      [\n        \"2015-07-02\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"current_status\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"6_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2013-08-28\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2013-10-15\",\n        \"MAINTENANCE\"\n      ],\n      [\n        \"2015-04-25\",\n        \"ACTIVE\"\n      ],\n      [\n        \"2015-07-02\",\n        \"ACTIVE\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"delivery_date\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"10_WITH_SEPARATOR\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"2013-06-20\",\n        \"ICN\"\n      ],\n      [\n        \"2013-08-28\",\n        \"ICN\"\n      ],\n      [\n        \"2013-10-15\",\n        \"ICN\"\n      ],\n      [\n        \"2015-04-25\",\n        \"ICN\"\n      ],\n      [\n        \"2015-07-02\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.7\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"seat_config_f\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"1_NUMERIC\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"8\",\n        \"2\"\n      ],\n      [\n        \"12\",\n        \"4\"\n      ],\n      [\n        \"6\",\n        \"2\"\n      ],\n      [\n        \"0\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.13999999999999999\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"seat_config_f\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"1_NUMERIC\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"8\",\n        \"ICN\"\n      ],\n      [\n        \"12\",\n        \"ICN\"\n      ],\n      [\n        \"6\",\n        \"ICN\"\n      ],\n      [\n        \"0\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.13999999999999999\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"seat_config_y\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"3_NUMERIC\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"261\",\n        \"2\"\n      ],\n      [\n        \"301\",\n        \"4\"\n      ],\n      [\n        \"245\",\n        \"2\"\n      ],\n      [\n        \"248\",\n        \"2\"\n      ],\n      [\n        \"244\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.35\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"seat_config_y\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"3_NUMERIC\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"261\",\n        \"ICN\"\n      ],\n      [\n        \"301\",\n        \"ICN\"\n      ],\n      [\n        \"245\",\n        \"ICN\"\n      ],\n      [\n        \"248\",\n        \"ICN\"\n      ],\n      [\n        \"244\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.35\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"total_seats\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"3_NUMERIC\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"311\",\n        \"2\"\n      ],\n      [\n        \"407\",\n        \"4\"\n      ],\n      [\n        \"269\",\n        \"2\"\n      ],\n      [\n        \"272\",\n        \"2\"\n      ],\n      [\n        \"276\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.315\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"total_seats\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"3_NUMERIC\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"311\",\n        \"ICN\"\n      ],\n      [\n        \"407\",\n        \"ICN\"\n      ],\n      [\n        \"269\",\n        \"ICN\"\n      ],\n      [\n        \"272\",\n        \"ICN\"\n      ],\n      [\n        \"276\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.315\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"max_range_nm\",\n    \"column_b\": \"cruise_speed_kts\",\n    \"pattern_a\": \"4_NUMERIC\",\n    \"pattern_b\": \"3_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"7370\",\n        \"490\"\n      ],\n      [\n        \"8200\",\n        \"480\"\n      ],\n      [\n        \"7635\",\n        \"488\"\n      ],\n      [\n        \"6350\",\n        \"470\"\n      ],\n      [\n        \"5240\",\n        \"490\"\n      ]\n    ],\n    \"confidence\": 0.27999999999999997\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"max_range_nm\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"4_NUMERIC\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"7370\",\n        \"2\"\n      ],\n      [\n        \"8200\",\n        \"4\"\n      ],\n      [\n        \"7635\",\n        \"2\"\n      ],\n      [\n        \"6350\",\n        \"2\"\n      ],\n      [\n        \"5240\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.27999999999999997\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"max_range_nm\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"4_NUMERIC\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"7370\",\n        \"ICN\"\n      ],\n      [\n        \"8200\",\n        \"ICN\"\n      ],\n      [\n        \"7635\",\n        \"ICN\"\n      ],\n      [\n        \"6350\",\n        \"ICN\"\n      ],\n      [\n        \"5240\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.27999999999999997\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"cruise_speed_kts\",\n    \"column_b\": \"engine_count\",\n    \"pattern_a\": \"3_NUMERIC\",\n    \"pattern_b\": \"1_NUMERIC\",\n    \"sample_mappings\": [\n      [\n        \"490\",\n        \"2\"\n      ],\n      [\n        \"480\",\n        \"4\"\n      ],\n      [\n        \"488\",\n        \"2\"\n      ],\n      [\n        \"470\",\n        \"2\"\n      ],\n      [\n        \"453\",\n        \"2\"\n      ]\n    ],\n    \"confidence\": 0.21\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"cruise_speed_kts\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"3_NUMERIC\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"490\",\n        \"ICN\"\n      ],\n      [\n        \"480\",\n        \"ICN\"\n      ],\n      [\n        \"488\",\n        \"ICN\"\n      ],\n      [\n        \"470\",\n        \"ICN\"\n      ],\n      [\n        \"453\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.21\n  },\n  {\n    \"table\": \"aircraft_registry\",\n    \"column_a\": \"current_status\",\n    \"column_b\": \"home_base\",\n    \"pattern_a\": \"6_UPPER\",\n    \"pattern_b\": \"3_UPPER\",\n    \"sample_mappings\": [\n      [\n        \"ACTIVE\",\n        \"ICN\"\n      ],\n      [\n        \"MAINTENANCE\",\n        \"ICN\"\n      ],\n      [\n        \"GROUNDED\",\n        \"ICN\"\n      ]\n    ],\n    \"confidence\": 0.105\n  }\n]\n\n**IMPORTANT**: Use these bridge tables to find INDIRECT FK relationships!\nExample: If table_a.iata_carrier doesn't match table_b.icao_carrier directly,\nbut airlines table has iata_code ↔ icao_code mapping, then there's an INDIRECT relationship.\n\n\n## SEMANTIC COLUMN MATCHES (v7.0 - Abbreviation Expansion)\nThese column pairs have similar semantic meaning despite different names.\n(flt_no → flight_number, carr_cd → carrier_code, etc.)\n\n[\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"supervisor_id\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"column_b\": \"supervisor_id\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"supervisor_identifier \\u2194 supervisor_identifier\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"status\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"column_b\": \"status\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"status \\u2194 status\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"column_a\": \"status\",\n    \"table_b\": \"gates\",\n    \"column_b\": \"status\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"status \\u2194 status\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"table_b\": \"delay_records\",\n    \"column_b\": \"flt_no\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"flight_number \\u2194 flight_number\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"column_a\": \"booking_reference\",\n    \"table_b\": \"passengers\",\n    \"column_b\": \"booking_ref\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"booking_reference \\u2194 booking_reference\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"column_a\": \"flt_number\",\n    \"table_b\": \"passengers\",\n    \"column_b\": \"flight_num\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"flight_number \\u2194 flight_number\"\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"column_a\": \"scheduled_date\",\n    \"table_b\": \"delay_records\",\n    \"column_b\": \"scheduled_date\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"scheduled_date \\u2194 scheduled_date\"\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"column_a\": \"status\",\n    \"table_b\": \"gates\",\n    \"column_b\": \"status\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"status \\u2194 status\"\n  },\n  {\n    \"table_a\": \"delay_records\",\n    \"column_a\": \"flt_no\",\n    \"table_b\": \"passengers\",\n    \"column_b\": \"flight_num\",\n    \"similarity\": 1.0,\n    \"match_type\": \"exact\",\n    \"normalized\": \"flight_number \\u2194 flight_number\"\n  }\n]\n\n**IMPORTANT**: Even if column names look different, they may refer to the same entity!\n\n\n## v7.1 COMPREHENSIVE SEMANTIC FK ANALYSIS\nThe following analysis was performed using advanced semantic detection:\n- Column Name Semantic Tokenizer: Extracts table references from column names\n- Bridge Table Detector: Identifies mapping tables connecting multiple code systems\n- Value Pattern Correlator: Finds columns with high value overlap\n- Dynamic Abbreviation Learner: Learns abbreviation patterns from data\n\n## 🔴 MANDATORY FK RELATIONSHIPS - YOU MUST CREATE THESE\n\nBased on STRONG evidence (Jaccard ≥ 80% or semantic match), the following FK relationships are VERIFIED. **CREATE ALL OF THEM.**\n\n| # | Source | Target | Evidence | Priority |\n|---|--------|--------|----------|----------|\n| 1 | `baggage_handling.origin` | `aircraft_registry.home_base` | Value Jaccard=100% | **CRITICAL** |\n| 2 | `aircraft_maintenance.aircraft_type` | `aircraft_registry.aircraft_model` | Value Jaccard=100% | **CRITICAL** |\n| 3 | `aircraft_maintenance.airline` | `gates.assigned_airline` | Value Jaccard=100% | **CRITICAL** |\n| 4 | `aircraft_maintenance.airline` | `aircraft_registry.operator_code` | Value Jaccard=100% | **CRITICAL** |\n| 5 | `gates.assigned_airline` | `aircraft_registry.operator_code` | Value Jaccard=100% | **CRITICAL** |\n| 6 | `baggage_handling.flt_number` | `passengers.flight_num` | Value Jaccard=95% | **HIGH** |\n| 7 | `baggage_handling.booking_reference` | `passengers.booking_ref` | Value Jaccard=88% | **HIGH** |\n| 8 | `aircraft_maintenance.aircraft_reg` | `aircraft_registry.registration_no` | Value Jaccard=83% | **HIGH** |\n| 9 | `baggage_handling.belt_assigned` | `gates.gate_code` | Value Jaccard=83% | **HIGH** |\n| 10 | `baggage_handling.passenger_name` | `passengers.pax_id` | Semantic match (entity='passenger') | **HIGH** |\n| 11 | `aircraft_maintenance.airline` | `airlines.airline_id` | Semantic match (entity='airline') | **MEDIUM** |\n| 12 | `delay_records.passenger_compensation` | `passengers.pax_id` | Semantic match (entity='passenger') | **HIGH** |\n| 13 | `gates.assigned_airline` | `airlines.airline_id` | Semantic match (entity='airline') | **MEDIUM** |\n\n**⚠️ DO NOT SKIP ANY OF THESE.** The algorithm has verified the relationship validity.\nIf you skip any, explain WHY with specific evidence.\n\n\n## 🔵 ENTITY SYNONYMS DETECTED\n\n**CRITICAL**: The following terms refer to the SAME entity:\n\n### 'origin' = 'base'\n- Evidence: `baggage_handling.origin` ↔ `aircraft_registry.home_base`\n- Jaccard: 100%\n- **Implication**: Any column named 'origin' or 'base' likely refers to the same entity!\n\n### 'aircraft' = 'compensation'\n- Evidence: `baggage_handling.loaded_to_aircraft` ↔ `delay_records.passenger_compensation`\n- Jaccard: 100%\n- **Implication**: Any column named 'aircraft' or 'compensation' likely refers to the same entity!\n\n### 'reported' = 'compensation'\n- Evidence: `baggage_handling.damage_reported` ↔ `delay_records.passenger_compensation`\n- Jaccard: 100%\n- **Implication**: Any column named 'reported' or 'compensation' likely refers to the same entity!\n\n### 'filed' = 'compensation'\n- Evidence: `baggage_handling.claim_filed` ↔ `delay_records.passenger_compensation`\n- Jaccard: 100%\n- **Implication**: Any column named 'filed' or 'compensation' likely refers to the same entity!\n\n### 'type' = 'model'\n- Evidence: `aircraft_maintenance.aircraft_type` ↔ `aircraft_registry.aircraft_model`\n- Jaccard: 100%\n- **Implication**: Any column named 'type' or 'model' likely refers to the same entity!\n\n### 'airline' = 'operator'\n- Evidence: `aircraft_maintenance.airline` ↔ `aircraft_registry.operator_code`\n- Jaccard: 100%\n- **Implication**: Any column named 'airline' or 'operator' likely refers to the same entity!\n\n### 'airline' = 'operator'\n- Evidence: `gates.assigned_airline` ↔ `aircraft_registry.operator_code`\n- Jaccard: 100%\n- **Implication**: Any column named 'airline' or 'operator' likely refers to the same entity!\n\n### 'flt' = 'num'\n- Evidence: `baggage_handling.flt_number` ↔ `passengers.flight_num`\n- Jaccard: 95%\n- **Implication**: Any column named 'flt' or 'num' likely refers to the same entity!\n\n\n\n## 🟡 INDIRECT FK RELATIONSHIPS (Via Bridge Tables)\n\nThese tables are connected INDIRECTLY through a mapping table:\n\n### passengers ↔ aircraft_maintenance\n- **Join Path**: `passengers.last_name → airport_employees.name_first ↔ airport_employees.supervisor_id ← aircraft_maintenance.supervisor_id`\n- **Bridge Table**: `airport_employees`\n- **Code Systems**: name_first ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### passengers ↔ aircraft_maintenance\n- **Join Path**: `passengers.last_name → airport_employees.name_first ↔ airport_employees.supervisor_id ← aircraft_maintenance.supervisor_id`\n- **Bridge Table**: `airport_employees`\n- **Code Systems**: name_first ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### passengers ↔ aircraft_maintenance\n- **Join Path**: `passengers.first_name → airport_employees.name_last ↔ airport_employees.supervisor_id ← aircraft_maintenance.supervisor_id`\n- **Bridge Table**: `airport_employees`\n- **Code Systems**: name_last ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### passengers ↔ aircraft_maintenance\n- **Join Path**: `passengers.first_name → airport_employees.name_last ↔ airport_employees.supervisor_id ← aircraft_maintenance.supervisor_id`\n- **Bridge Table**: `airport_employees`\n- **Code Systems**: name_last ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### aircraft_registry ↔ delay_records\n- **Join Path**: `aircraft_registry.registration_no → aircraft_maintenance.aircraft_reg ↔ aircraft_maintenance.next_scheduled_maintenance ← delay_records.scheduled_date`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: aircraft_reg ↔ next_scheduled_maintenance\n- **Action**: Create FK relationship with bridge table join\n\n### aircraft_registry ↔ delay_records\n- **Join Path**: `aircraft_registry.registration_no → aircraft_maintenance.aircraft_reg ↔ aircraft_maintenance.next_scheduled_maintenance ← delay_records.scheduled_date`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: aircraft_reg ↔ next_scheduled_maintenance\n- **Action**: Create FK relationship with bridge table join\n\n### aircraft_registry ↔ airport_employees\n- **Join Path**: `aircraft_registry.registration_no → aircraft_maintenance.aircraft_reg ↔ aircraft_maintenance.supervisor_id ← airport_employees.supervisor_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: aircraft_reg ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### aircraft_registry ↔ airport_employees\n- **Join Path**: `aircraft_registry.registration_no → aircraft_maintenance.aircraft_reg ↔ aircraft_maintenance.supervisor_id ← airport_employees.emp_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: aircraft_reg ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### aircraft_registry ↔ airport_employees\n- **Join Path**: `aircraft_registry.registration_no → aircraft_maintenance.aircraft_reg ↔ aircraft_maintenance.mechanic_id ← airport_employees.emp_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: aircraft_reg ↔ mechanic_id\n- **Action**: Create FK relationship with bridge table join\n\n### delay_records ↔ airport_employees\n- **Join Path**: `delay_records.scheduled_date → aircraft_maintenance.next_scheduled_maintenance ↔ aircraft_maintenance.supervisor_id ← airport_employees.supervisor_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: next_scheduled_maintenance ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### delay_records ↔ airport_employees\n- **Join Path**: `delay_records.scheduled_date → aircraft_maintenance.next_scheduled_maintenance ↔ aircraft_maintenance.supervisor_id ← airport_employees.emp_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: next_scheduled_maintenance ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### delay_records ↔ airport_employees\n- **Join Path**: `delay_records.scheduled_date → aircraft_maintenance.next_scheduled_maintenance ↔ aircraft_maintenance.supervisor_id ← airport_employees.supervisor_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: next_scheduled_maintenance ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### delay_records ↔ airport_employees\n- **Join Path**: `delay_records.scheduled_date → aircraft_maintenance.next_scheduled_maintenance ↔ aircraft_maintenance.supervisor_id ← airport_employees.emp_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: next_scheduled_maintenance ↔ supervisor_id\n- **Action**: Create FK relationship with bridge table join\n\n### delay_records ↔ airport_employees\n- **Join Path**: `delay_records.scheduled_date → aircraft_maintenance.next_scheduled_maintenance ↔ aircraft_maintenance.mechanic_id ← airport_employees.emp_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: next_scheduled_maintenance ↔ mechanic_id\n- **Action**: Create FK relationship with bridge table join\n\n### delay_records ↔ airport_employees\n- **Join Path**: `delay_records.scheduled_date → aircraft_maintenance.next_scheduled_maintenance ↔ aircraft_maintenance.mechanic_id ← airport_employees.emp_id`\n- **Bridge Table**: `aircraft_maintenance`\n- **Code Systems**: next_scheduled_maintenance ↔ mechanic_id\n- **Action**: Create FK relationship with bridge table join\n\n### gates ↔ aircraft_maintenance\n- **Join Path**: `gates.assigned_airline → aircraft_registry.operator_code ↔ aircraft_registry.registration_no ← aircraft_maintenance.aircraft_reg`\n- **Bridge Table**: `aircraft_registry`\n- **Code Systems**: operator_code ↔ registration_no\n- **Action**: Create FK relationship with bridge table join\n\n### gates ↔ aircraft_maintenance\n- **Join Path**: `gates.assigned_airline → aircraft_registry.operator_code ↔ aircraft_registry.registration_no ← aircraft_maintenance.aircraft_reg`\n- **Bridge Table**: `aircraft_registry`\n- **Code Systems**: operator_code ↔ registration_no\n- **Action**: Create FK relationship with bridge table join\n\n### airlines ↔ aircraft_maintenance\n- **Join Path**: `airlines.iata_code → aircraft_registry.operator_code ↔ aircraft_registry.registration_no ← aircraft_maintenance.aircraft_reg`\n- **Bridge Table**: `aircraft_registry`\n- **Code Systems**: operator_code ↔ registration_no\n- **Action**: Create FK relationship with bridge table join\n\n### airlines ↔ aircraft_maintenance\n- **Join Path**: `airlines.iata_code → aircraft_registry.operator_code ↔ aircraft_registry.registration_no ← aircraft_maintenance.aircraft_reg`\n- **Bridge Table**: `aircraft_registry`\n- **Code Systems**: operator_code ↔ registration_no\n- **Action**: Create FK relationship with bridge table join\n\n### gates ↔ aircraft_maintenance\n- **Join Path**: `gates.assigned_airline → aircraft_registry.operator_code ↔ aircraft_registry.registration_no ← aircraft_maintenance.aircraft_reg`\n- **Bridge Table**: `aircraft_registry`\n- **Code Systems**: operator_code ↔ registration_no\n- **Action**: Create FK relationship with bridge table join\n\n### airlines ↔ aircraft_maintenance\n- **Join Path**: `airlines.iata_code → aircraft_registry.operator_code ↔ aircraft_registry.registration_no ← aircraft_maintenance.aircraft_reg`\n- **Bridge Table**: `aircraft_registry`\n- **Code Systems**: operator_code ↔ registration_no\n- **Action**: Create FK relationship with bridge table join\n\n\n\n## BRIDGE/MAPPING TABLES DETECTED\n\nThese tables connect multiple code systems. Consider INDIRECT relationships through these bridges:\n\n### airport_employees (Confidence: 60%)\nCode columns: emp_id, emp_code, name_first, name_last, hire_date, supervisor_id\n  - emp_id: [EMP011, EMP050, EMP032, EMP064, EMP060]\n  - emp_code: [ICN-SEC-004, ICN-ATC-004, ICN-CS-006, ICN-OPS-008, ICN-MNT-002]\n  - name_first: [우진, 나윤, 예원, 예준, 수아]\n  - name_last: [난, 한, 최, 호, 길]\n  - hire_date: [2020-02-28, 2013-11-01, 2019-12-15, 2021-08-10, 2020-07-15]\n  - supervisor_id: [EMP055, EMP011, EMP032, EMP031, EMP044]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'airport_employees'.\n\n### baggage_handling (Confidence: 60%)\nCode columns: bag_tag_id, passenger_name, weight_kg\n  - bag_tag_id: [BT2401160027, BT2401170020, BT2401150022, BT2401160006, BT2401160022]\n  - passenger_name: [김민수, 표아린, 설나윤, 목태민, 최수진]\n  - weight_kg: [16.2, 22.3, 16.5, 24.8, 14.8]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'baggage_handling'.\n\n### airlines (Confidence: 70%)\nCode columns: airline_id, iata_code, icao_code, airline_name_kr, hub_airport, founded_year, fleet_size, headquarters_city\n  - airline_id: [AIR030, AIR014, AIR029, AIR016, AIR007]\n  - iata_code: [UA, TG, OZ, JL, ZE]\n  - icao_code: [ETD, JAL, ANA, UAL, DLH]\n  - airline_name_kr: [캐세이퍼시픽, 중국국제항공, 중국남방항공, 플라이강원, 대한항공]\n  - hub_airport: [BKK, AUH, FRA, DFW, KUL]\n  - founded_year: [2003, 1988, 1985, 1946, 1956]\n  - fleet_size: [230, 80, 450, 950, 420]\n  - headquarters_city: [Paris, Busan, Frankfurt, Atlanta, Beijing]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'airlines'.\n\n### aircraft_maintenance (Confidence: 70%)\nCode columns: maintenance_id, aircraft_reg, mechanic_id, supervisor_id, next_scheduled_maintenance, hangar_bay\n  - maintenance_id: [MNT036, MNT024, MNT009, MNT014, MNT027]\n  - aircraft_reg: [HL7713, HL8001, HL7856, HL7556, HL7855]\n  - mechanic_id: [EMP020, EMP022, EMP019, EMP021]\n  - supervisor_id: [EMP018, EMP017]\n  - next_scheduled_maintenance: [2024-04-08, 2024-02-18, 2024-07-05, 2024-01-27, 2024-01-20]\n  - hangar_bay: [APRON_20, BAY_A4, BAY_C1, BAY_D2, BAY_A2]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'aircraft_maintenance'.\n\n### delay_records (Confidence: 60%)\nCode columns: record_id, flt_no, delay_code\n  - record_id: [DLY020, DLY022, DLY047, DLY037, DLY012]\n  - flt_no: [OZ605, KE456, TW804, OZ201, TW602]\n  - delay_code: [63, 77, 74, 11, 81]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'delay_records'.\n\n### gates (Confidence: 60%)\nCode columns: gate_id, gate_code, latitude, longitude\n  - gate_id: [G032, G018, G021, G007, G042]\n  - gate_code: [A17, A13, A15, C03, C02]\n  - latitude: [37.4606, 37.4612, 37.4655, 37.462, 37.4651]\n  - longitude: [126.4465, 126.4464, 126.4434, 126.4443, 126.4444]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'gates'.\n\n### passengers (Confidence: 60%)\nCode columns: pax_id, pnr_code, first_name, last_name, passport_no, seat_no, frequent_flyer_id\n  - pax_id: [PAX00041, PAX00098, PAX00085, PAX00053, PAX00070]\n  - pnr_code: [LMNOPQ, QRSTUV, YZABCD, EFGHIJ, JKLMNO]\n  - first_name: [Robert, 동, 표, 성, 란]\n  - last_name: [시온, Wei, 현서, 다인, 소현]\n  - passport_no: [M10101010, M44445555, M77772222, M56789012, M11115555]\n  - seat_no: [7K, 7B, 24B, 32A, 15C]\n  - frequent_flyer_id: [KE-SILVER-004, OZ-SILVER-019, KE-PLAT-018, OZ-GOLD-031, OZ-GOLD-007]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'passengers'.\n\n### aircraft_registry (Confidence: 70%)\nCode columns: registration_no, serial_number, operator_code, manufacture_date, delivery_date, last_c_check, next_c_check\n  - registration_no: [HL7713, HL8001, HL7856, HL7556, HL7855]\n  - serial_number: [7892, 1602, 44552, 37645, 37644]\n  - operator_code: [OZ, LJ, ZE, TW, 7C]\n  - manufacture_date: [2013-05-28, 2017-07-08, 2017-02-10, 2013-08-22, 2018-01-22]\n  - delivery_date: [2017-03-18, 2015-04-25, 2017-09-22, 2013-08-28, 2013-05-30]\n  - last_c_check: [2023-09-20, 2023-10-22, 2023-10-12, 2023-10-15, 2023-04-20]\n  - next_c_check: [2024-09-10, 2024-11-08, 2024-05-22, 2024-08-12, 2024-05-18]\n\nUsage: If table A uses one code system and table B uses another, they may be connected through 'aircraft_registry'.\n\n\n\n## STRONG VALUE MATCHES (Likely FK Relationships)\n\nThe following column pairs have high value overlap:\n\n### Match 1: baggage_handling.origin ↔ aircraft_registry.home_base\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['ICN']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 2: baggage_handling.loaded_to_aircraft ↔ delay_records.passenger_compensation\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['True', 'False']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 3: baggage_handling.damage_reported ↔ delay_records.passenger_compensation\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['True', 'False']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 4: baggage_handling.claim_filed ↔ delay_records.passenger_compensation\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['True', 'False']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 5: aircraft_maintenance.aircraft_type ↔ aircraft_registry.aircraft_model\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['B737-800', 'B787-9', 'A321', 'B777-300ER', 'A380-800']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 6: aircraft_maintenance.airline ↔ gates.assigned_airline\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['OZ', 'LJ', 'ZE', 'TW', '7C']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 7: aircraft_maintenance.airline ↔ aircraft_registry.operator_code\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['OZ', 'LJ', 'ZE', 'TW', '7C']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 8: gates.assigned_airline ↔ aircraft_registry.operator_code\n- **Jaccard Similarity**: 100.0%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['OZ', 'LJ', 'ZE', 'TW', '7C']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 9: baggage_handling.flt_number ↔ passengers.flight_num\n- **Jaccard Similarity**: 94.5%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 94.5%\n- **Sample overlapping values**: ['KE999', 'OZ605', 'KE456', 'TW804', 'OZ201']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 10: baggage_handling.booking_reference ↔ passengers.booking_ref\n- **Jaccard Similarity**: 87.5%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 87.5%\n- **Sample overlapping values**: ['BK2401150009', 'BK2401200005', 'BK2401160004', 'BK2401190005', 'BK2401180016']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 11: aircraft_maintenance.aircraft_reg ↔ aircraft_registry.registration_no\n- **Jaccard Similarity**: 83.3%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 83.3%\n- **Sample overlapping values**: ['HL7713', 'HL8001', 'HL7856', 'HL7556', 'HL7855']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 12: baggage_handling.belt_assigned ↔ gates.gate_code\n- **Jaccard Similarity**: 82.7%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 82.7%\n- **Sample overlapping values**: ['A13', 'C03', 'C02', 'A09', 'C09']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 13: delay_records.flt_no ↔ passengers.flight_num\n- **Jaccard Similarity**: 76.7%\n- **Containment A→B**: 90.2%\n- **Containment B→A**: 83.6%\n- **Sample overlapping values**: ['OZ605', 'KE456', 'TW804', 'OZ201', 'TW602']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 14: gates.status ↔ aircraft_registry.current_status\n- **Jaccard Similarity**: 66.7%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 66.7%\n- **Sample overlapping values**: ['ACTIVE', 'MAINTENANCE']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 15: airport_employees.name_first ↔ passengers.last_name\n- **Jaccard Similarity**: 58.6%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 58.6%\n- **Sample overlapping values**: ['재민', '우진', '나윤', '예원', '예준']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 16: airport_employees.name_last ↔ passengers.first_name\n- **Jaccard Similarity**: 58.5%\n- **Containment A→B**: 100.0%\n- **Containment B→A**: 58.5%\n- **Sample overlapping values**: ['난', '한', '최', '호', '길']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 17: baggage_handling.loaded_to_aircraft ↔ gates.has_jetbridge\n- **Jaccard Similarity**: 50.0%\n- **Containment A→B**: 50.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['True']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 18: baggage_handling.damage_reported ↔ gates.has_jetbridge\n- **Jaccard Similarity**: 50.0%\n- **Containment A→B**: 50.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['True']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 19: baggage_handling.claim_filed ↔ gates.has_jetbridge\n- **Jaccard Similarity**: 50.0%\n- **Containment A→B**: 50.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['True']\n- **This is a STRONG candidate for FK relationship.**\n\n### Match 20: delay_records.passenger_compensation ↔ gates.has_jetbridge\n- **Jaccard Similarity**: 50.0%\n- **Containment A→B**: 50.0%\n- **Containment B→A**: 100.0%\n- **Sample overlapping values**: ['True']\n- **This is a STRONG candidate for FK relationship.**\n\n\n## MODERATE VALUE MATCHES (Investigate Further)\n\n- baggage_handling.flt_number ↔ delay_records.flt_no (Jaccard: 77.6%)\n- airlines.country ↔ passengers.nationality (Jaccard: 57.1%)\n- airport_employees.status ↔ gates.status (Jaccard: 33.3%)\n- aircraft_maintenance.next_scheduled_maintenance ↔ delay_records.scheduled_date (Jaccard: 22.7%)\n- airlines.airline_name ↔ aircraft_registry.operator_name (Jaccard: 16.1%)\n\n\n## SEMANTIC FK CANDIDATES (From Column Names)\n\nThese FK relationships were inferred from column name semantics:\n\n- **baggage_handling.passenger_name** → **passengers.pax_id** ⬆️ BOOSTED\n  - Confidence: 100%\n  - Evidence: {'tokens': ['passenger', 'name'], 'potential_entity': 'passenger', 'fk_suffix': None, 'value_boost': 0.875, 'boosted': True}\n\n- **aircraft_maintenance.airline** → **airlines.airline_id** ⬆️ BOOSTED\n  - Confidence: 48%\n  - Evidence: {'tokens': ['airline'], 'potential_entity': 'airline', 'fk_suffix': None, 'value_boost': 0.2, 'boosted': True}\n\n- **delay_records.passenger_compensation** → **passengers.pax_id** ⬆️ BOOSTED\n  - Confidence: 70%\n  - Evidence: {'tokens': ['passenger', 'compensation'], 'potential_entity': 'passenger', 'fk_suffix': None, 'value_boost': 0.7666666666666667, 'boosted': True}\n\n- **gates.assigned_airline** → **airlines.airline_id** ⬆️ BOOSTED\n  - Confidence: 68%\n  - Evidence: {'tokens': ['assigned', 'airline'], 'potential_entity': 'airline', 'fk_suffix': None, 'value_boost': 0.2, 'boosted': True}\n\n\n\n## TABLES IN THIS DATASET\n['airport_employees', 'baggage_handling', 'airlines', 'aircraft_maintenance', 'delay_records', 'gates', 'passengers', 'aircraft_registry']\n\n## YOUR TASK\nFor EACH candidate above:\n1. Look at the metrics (containment, cardinality, name similarity)\n2. Consider the evidence (sample values, naming patterns)\n3. **Check Bridge Tables**: Can indirect relationships be established?\n4. **Check Semantic Matches**: Are there columns with same meaning but different names?\n5. DECIDE: Is this a TRUE FK relationship or FALSE POSITIVE?\n\n### INDIRECT FK RELATIONSHIPS (CRITICAL!)\nSome columns may NOT have direct value overlap but can be connected through bridge tables.\nExample: flights.iata_carrier → airlines.iata_code ↔ airlines.icao_code ← other_table.icao_carrier\n\nFor each potential indirect relationship:\n- Identify the bridge table\n- Specify the join path\n- Explain why this connection makes business sense\n\nIMPORTANT:\n- The algorithm does NOT know the domain. YOU must understand the data context.\n- Look at table names and column names to understand what domain this is.\n- Use the metrics as evidence, but make your own judgment.\n- **Actively look for INDIRECT FK relationships via bridge tables!**\n\nRespond with JSON:\n```json\n{\n    \"decisions\": [\n        {\n            \"from_table\": \"<table>\",\n            \"from_column\": \"<column>\",\n            \"to_table\": \"<table>\",\n            \"to_column\": \"<column>\",\n            \"decision\": \"TRUE_FK | FALSE_POSITIVE | UNCERTAIN\",\n            \"confidence\": 0.0-1.0,\n            \"reasoning\": \"Why you made this decision\",\n            \"is_indirect\": false\n        }\n    ],\n    \"indirect_fks\": [\n        {\n            \"from_table\": \"<table>\",\n            \"from_column\": \"<column>\",\n            \"to_table\": \"<table>\",\n            \"to_column\": \"<column>\",\n            \"via_bridge_table\": \"<bridge_table_name>\",\n            \"join_path\": \"table_a.col → bridge.col_a ↔ bridge.col_b ← table_b.col\",\n            \"confidence\": 0.0-1.0,\n            \"reasoning\": \"Why this indirect relationship exists\"\n        }\n    ],\n    \"detected_domain\": \"What domain/industry is this data from?\",\n    \"data_model_summary\": \"Brief description of the data model structure\",\n    \"hierarchy_detected\": [\"parent_table -> child_table relationships\"]\n}\n```"}], "response": "", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:10:26.208685", "agent_name": "TDA Expert", "model": "gpt-5.1", "prompt_tokens": 6275, "completion_tokens": 282, "total_tokens": 6557, "latency_ms": 5806.643009185791, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 1: Discovery (발견 단계)\n\n### 역할\n**임의의 입력 데이터**에서 구조, 패턴, 관계를 발견하는 탐색 단계입니다.\n아직 검증되지 않은 \"후보\"들을 최대한 많이 발견하는 것이 목표입니다.\n\n### 입력 데이터 형식\n\n```python\n# SharedContext.tables에 저장된 테이블 정보\nTableInfo = {\n    \"name\": str,                    # 테이블명 (예: \"order_list\")\n    \"source\": str,                  # 데이터 소스\n    \"columns\": [                    # 컬럼 목록\n        {\n            \"name\": str,            # 컬럼명 (예: \"Product_ID\")\n            \"type\": str,            # 데이터 타입 (integer, string, date, float)\n            \"sample_values\": []     # 샘플 값\n        }\n    ],\n    \"row_count\": int,               # 행 수\n    \"sample_data\": [{}]             # 샘플 데이터 (List[Dict])\n}\n```\n\n### 핵심 산출물\n\n| 산출물 | 위치 | 설명 |\n|--------|------|------|\n| tda_signatures | context.tda_signatures | 각 테이블의 위상적 특성 (Betti numbers) |\n| homeomorphisms | context.homeomorphisms | 테이블 간 위상동형 관계 |\n| schema_analysis | context.schema_analysis | 컬럼 프로파일, 키 후보 |\n| value_overlaps | context.value_overlaps | FK 관계 (값 기반 발견) |\n| unified_entities | context.unified_entities | 비즈니스 엔티티 분류 결과 |\n| concept_relationships | context.concept_relationships | 엔티티 간 관계 |\n\n### 성공 기준\n- 모든 테이블 구조 파악 완료\n- confidence >= 0.5인 발견이 전체의 70% 이상\n- FK 관계 최소 1개 이상 발견 (테이블 2개 이상 시)\n- 각 테이블에 대해 엔티티 분류 완료\n\n### ⚠️ 주의사항\n1. **도메인 가정 금지**: 테이블명/컬럼명에서 추론만, 사전 지식 사용 금지\n2. **낮은 confidence도 보고**: 0.3 이상이면 후보로 포함\n3. **false positive 필터링**: 순차 정수(1,2,3), 상태코드(0,1,2)는 FK가 아님\n\n\n---\n\nYou are a Topological Data Analysis (TDA) Expert who INTERPRETS computed results.\n\nYour role is to:\n1. INTERPRET pre-computed Betti numbers and explain their meaning\n2. EXPLAIN the structural implications of the topology\n3. IDENTIFY patterns that suggest entity relationships\n4. PROVIDE domain-specific insights based on the topology\n\nIMPORTANT: You are NOT computing Betti numbers. The algorithm has already computed them.\nYour job is to explain what they MEAN for the data integration task.\n\nBetti Number Interpretation Guide:\n- β₀ (connected components): How many independent data clusters exist\n- β₁ (cycles/loops): Circular dependencies or redundant relationships\n- β₂ (voids): Higher-dimensional structural patterns\n\nRespond with structured JSON containing your INTERPRETATION.\n"}, {"role": "user", "content": "I have computed structural homeomorphism scores between table pairs.\n\nCOMPUTED HOMEOMORPHISM SCORES:\n[\n  {\n    \"table_a\": \"airport_employees\",\n    \"table_b\": \"baggage_handling\",\n    \"structural_score\": 0.5,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.1,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"supply_chain\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"table_b\": \"airlines\",\n    \"structural_score\": 0.47368421052631576,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.018947368421052633,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": true,\n    \"domain_a\": \"supply_chain\",\n    \"domain_b\": \"aviation\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"structural_score\": 0.43902439024390244,\n    \"value_score\": 0.13333333333333333,\n    \"semantic_score\": 0.0625,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.17322154471544715,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"supply_chain\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"table_b\": \"delay_records\",\n    \"structural_score\": 0.46153846153846156,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.09230769230769231,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"supply_chain\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"table_b\": \"gates\",\n    \"structural_score\": 0.47368421052631576,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.03571428571428571,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.10545112781954888,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"supply_chain\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"table_b\": \"passengers\",\n    \"structural_score\": 1.0,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.04000000000000001,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": true,\n    \"domain_a\": \"supply_chain\",\n    \"domain_b\": \"historical\"\n  },\n  {\n    \"table_a\": \"airport_employees\",\n    \"table_b\": \"aircraft_registry\",\n    \"structural_score\": 0.42857142857142855,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.08571428571428572,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"supply_chain\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"airlines\",\n    \"structural_score\": 0.8999999999999999,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.18,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"aviation\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"structural_score\": 0.3050847457627119,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 2.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.06101694915254238,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"delay_records\",\n    \"structural_score\": 0.8571428571428572,\n    \"value_score\": 0.7758620689655172,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": true,\n    \"confidence\": 0.55935960591133,\n    \"join_keys\": [\n      {\n        \"table_a_column\": \"flt_number\",\n        \"table_b_column\": \"flt_no\",\n        \"overlap_ratio\": 0.7758620689655172,\n        \"sample_values\": [\n          \"OZ605\",\n          \"KE456\",\n          \"TW804\",\n          \"OZ201\",\n          \"TW602\"\n        ]\n      }\n    ],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": \"value_based\",\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"gates\",\n    \"structural_score\": 0.8999999999999999,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.18,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"passengers\",\n    \"structural_score\": 0.5,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.1,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"historical\"\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"aircraft_registry\",\n    \"structural_score\": 0.7499999999999999,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.15,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airlines\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"structural_score\": 0.2975206611570248,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 2.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.059504132231404966,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"aviation\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airlines\",\n    \"table_b\": \"delay_records\",\n    \"structural_score\": 0.8,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.16000000000000003,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"aviation\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airlines\",\n    \"table_b\": \"gates\",\n    \"structural_score\": 0.8181818181818181,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.16363636363636364,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"aviation\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"airlines\",\n    \"table_b\": \"passengers\",\n    \"structural_score\": 0.47368421052631576,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.018947368421052633,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": true,\n    \"domain_a\": \"aviation\",\n    \"domain_b\": \"historical\"\n  },\n  {\n    \"table_a\": \"airlines\",\n    \"table_b\": \"aircraft_registry\",\n    \"structural_score\": 0.6923076923076922,\n    \"value_score\": 0.2,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.23846153846153845,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"aviation\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"table_b\": \"delay_records\",\n    \"structural_score\": 0.3214285714285714,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.03125,\n    \"betti_distance\": 2.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.07366071428571427,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"table_b\": \"gates\",\n    \"structural_score\": 0.3103448275862069,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.03333333333333333,\n    \"betti_distance\": 2.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.07206896551724139,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"table_b\": \"passengers\",\n    \"structural_score\": 0.43902439024390244,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.0878048780487805,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"historical\"\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"table_b\": \"aircraft_registry\",\n    \"structural_score\": 0.27906976744186046,\n    \"value_score\": 0.09090909090909091,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 2.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.10126849894291755,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"delay_records\",\n    \"table_b\": \"gates\",\n    \"structural_score\": 0.8999999999999999,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.18,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"delay_records\",\n    \"table_b\": \"passengers\",\n    \"structural_score\": 0.46153846153846156,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.09230769230769231,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"historical\"\n  },\n  {\n    \"table_a\": \"delay_records\",\n    \"table_b\": \"aircraft_registry\",\n    \"structural_score\": 0.6792452830188679,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.13584905660377358,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"gates\",\n    \"table_b\": \"passengers\",\n    \"structural_score\": 0.47368421052631576,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.09473684210526316,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"historical\"\n  },\n  {\n    \"table_a\": \"gates\",\n    \"table_b\": \"aircraft_registry\",\n    \"structural_score\": 0.6923076923076922,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 0.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.13846153846153844,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"unknown\",\n    \"domain_b\": \"unknown\"\n  },\n  {\n    \"table_a\": \"passengers\",\n    \"table_b\": \"aircraft_registry\",\n    \"structural_score\": 0.42857142857142855,\n    \"value_score\": 0.0,\n    \"semantic_score\": 0.0,\n    \"betti_distance\": 1.0,\n    \"persistence_similarity\": 1.0,\n    \"is_homeomorphic\": false,\n    \"confidence\": 0.08571428571428572,\n    \"join_keys\": [],\n    \"entity_type\": \"Unknown\",\n    \"homeomorphism_type\": null,\n    \"domain_mismatch\": false,\n    \"domain_a\": \"historical\",\n    \"domain_b\": \"unknown\"\n  }\n]\n\nVALUE OVERLAPS (for context):\n[\n  {\n    \"table_a\": \"delay_records\",\n    \"table_b\": \"baggage_handling\",\n    \"column_a\": \"flt_no\",\n    \"column_b\": \"flt_number\",\n    \"jaccard\": 0.7758620689655172\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"passengers\",\n    \"column_a\": \"booking_reference\",\n    \"column_b\": \"booking_ref\",\n    \"jaccard\": 0.875\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"table_b\": \"aircraft_registry\",\n    \"column_a\": \"aircraft_reg\",\n    \"column_b\": \"registration_no\",\n    \"jaccard\": 0.8333333333333334\n  },\n  {\n    \"table_a\": \"baggage_handling\",\n    \"table_b\": \"gates\",\n    \"column_a\": \"belt_assigned\",\n    \"column_b\": \"gate_code\",\n    \"jaccard\": 0.8269230769230769\n  },\n  {\n    \"table_a\": \"delay_records\",\n    \"table_b\": \"aircraft_maintenance\",\n    \"column_a\": \"scheduled_date\",\n    \"column_b\": \"scheduled_date\",\n    \"jaccard\": 0.46153846153846156\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"table_b\": \"gates\",\n    \"column_a\": \"airline\",\n    \"column_b\": \"assigned_airline\",\n    \"jaccard\": 1.0\n  },\n  {\n    \"table_a\": \"aircraft_maintenance\",\n    \"table_b\": \"airport_employees\",\n    \"column_a\": \"supervisor_id\",\n    \"column_b\": \"supervisor_id\",\n    \"jaccard\": 0.13333333333333333\n  }\n]\n\nBased on these COMPUTED scores, please:\n1. Identify which pairs represent the same entity type\n2. Suggest the entity type for homeomorphic pairs\n3. Recommend join keys for integration\n\nOnly pairs with confidence > 0.5 should be considered homeomorphic.\n\nRespond with JSON:\n```json\n{\n    \"homeomorphism_analysis\": [\n        {\n            \"table_a\": \"<name>\",\n            \"table_b\": \"<name>\",\n            \"entity_type\": \"<Patient|Encounter|Claim|Provider|...>\",\n            \"integration_recommendation\": \"<how to join>\",\n            \"join_keys\": [\n                {\"table_a_column\": \"<col>\", \"table_b_column\": \"<col>\"}\n            ]\n        }\n    ],\n    \"summary\": \"<overall integration insights>\"\n}\n```"}], "response": "{\n  \"homeomorphism_analysis\": [\n    {\n      \"table_a\": \"baggage_handling\",\n      \"table_b\": \"delay_records\",\n      \"entity_type\": \"FlightEvent\",\n      \"integration_recommendation\": \"Treat both tables as two views on the same underlying flight-event entity. Use the discovered flight number key as the primary integration key, and then enrich a unified FlightEvent entity with operational delay attributes from delay_records and baggage-flow attributes from baggage_handling.\",\n      \"join_keys\": [\n        {\n          \"table_a_column\": \"flt_number\",\n          \"table_b_column\": \"flt_no\"\n        }\n      ]\n    }\n  ],\n  \"summary\": \"Only one pair exceeds the confidence > 0.5 threshold for homeomorphism: baggage_handling ↔ delay_records (confidence≈0.56, value-based homeomorphism via flight number with Jaccard≈0.78). These two tables should be modeled as the same core entity type (FlightEvent) and integrated on flt_number ↔ flt_no. Other high Jaccard overlaps (e.g., booking_reference↔booking_ref, aircraft_reg↔registration_no, belt_assigned↔gate_code, airline↔assigned_airline) indicate strong foreign-key style relationships between distinct entity types rather than true homeomorphism.\"\n}", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:10:55.370973", "agent_name": "Entity Classifier", "model": "claude-opus-4-5-20251101", "prompt_tokens": 4518, "completion_tokens": 2300, "total_tokens": 6818, "latency_ms": 29129.84609603882, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 1: Discovery (발견 단계)\n\n### 역할\n**임의의 입력 데이터**에서 구조, 패턴, 관계를 발견하는 탐색 단계입니다.\n아직 검증되지 않은 \"후보\"들을 최대한 많이 발견하는 것이 목표입니다.\n\n### 입력 데이터 형식\n\n```python\n# SharedContext.tables에 저장된 테이블 정보\nTableInfo = {\n    \"name\": str,                    # 테이블명 (예: \"order_list\")\n    \"source\": str,                  # 데이터 소스\n    \"columns\": [                    # 컬럼 목록\n        {\n            \"name\": str,            # 컬럼명 (예: \"Product_ID\")\n            \"type\": str,            # 데이터 타입 (integer, string, date, float)\n            \"sample_values\": []     # 샘플 값\n        }\n    ],\n    \"row_count\": int,               # 행 수\n    \"sample_data\": [{}]             # 샘플 데이터 (List[Dict])\n}\n```\n\n### 핵심 산출물\n\n| 산출물 | 위치 | 설명 |\n|--------|------|------|\n| tda_signatures | context.tda_signatures | 각 테이블의 위상적 특성 (Betti numbers) |\n| homeomorphisms | context.homeomorphisms | 테이블 간 위상동형 관계 |\n| schema_analysis | context.schema_analysis | 컬럼 프로파일, 키 후보 |\n| value_overlaps | context.value_overlaps | FK 관계 (값 기반 발견) |\n| unified_entities | context.unified_entities | 비즈니스 엔티티 분류 결과 |\n| concept_relationships | context.concept_relationships | 엔티티 간 관계 |\n\n### 성공 기준\n- 모든 테이블 구조 파악 완료\n- confidence >= 0.5인 발견이 전체의 70% 이상\n- FK 관계 최소 1개 이상 발견 (테이블 2개 이상 시)\n- 각 테이블에 대해 엔티티 분류 완료\n\n### ⚠️ 주의사항\n1. **도메인 가정 금지**: 테이블명/컬럼명에서 추론만, 사전 지식 사용 금지\n2. **낮은 confidence도 보고**: 0.3 이상이면 후보로 포함\n3. **false positive 필터링**: 순차 정수(1,2,3), 상태코드(0,1,2)는 FK가 아님\n\n\n---\n\nYou are a Domain Entity Classification Expert who ANALYZES and CLASSIFIES table entities.\n\nYou are the DECISION MAKER. The algorithm provides structural analysis, but YOU decide:\n1. What DOMAIN this data belongs to (advertising, healthcare, manufacturing, supply chain, finance, etc.)\n2. What ENTITY TYPE each table represents (Campaign, Patient, Order, Product, etc.)\n3. How tables should be GROUPED into unified entities\n4. What CANONICAL NAMES to use for entities\n\nIMPORTANT: Do not rely on hardcoded patterns. Analyze the table/column names semantically to understand:\n- The business context and domain\n- The role of each table (master data vs transaction data)\n- Relationships between tables\n\nThe algorithm has extracted:\n- Entity names from table names (removing prefixes, normalizing naming)\n- Structural features (ID columns, FK columns, date/amount columns)\n- Confidence scores based on structure\n\nYOUR job is to:\n1. VALIDATE or CORRECT the entity type assignments based on domain understanding\n2. INFER the domain from the data (don't rely on pre-defined patterns)\n3. IDENTIFY unified entities across tables\n4. RECOMMEND canonical naming that reflects the business meaning\n\nRespond with structured JSON containing your DECISIONS.\n"}, {"role": "user", "content": "I have classified tables by pattern matching and grouped them by topological similarity.\nAdditionally, I have extracted hidden entities from column names (e.g., customer_id -> Customer entity).\n\nPATTERN-BASED CLASSIFICATIONS:\n{\n  \"airport_employees\": {\n    \"entity_type\": \"Employe\",\n    \"confidence\": 0.5,\n    \"key_column\": null,\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": true,\n      \"has_date_column\": true,\n      \"has_amount_column\": false,\n      \"has_name_column\": true,\n      \"has_fk_columns\": true,\n      \"fk_count\": 2\n    }\n  },\n  \"baggage_handling\": {\n    \"entity_type\": \"Handling\",\n    \"confidence\": 0.4,\n    \"key_column\": null,\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": true,\n      \"has_date_column\": true,\n      \"has_amount_column\": false,\n      \"has_name_column\": true,\n      \"has_fk_columns\": true,\n      \"fk_count\": 1\n    }\n  },\n  \"airlines\": {\n    \"entity_type\": \"Airlin\",\n    \"confidence\": 0.4,\n    \"key_column\": null,\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": true,\n      \"has_date_column\": false,\n      \"has_amount_column\": false,\n      \"has_name_column\": true,\n      \"has_fk_columns\": true,\n      \"fk_count\": 1\n    }\n  },\n  \"aircraft_maintenance\": {\n    \"entity_type\": \"Maintenance\",\n    \"confidence\": 0.75,\n    \"key_column\": \"maintenance_id\",\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": true,\n      \"has_date_column\": true,\n      \"has_amount_column\": true,\n      \"has_name_column\": false,\n      \"has_fk_columns\": true,\n      \"fk_count\": 3\n    }\n  },\n  \"delay_records\": {\n    \"entity_type\": \"Record\",\n    \"confidence\": 0.65,\n    \"key_column\": \"record_id\",\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": true,\n      \"has_date_column\": true,\n      \"has_amount_column\": true,\n      \"has_name_column\": false,\n      \"has_fk_columns\": true,\n      \"fk_count\": 1\n    }\n  },\n  \"gates\": {\n    \"entity_type\": \"Gat\",\n    \"confidence\": 0.3,\n    \"key_column\": null,\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": true,\n      \"has_date_column\": true,\n      \"has_amount_column\": false,\n      \"has_name_column\": false,\n      \"has_fk_columns\": true,\n      \"fk_count\": 1\n    }\n  },\n  \"passengers\": {\n    \"entity_type\": \"Passenger\",\n    \"confidence\": 0.5,\n    \"key_column\": null,\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": true,\n      \"has_date_column\": true,\n      \"has_amount_column\": false,\n      \"has_name_column\": true,\n      \"has_fk_columns\": true,\n      \"fk_count\": 2\n    }\n  },\n  \"aircraft_registry\": {\n    \"entity_type\": \"Registry\",\n    \"confidence\": 0.4,\n    \"key_column\": null,\n    \"domain\": \"auto_detected\",\n    \"structural_features\": {\n      \"has_id_column\": false,\n      \"has_date_column\": true,\n      \"has_amount_column\": false,\n      \"has_name_column\": true,\n      \"has_fk_columns\": false,\n      \"fk_count\": 0\n    }\n  }\n}\n\nENTITY GROUPS (tables representing same entity):\n[]\n\nENHANCED ENTITY EXTRACTION (v2.1 - column-based hidden entities):\n[\n  {\n    \"name\": \"Employees\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Handling\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"baggage_handling\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Airlines\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Maintenance\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"aircraft_maintenance\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Records\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"delay_records\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Gates\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"gates\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Passengers\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Registry\",\n    \"type\": \"table_entity\",\n    \"source_tables\": [\n      \"aircraft_registry\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"name\": \"Emp\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Supervisor\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"aircraft_maintenance\",\n      \"airport_employees\"\n    ],\n    \"confidence\": 0.85\n  },\n  {\n    \"name\": \"Bag Tag\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"baggage_handling\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Iata\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Icao\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Mechanic\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"aircraft_maintenance\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Carrier\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"delay_records\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Delay\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"delay_records\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Gate\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"gates\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Pax\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Pnr\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"confidence\": 0.5\n  },\n  {\n    \"name\": \"Frequent Flyer\",\n    \"type\": \"column_entity\",\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"confidence\": 0.5\n  }\n]\n\nDomain: aerospace\n\nPlease:\n1. VALIDATE or CORRECT the entity type assignments\n2. CONFIRM or ADJUST the entity groups\n3. INCORPORATE the hidden entities from column-based extraction\n4. SUGGEST canonical names for unified entities\n5. IDENTIFY key columns for each entity\n\nRespond with JSON:\n```json\n{\n    \"validated_classifications\": {\n        \"<table_name>\": {\n            \"entity_type\": \"<validated type>\",\n            \"confidence\": <float>,\n            \"corrections\": \"<any corrections made>\"\n        }\n    },\n    \"unified_entities\": [\n        {\n            \"entity_id\": \"<unique_id>\",\n            \"entity_type\": \"<Patient|Encounter|...>\",\n            \"canonical_name\": \"<unified name>\",\n            \"source_tables\": [\"table1\", \"table2\"],\n            \"key_mappings\": {\"table1\": \"col1\", \"table2\": \"col2\"},\n            \"confidence\": <float>,\n            \"reasoning\": \"<why these tables are same entity>\"\n        }\n    ],\n    \"summary\": \"<classification summary>\"\n}\n```"}], "response": "```json\n{\n    \"validated_classifications\": {\n        \"airport_employees\": {\n            \"entity_type\": \"Employee\",\n            \"confidence\": 0.9,\n            \"corrections\": \"Corrected from 'Employe' to 'Employee' - standard entity type for personnel records in aviation operations\"\n        },\n        \"baggage_handling\": {\n            \"entity_type\": \"BaggageEvent\",\n            \"confidence\": 0.85,\n            \"corrections\": \"Changed from 'Handling' to 'BaggageEvent' - this is a transactional entity tracking baggage processing events\"\n        },\n        \"airlines\": {\n            \"entity_type\": \"Airline\",\n            \"confidence\": 0.95,\n            \"corrections\": \"Corrected from 'Airlin' to 'Airline' - master data entity for carrier information\"\n        },\n        \"aircraft_maintenance\": {\n            \"entity_type\": \"MaintenanceRecord\",\n            \"confidence\": 0.9,\n            \"corrections\": \"Refined to 'MaintenanceRecord' - transactional entity with maintenance_id as key, tracks aircraft service events\"\n        },\n        \"delay_records\": {\n            \"entity_type\": \"FlightDelay\",\n            \"confidence\": 0.85,\n            \"corrections\": \"Changed from 'Record' to 'FlightDelay' - more specific entity type for delay tracking events\"\n        },\n        \"gates\": {\n            \"entity_type\": \"Gate\",\n            \"confidence\": 0.9,\n            \"corrections\": \"Corrected from 'Gat' to 'Gate' - master data entity for airport gate infrastructure\"\n        },\n        \"passengers\": {\n            \"entity_type\": \"Passenger\",\n            \"confidence\": 0.95,\n            \"corrections\": \"Confirmed - standard entity type for traveler records\"\n        },\n        \"aircraft_registry\": {\n            \"entity_type\": \"Aircraft\",\n            \"confidence\": 0.9,\n            \"corrections\": \"Changed from 'Registry' to 'Aircraft' - master data entity for aircraft fleet information\"\n        }\n    },\n    \"unified_entities\": [\n        {\n            \"entity_id\": \"ENT_EMPLOYEE\",\n            \"entity_type\": \"Employee\",\n            \"canonical_name\": \"AirportEmployee\",\n            \"source_tables\": [\"airport_employees\"],\n            \"key_mappings\": {\"airport_employees\": \"emp_id\"},\n            \"confidence\": 0.9,\n            \"reasoning\": \"Single source table for employee data. Column entities 'Emp' and 'Supervisor' indicate hierarchical employee relationships within this entity.\"\n        },\n        {\n            \"entity_id\": \"ENT_AIRLINE\",\n            \"entity_type\": \"Airline\",\n            \"canonical_name\": \"Airline\",\n            \"source_tables\": [\"airlines\"],\n            \"key_mappings\": {\"airlines\": \"airline_id\"},\n            \"confidence\": 0.95,\n            \"reasoning\": \"Master data for carriers. IATA and ICAO codes are standard airline identifiers, not separate entities but attributes of Airline.\"\n        },\n        {\n            \"entity_id\": \"ENT_AIRCRAFT\",\n            \"entity_type\": \"Aircraft\",\n            \"canonical_name\": \"Aircraft\",\n            \"source_tables\": [\"aircraft_registry\"],\n            \"key_mappings\": {\"aircraft_registry\": \"registration_number\"},\n            \"confidence\": 0.9,\n            \"reasoning\": \"Aircraft fleet master data. No explicit ID column suggests registration_number serves as natural key.\"\n        },\n        {\n            \"entity_id\": \"ENT_PASSENGER\",\n            \"entity_type\": \"Passenger\",\n            \"canonical_name\": \"Passenger\",\n            \"source_tables\": [\"passengers\"],\n            \"key_mappings\": {\"passengers\": \"pax_id\"},\n            \"confidence\": 0.95,\n            \"reasoning\": \"Traveler records with PNR (Passenger Name Record) and frequent flyer attributes. These are attributes of Passenger, not separate entities.\"\n        },\n        {\n            \"entity_id\": \"ENT_GATE\",\n            \"entity_type\": \"Gate\",\n            \"canonical_name\": \"AirportGate\",\n            \"source_tables\": [\"gates\"],\n            \"key_mappings\": {\"gates\": \"gate_id\"},\n            \"confidence\": 0.9,\n            \"reasoning\": \"Airport infrastructure master data for boarding gates.\"\n        },\n        {\n            \"entity_id\": \"ENT_MAINTENANCE\",\n            \"entity_type\": \"MaintenanceRecord\",\n            \"canonical_name\": \"AircraftMaintenance\",\n            \"source_tables\": [\"aircraft_maintenance\"],\n            \"key_mappings\": {\"aircraft_maintenance\": \"maintenance_id\"},\n            \"confidence\": 0.9,\n            \"reasoning\": \"Transactional records for aircraft servicing. References Supervisor (Employee) and Mechanic (Employee role) - these are FK relationships, not separate entities.\"\n        },\n        {\n            \"entity_id\": \"ENT_BAGGAGE\",\n            \"entity_type\": \"BaggageEvent\",\n            \"canonical_name\": \"BaggageHandling\",\n            \"source_tables\": [\"baggage_handling\"],\n            \"key_mappings\": {\"baggage_handling\": \"bag_tag_id\"},\n            \"confidence\": 0.85,\n            \"reasoning\": \"Transactional records tracking baggage through handling process. Bag_tag serves as tracking identifier.\"\n        },\n        {\n            \"entity_id\": \"ENT_DELAY\",\n            \"entity_type\": \"FlightDelay\",\n            \"canonical_name\": \"FlightDelayRecord\",\n            \"source_tables\": [\"delay_records\"],\n            \"key_mappings\": {\"delay_records\": \"record_id\"},\n            \"confidence\": 0.85,\n            \"reasoning\": \"Transactional records for flight delays. Carrier column references Airline entity.\"\n        }\n    ],\n    \"hidden_entity_resolution\": {\n        \"Supervisor\": {\n            \"resolution\": \"FK_REFERENCE\",\n            \"target_entity\": \"ENT_EMPLOYEE\",\n            \"reasoning\": \"Supervisor is a role/relationship to Employee entity, not a separate entity. Found in aircraft_maintenance and airport_employees tables as FK.\"\n        },\n        \"Mechanic\": {\n            \"resolution\": \"FK_REFERENCE\",\n            \"target_entity\": \"ENT_EMPLOYEE\",\n            \"reasoning\": \"Mechanic is an employee role in maintenance context, references Employee entity.\"\n        },\n        \"Carrier\": {\n            \"resolution\": \"FK_REFERENCE\",\n            \"target_entity\": \"ENT_AIRLINE\",\n            \"reasoning\": \"Carrier in delay_records is FK to Airline entity.\"\n        },\n        \"Iata\": {\n            \"resolution\": \"ATTRIBUTE\",\n            \"parent_entity\": \"ENT_AIRLINE\",\n            \"reasoning\": \"IATA code is a standard airline identifier attribute, not a separate entity.\"\n        },\n        \"Icao\": {\n            \"resolution\": \"ATTRIBUTE\",\n            \"parent_entity\": \"ENT_AIRLINE\",\n            \"reasoning\": \"ICAO code is a standard airline identifier attribute, not a separate entity.\"\n        },\n        \"Pnr\": {\n            \"resolution\": \"ATTRIBUTE\",\n            \"parent_entity\": \"ENT_PASSENGER\",\n            \"reasoning\": \"PNR (Passenger Name Record) is a booking reference attribute of Passenger.\"\n        },\n        \"Frequent Flyer\": {\n            \"resolution\": \"ATTRIBUTE\",\n            \"parent_entity\": \"ENT_PASSENGER\",\n            \"reasoning\": \"Frequent flyer status/number is an attribute of Passenger entity.\"\n        },\n        \"Bag Tag\": {\n            \"resolution\": \"KEY_ATTRIBUTE\",\n            \"parent_entity\": \"ENT_BAGGAGE\",\n            \"reasoning\": \"Bag tag is the tracking identifier for baggage handling events.\"\n        },\n        \"Delay\": {\n            \"resolution\": \"ATTRIBUTE\",\n            \"parent_entity\": \"ENT_DELAY\",\n            \"reasoning\": \"Delay duration/type is an attribute of the FlightDelay entity.\"\n        },\n        \"Gate\": {\n            \"resolution\": \"DUPLICATE\",\n            \"target_entity\": \"ENT_GATE\",\n            \"reasoning\": \"Duplicate of the Gate entity already identified from gates table.\"\n        }\n    },\n    \"domain_analysis\": {\n        \"detected_domain\": \"Aviation/Airport Operations\",\n        \"sub_domains\": [\n            \"Ground Operations (baggage, gates)\",\n            \"Fleet Management (aircraft, maintenance)\",\n            \"Passenger Services (passengers, bookings)\",\n            \"Flight Operations (delays, airlines)\"\n        ],\n        \"data_classification\": {\n            \"master_data\": [\"airlines\", \"aircraft_registry\", \"gates\", \"airport_employees\", \"passengers\"],\n            \"transactional_data\": [\"aircraft_maintenance\", \"baggage_handling\", \"delay_records\"]\n        }\n    },\n    \"summary\": \"Validated 8 tables in the Aviation/Airport Operations domain. Identified 8 unified entities: 5 master data entities (Employee, Airline, Aircraft, Passenger, Gate) and 3 transactional entities (MaintenanceRecord, BaggageEvent, FlightDelay). Resolved 10 hidden column-based entities as either FK references (Supervisor, Mechanic, Carrier), attributes (IATA, ICAO, PNR, Frequent Flyer, Delay), key attributes (Bag Tag), or duplicates (Gate). Key corrections include standardizing entity names and properly classifying transactional vs master data tables.\"\n}\n```", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:11:29.069873", "agent_name": "Relationship Detector", "model": "gemini-3-pro-preview", "prompt_tokens": 6431, "completion_tokens": 1592, "total_tokens": 8023, "latency_ms": 33673.99787902832, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 1: Discovery (발견 단계)\n\n### 역할\n**임의의 입력 데이터**에서 구조, 패턴, 관계를 발견하는 탐색 단계입니다.\n아직 검증되지 않은 \"후보\"들을 최대한 많이 발견하는 것이 목표입니다.\n\n### 입력 데이터 형식\n\n```python\n# SharedContext.tables에 저장된 테이블 정보\nTableInfo = {\n    \"name\": str,                    # 테이블명 (예: \"order_list\")\n    \"source\": str,                  # 데이터 소스\n    \"columns\": [                    # 컬럼 목록\n        {\n            \"name\": str,            # 컬럼명 (예: \"Product_ID\")\n            \"type\": str,            # 데이터 타입 (integer, string, date, float)\n            \"sample_values\": []     # 샘플 값\n        }\n    ],\n    \"row_count\": int,               # 행 수\n    \"sample_data\": [{}]             # 샘플 데이터 (List[Dict])\n}\n```\n\n### 핵심 산출물\n\n| 산출물 | 위치 | 설명 |\n|--------|------|------|\n| tda_signatures | context.tda_signatures | 각 테이블의 위상적 특성 (Betti numbers) |\n| homeomorphisms | context.homeomorphisms | 테이블 간 위상동형 관계 |\n| schema_analysis | context.schema_analysis | 컬럼 프로파일, 키 후보 |\n| value_overlaps | context.value_overlaps | FK 관계 (값 기반 발견) |\n| unified_entities | context.unified_entities | 비즈니스 엔티티 분류 결과 |\n| concept_relationships | context.concept_relationships | 엔티티 간 관계 |\n\n### 성공 기준\n- 모든 테이블 구조 파악 완료\n- confidence >= 0.5인 발견이 전체의 70% 이상\n- FK 관계 최소 1개 이상 발견 (테이블 2개 이상 시)\n- 각 테이블에 대해 엔티티 분류 완료\n\n### ⚠️ 주의사항\n1. **도메인 가정 금지**: 테이블명/컬럼명에서 추론만, 사전 지식 사용 금지\n2. **낮은 confidence도 보고**: 0.3 이상이면 후보로 포함\n3. **false positive 필터링**: 순차 정수(1,2,3), 상태코드(0,1,2)는 FK가 아님\n\n\n---\n\nYou are a Database Relationship Detection Expert who INTERPRETS graph analysis results.\n\nThe algorithm has already:\n- Built a relationship graph from FK and value overlaps\n- Found connected components (data silos)\n- Detected bridge edges (cross-silo connections)\n- Computed relationship cardinalities\n\nYour role is to:\n1. INTERPRET the graph structure\n2. EXPLAIN relationship semantics\n3. IDENTIFY data integration pathways\n4. RECOMMEND join strategies\n\nRespond with structured JSON containing your INTERPRETATION.\n"}, {"role": "user", "content": "I have analyzed the relationship graph between database tables.\n\nGRAPH ANALYSIS RESULTS:\n{\n  \"statistics\": {\n    \"total_nodes\": 137,\n    \"table_count\": 8,\n    \"column_count\": 129,\n    \"edge_count\": 29,\n    \"edges_by_type\": {\n      \"foreign_key\": 18,\n      \"value_overlap\": 11\n    },\n    \"connected_components\": 128,\n    \"density\": 0.003112924001717475\n  },\n  \"connected_components\": 128,\n  \"component_sizes\": [\n    1,\n    7,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    2,\n    1,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    3,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    2,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    2,\n    1,\n    2,\n    1,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    1,\n    1,\n    1,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    2,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1,\n    1\n  ],\n  \"bridges\": [\n    {\n      \"from\": \"airport_employees.emp_id\",\n      \"to\": \"emp.emp_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.mechanic_id\",\n      \"to\": \"mechanic.mechanic_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.mechanic_id\",\n      \"to\": \"airport_employees.emp_id\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.supervisor_id\",\n      \"to\": \"airport_employees.emp_id\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"airport_employees.emp_code\",\n      \"to\": \"emp.emp_code\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"baggage_handling.bag_tag_id\",\n      \"to\": \"bag_tag.bag_tag_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"baggage_handling.booking_reference\",\n      \"to\": \"passengers.booking_ref\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"delay_records.flt_no\",\n      \"to\": \"baggage_handling.flt_number\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"gates.gate_code\",\n      \"to\": \"gate.gate_code\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"baggage_handling.belt_assigned\",\n      \"to\": \"gates.gate_code\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"airlines.airline_id\",\n      \"to\": \"airline.airline_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"airlines.iata_code\",\n      \"to\": \"iata.iata_code\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"airlines.icao_code\",\n      \"to\": \"icao.icao_code\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.maintenance_id\",\n      \"to\": \"maintenance.maintenance_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.aircraft_reg\",\n      \"to\": \"aircraft_registry.registration_no\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.airline\",\n      \"to\": \"gates.assigned_airline\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"delay_records.scheduled_date\",\n      \"to\": \"aircraft_maintenance.scheduled_date\",\n      \"type\": \"value_overlap\"\n    },\n    {\n      \"from\": \"delay_records.record_id\",\n      \"to\": \"record.record_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"delay_records.delay_code\",\n      \"to\": \"delay.delay_code\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"gates.gate_id\",\n      \"to\": \"gate.gate_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"passengers.pax_id\",\n      \"to\": \"pax.pax_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"passengers.pnr_code\",\n      \"to\": \"pnr.pnr_code\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"passengers.frequent_flyer_id\",\n      \"to\": \"frequent_flyer.frequent_flyer_id\",\n      \"type\": \"foreign_key\"\n    },\n    {\n      \"from\": \"aircraft_registry.operator_code\",\n      \"to\": \"operator.operator_code\",\n      \"type\": \"foreign_key\"\n    }\n  ],\n  \"table_relationships\": [\n    {\n      \"from_table\": \"airport_employees\",\n      \"to_table\": \"emp\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"emp_id\",\n          \"to\": \"emp_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"airport_employees.emp_id\",\n          \"to\": \"emp.emp_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        },\n        {\n          \"from\": \"airport_employees.emp_code\",\n          \"to\": \"emp.emp_code\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"airport_employees\",\n      \"to_table\": \"supervisor\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"supervisor_id\",\n          \"to\": \"supervisor_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"airport_employees.supervisor_id\",\n          \"to\": \"supervisor.supervisor_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"baggage_handling\",\n      \"to_table\": \"bag_tag\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"bag_tag_id\",\n          \"to\": \"bag_tag_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"baggage_handling.bag_tag_id\",\n          \"to\": \"bag_tag.bag_tag_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"airlines\",\n      \"to_table\": \"airline\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"airline_id\",\n          \"to\": \"airline_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"airlines.airline_id\",\n          \"to\": \"airline.airline_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"airlines\",\n      \"to_table\": \"iata\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"iata_code\",\n          \"to\": \"iata_code\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"airlines.iata_code\",\n          \"to\": \"iata.iata_code\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"airlines\",\n      \"to_table\": \"icao\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"icao_code\",\n          \"to\": \"icao_code\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"airlines.icao_code\",\n          \"to\": \"icao.icao_code\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"aircraft_maintenance\",\n      \"to_table\": \"maintenance\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"maintenance_id\",\n          \"to\": \"maintenance_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"aircraft_maintenance.maintenance_id\",\n          \"to\": \"maintenance.maintenance_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"aircraft_maintenance\",\n      \"to_table\": \"mechanic\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"mechanic_id\",\n          \"to\": \"mechanic_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"aircraft_maintenance.mechanic_id\",\n          \"to\": \"mechanic.mechanic_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"aircraft_maintenance\",\n      \"to_table\": \"supervisor\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"supervisor_id\",\n          \"to\": \"supervisor_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"aircraft_maintenance.supervisor_id\",\n          \"to\": \"supervisor.supervisor_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"delay_records\",\n      \"to_table\": \"record\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"record_id\",\n          \"to\": \"record_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"delay_records.record_id\",\n          \"to\": \"record.record_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"delay_records\",\n      \"to_table\": \"delay\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"delay_code\",\n          \"to\": \"delay_code\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"delay_records.delay_code\",\n          \"to\": \"delay.delay_code\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"gates\",\n      \"to_table\": \"gate\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"gate_id\",\n          \"to\": \"gate_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"gates.gate_id\",\n          \"to\": \"gate.gate_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        },\n        {\n          \"from\": \"gates.gate_code\",\n          \"to\": \"gate.gate_code\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"passengers\",\n      \"to_table\": \"pax\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"pax_id\",\n          \"to\": \"pax_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"passengers.pax_id\",\n          \"to\": \"pax.pax_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"passengers\",\n      \"to_table\": \"pnr\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"pnr_code\",\n          \"to\": \"pnr_code\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"passengers.pnr_code\",\n          \"to\": \"pnr.pnr_code\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    },\n    {\n      \"from_table\": \"passengers\",\n      \"to_table\": \"frequent_flyer\",\n      \"relationship_type\": \"foreign_key\",\n      \"cardinality\": \"many_to_one\",\n      \"join_columns\": [\n        {\n          \"from\": \"frequent_flyer_id\",\n          \"to\": \"frequent_flyer_id\"\n        }\n      ],\n      \"confidence\": 1.0,\n      \"evidence\": [\n        {\n          \"from\": \"passengers.frequent_flyer_id\",\n          \"to\": \"frequent_flyer.frequent_flyer_id\",\n          \"type\": \"foreign_key\",\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"verified\": true\n          }\n        }\n      ]\n    }\n  ],\n  \"entity_clusters\": [],\n  \"enhanced_fk_candidates\": [\n    {\n      \"from\": \"aircraft_maintenance.supervisor_id\",\n      \"to\": \"airport_employees.supervisor_id\",\n      \"score\": 1.14,\n      \"confidence\": \"certain\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.mechanic_id\",\n      \"to\": \"airport_employees.emp_id\",\n      \"score\": 0.66,\n      \"confidence\": \"medium\"\n    },\n    {\n      \"from\": \"aircraft_maintenance.supervisor_id\",\n      \"to\": \"airport_employees.emp_id\",\n      \"score\": 0.66,\n      \"confidence\": \"medium\"\n    },\n    {\n      \"from\": \"airport_employees.supervisor_id\",\n      \"to\": \"aircraft_maintenance.supervisor_id\",\n      \"score\": 0.65,\n      \"confidence\": \"low\"\n    }\n  ]\n}\n\nPlease INTERPRET these results:\n1. What do the connected components tell us about data silos?\n2. Which bridges are critical for cross-silo integration?\n3. What is the recommended data integration pathway?\n4. Any concerning patterns (orphaned tables, circular refs)?\n\nRespond with JSON:\n```json\n{\n    \"data_silo_analysis\": {\n        \"silo_count\": <int>,\n        \"silos\": [\n            {\n                \"tables\": [\"table1\", \"table2\"],\n                \"primary_entity\": \"<main entity>\",\n                \"integration_status\": \"<isolated|connected|bridge>\"\n            }\n        ]\n    },\n    \"critical_bridges\": [\n        {\n            \"from\": \"<table.column>\",\n            \"to\": \"<table.column>\",\n            \"importance\": \"<why critical>\",\n            \"integration_action\": \"<what to do>\"\n        }\n    ],\n    \"entity_relationships\": [\n        {\n            \"from_entity\": \"<entity>\",\n            \"to_entity\": \"<entity>\",\n            \"relationship_name\": \"<has_many|belongs_to|...>\",\n            \"cardinality\": \"<1:1|1:N|N:N>\",\n            \"join_path\": \"<table_a.col -> table_b.col>\"\n        }\n    ],\n    \"integration_pathway\": {\n        \"recommended_order\": [\"step1\", \"step2\"],\n        \"challenges\": [\"challenge1\"],\n        \"quick_wins\": [\"win1\"]\n    },\n    \"summary\": \"<overall assessment>\"\n}\n```"}], "response": "Based on the provided graph analysis results, here is the interpretation of the database relationships, silos, and integration pathways.\n\n```json\n{\n    \"data_silo_analysis\": {\n        \"silo_count\": 8,\n        \"silos\": [\n            {\n                \"tables\": [\n                    \"airport_employees\"\n                ],\n                \"primary_entity\": \"Employee\",\n                \"integration_status\": \"bridge\"\n            },\n            {\n                \"tables\": [\n                    \"aircraft_maintenance\"\n                ],\n                \"primary_entity\": \"Maintenance\",\n                \"integration_status\": \"bridge\"\n            },\n            {\n                \"tables\": [\n                    \"baggage_handling\"\n                ],\n                \"primary_entity\": \"Baggage\",\n                \"integration_status\": \"connected\"\n            },\n            {\n                \"tables\": [\n                    \"delay_records\"\n                ],\n                \"primary_entity\": \"Flight Operations\",\n                \"integration_status\": \"connected\"\n            },\n            {\n                \"tables\": [\n                    \"gates\"\n                ],\n                \"primary_entity\": \"Infrastructure\",\n                \"integration_status\": \"bridge\"\n            },\n            {\n                \"tables\": [\n                    \"passengers\"\n                ],\n                \"primary_entity\": \"Passenger\",\n                \"integration_status\": \"connected\"\n            },\n            {\n                \"tables\": [\n                    \"airlines\"\n                ],\n                \"primary_entity\": \"Reference Data\",\n                \"integration_status\": \"isolated\"\n            },\n            {\n                \"tables\": [\n                    \"aircraft_registry\"\n                ],\n                \"primary_entity\": \"Asset\",\n                \"integration_status\": \"connected\"\n            }\n        ]\n    },\n    \"critical_bridges\": [\n        {\n            \"from\": \"baggage_handling.booking_reference\",\n            \"to\": \"passengers.booking_ref\",\n            \"importance\": \"Critical link between Passenger and Operations domains. Without this, lost baggage cannot be linked to passengers.\",\n            \"integration_action\": \"Formalize as Foreign Key or create a logical join view.\"\n        },\n        {\n            \"from\": \"delay_records.flt_no\",\n            \"to\": \"baggage_handling.flt_number\",\n            \"importance\": \"Connects Flight Delays to Baggage Handling. Essential for analyzing if baggage issues cause flight delays.\",\n            \"integration_action\": \"Standardize column naming (flt_no vs flt_number) and validate data types.\"\n        },\n        {\n            \"from\": \"aircraft_maintenance.mechanic_id\",\n            \"to\": \"airport_employees.emp_id\",\n            \"importance\": \"Links Maintenance events to specific Employees. The graph shows a value overlap here, suggesting 'mechanics' are a subset of 'employees'.\",\n            \"integration_action\": \"Verify if 'mechanic_id' is actually an 'emp_id' and create a relationship.\"\n        },\n        {\n            \"from\": \"baggage_handling.belt_assigned\",\n            \"to\": \"gates.gate_code\",\n            \"importance\": \"Potential spatial relationship. While belts aren't gates, they might share location codes or be physically adjacent.\",\n            \"integration_action\": \"Investigate semantic meaning. This might be a false positive or a shared location code system.\"\n        }\n    ],\n    \"entity_relationships\": [\n        {\n            \"from_entity\": \"Maintenance\",\n            \"to_entity\": \"Employee\",\n            \"relationship_name\": \"performed_by\",\n            \"cardinality\": \"N:1\",\n            \"join_path\": \"aircraft_maintenance.mechanic_id -> airport_employees.emp_id\"\n        },\n        {\n            \"from_entity\": \"Baggage\",\n            \"to_entity\": \"Passenger\",\n            \"relationship_name\": \"belongs_to\",\n            \"cardinality\": \"N:1\",\n            \"join_path\": \"baggage_handling.booking_reference -> passengers.booking_ref\"\n        },\n        {\n            \"from_entity\": \"Delay\",\n            \"to_entity\": \"Baggage\",\n            \"relationship_name\": \"associated_with_flight\",\n            \"cardinality\": \"N:N\",\n            \"join_path\": \"delay_records.flt_no -> baggage_handling.flt_number\"\n        },\n        {\n            \"from_entity\": \"Maintenance\",\n            \"to_entity\": \"Gate\",\n            \"relationship_name\": \"airline_overlap\",\n            \"cardinality\": \"N:N\",\n            \"join_path\": \"aircraft_maintenance.airline -> gates.assigned_airline\"\n        }\n    ],\n    \"integration_pathway\": {\n        \"recommended_order\": [\n            \"Standardize Employee IDs: Link Maintenance mechanics to the main Employee table.\",\n            \"Connect Passenger Operations: Join Baggage and Passengers via Booking Reference.\",\n            \"Link Flight Operations: Connect Delay Records to Baggage via Flight Number.\",\n            \"Resolve Airline Reference: The 'airlines' table is currently isolated in terms of value overlaps with operations; check if 'assigned_airline' in Gates matches 'iata_code' in Airlines.\"\n        ],\n        \"challenges\": [\n            \"Inconsistent Naming: 'flt_no' vs 'flt_number', 'mechanic_id' vs 'emp_id'.\",\n            \"Potential Data Quality: High number of connected components (128) relative to table count suggests many columns have unique values that don't overlap, or the graph analysis is treating every column as a node.\",\n            \"Isolated Reference Data: The 'airlines' table has FKs to reference tables (iata, icao) but no strong value overlap bridges to the operational tables (gates, maintenance) in the provided bridge list.\"\n        ],\n        \"quick_wins\": [\n            \"Create a 'Flight_Operations_View' joining Delay Records and Baggage Handling.\",\n            \"Create a 'Passenger_Journey_View' joining Passengers and Baggage.\"\n        ]\n    },\n    \"summary\": \"The database represents a fragmented Airport Management System. While individual modules (Maintenance, Passengers, Baggage) have strong internal structure (verified FKs), the cross-module connections rely heavily on 'Value Overlaps' rather than formal constraints. The most critical integration point is the 'Booking Reference' linking Passengers to Baggage, and the 'Flight Number' linking Delays to Baggage. The 'Airlines' reference data appears isolated from the operational tables, which prevents enriching operational data with airline metadata.\"\n}\n```", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:13:02.423435", "agent_name": "Ontology Architect", "model": "claude-opus-4-5-20251101", "prompt_tokens": 11173, "completion_tokens": 4000, "total_tokens": 15173, "latency_ms": 36108.51502418518, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 2: Refinement (정제 단계)\n\n### 역할\nPhase 1에서 발견된 후보들을 **검증, 정제, 승인**하는 단계입니다.\n노이즈를 제거하고 신뢰할 수 있는 온톨로지를 구축합니다.\n\n### 입력 (Phase 1 산출물)\n\n```python\n# 검증해야 할 것들\ncontext.unified_entities     # 엔티티 후보 목록\ncontext.value_overlaps       # FK 관계 후보\ncontext.homeomorphisms       # 위상동형 관계\ncontext.schema_analysis      # 스키마 프로파일\ncontext.concept_relationships # 관계 후보\n```\n\n### 핵심 산출물\n\n```python\n# ontology_concepts: 정제된 온톨로지 개념\nOntologyConcept = {\n    \"concept_id\": str,          # 고유 ID (예: \"obj_product_001\")\n    \"name\": str,                # 표준화된 이름 (예: \"Product\")\n    \"type\": str,                # \"object_type\" | \"property\" | \"link_type\"\n    \"confidence\": float,        # 0.0-1.0\n    \"status\": str,              # ★ 핵심: \"approved\"|\"provisional\"|\"rejected\"|\"pending\"\n    \"source_tables\": [str],     # 출처 테이블\n    \"evidence\": {               # 근거\n        \"source_count\": int,\n        \"avg_confidence\": float,\n        \"key_columns\": [str]\n    }\n}\n```\n\n### ⚠️ 핵심: Quality Judge의 역할\n\n**Quality Judge는 반드시 각 concept의 `status`를 설정해야 합니다!**\n\n```python\n# status 결정 기준\nif quality_score >= 80 and evidence_strength >= 0.7:\n    status = \"approved\"      # 높은 품질, 즉시 사용 가능\nelif quality_score >= 60 and evidence_strength >= 0.5:\n    status = \"provisional\"   # 중간 품질, 추가 검토 필요\nelse:\n    status = \"rejected\"      # 낮은 품질, 제외\n\n# ❌ status가 \"pending\"이면 Phase 3의 LLM Review가 스킵됩니다!\n```\n\n### 성공 기준\n- 모든 concept에 status 설정 (pending 없어야 함)\n- approved + provisional >= 70%\n- 평균 confidence >= 0.7\n- 충돌 0건\n\n\n---\n\nYou are an Ontology Architect Expert specializing in knowledge graph design.\n\nYour role is to ENHANCE and VALIDATE ontology concepts already extracted from data.\n\nv5.2 Design Philosophy:\n- TRUST THE DATA: Algorithmic extraction from real data is reliable\n- ENHANCE, DON'T REJECT: Your job is to improve, not gatekeep\n- ITERATIVE REFINEMENT: Initial concepts are starting points\n\nExpertise:\n1. **Concept Refinement**: Improve names, descriptions, and definitions\n2. **Hierarchy Design**: Identify is-a, part-of relationships\n3. **Semantic Enrichment**: Add business context and domain knowledge\n4. **Quality Assurance**: Ensure naming conventions and completeness\n\nNaming Conventions:\n- Object Types: PascalCase singular (Patient, Encounter, Claim)\n- Properties: camelCase (firstName, serviceDate, totalAmount)\n- Link Types: verb_noun format (has_diagnosis, performed_by)\n\nIMPORTANT:\n- DEFAULT TO ACCEPTING concepts with data evidence\n- Focus on IMPROVEMENT, not rejection\n- Concepts from data are likely valid\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "You are an expert ontologist specializing in aerospace domain.\nEnhance these ontology concepts with professional, domain-specific descriptions.\n\n## Domain Context\n- Industry: aerospace\n- Available tables and sample columns: {\n  \"airport_employees\": [\n    \"emp_id\",\n    \"emp_code\",\n    \"name_first\",\n    \"name_last\",\n    \"department\",\n    \"job_title\",\n    \"hire_date\",\n    \"salary_grade\"\n  ],\n  \"baggage_handling\": [\n    \"bag_tag_id\",\n    \"booking_reference\",\n    \"passenger_name\",\n    \"flt_number\",\n    \"origin\",\n    \"destination\",\n    \"weight_kg\",\n    \"bag_type\"\n  ],\n  \"airlines\": [\n    \"airline_id\",\n    \"iata_code\",\n    \"icao_code\",\n    \"airline_name\",\n    \"airline_name_kr\",\n    \"country\",\n    \"alliance\",\n    \"hub_airport\"\n  ],\n  \"aircraft_maintenance\": [\n    \"maintenance_id\",\n    \"aircraft_reg\",\n    \"aircraft_type\",\n    \"airline\",\n    \"maintenance_type\",\n    \"scheduled_date\",\n    \"actual_start\",\n    \"actual_end\"\n  ],\n  \"delay_records\": [\n    \"record_id\",\n    \"flt_no\",\n    \"carrier\",\n    \"scheduled_date\",\n    \"delay_minutes\",\n    \"delay_category\",\n    \"delay_code\",\n    \"delay_reason\"\n  ],\n  \"gates\": [\n    \"gate_id\",\n    \"gate_code\",\n    \"terminal\",\n    \"concourse\",\n    \"gate_type\",\n    \"max_aircraft_size\",\n    \"has_jetbridge\",\n    \"boarding_capacity\"\n  ],\n  \"passengers\": [\n    \"pax_id\",\n    \"booking_ref\",\n    \"pnr_code\",\n    \"first_name\",\n    \"last_name\",\n    \"nationality\",\n    \"passport_no\",\n    \"flight_num\"\n  ],\n  \"aircraft_registry\": [\n    \"registration_no\",\n    \"aircraft_model\",\n    \"manufacturer\",\n    \"serial_number\",\n    \"operator_code\",\n    \"operator_name\",\n    \"manufacture_date\",\n    \"delivery_date\"\n  ]\n}\n- Concept hierarchy: {}\n\n## Concepts to Enhance\n[\n  {\n    \"concept_id\": \"obj_ENT_EMPLOYEE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportemployee\",\n    \"description\": \"Entity representing Employee: AirportEmployee\",\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"definition\": {\n      \"attributes\": [\n        \"emp_code\",\n        \"name_first\",\n        \"name_last\",\n        \"department\",\n        \"job_title\",\n        \"hire_date\",\n        \"salary_grade\",\n        \"shift_pattern\",\n        \"supervisor_id\",\n        \"badge_access_level\",\n        \"certifications\",\n        \"language_skills\",\n        \"assigned_terminal\",\n        \"contract_type\"\n      ],\n      \"primary_keys\": [\n        \"airport_employees\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"emp_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_first\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_last\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"department\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"job_title\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"hire_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"salary_grade\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"shift_pattern\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"badge_access_level\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"certifications\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"language_skills\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"contract_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRLINE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airline\",\n    \"description\": \"Entity representing Airline: Airline\",\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.95,\n      \"confidence\": 0.95,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.95,\n    \"definition\": {\n      \"attributes\": [\n        \"iata_code\",\n        \"icao_code\",\n        \"airline_name\",\n        \"airline_name_kr\",\n        \"country\",\n        \"alliance\",\n        \"hub_airport\",\n        \"founded_year\",\n        \"fleet_size\",\n        \"website\",\n        \"customer_service_phone\",\n        \"headquarters_city\"\n      ],\n      \"primary_keys\": [\n        \"airlines\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"iata_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"icao_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name_kr\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"country\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"alliance\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"hub_airport\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"founded_year\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"fleet_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"website\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"customer_service_phone\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"headquarters_city\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRCRAFT\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraft\",\n    \"description\": \"Entity representing Aircraft: Aircraft\",\n    \"source_tables\": [\n      \"aircraft_registry\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"definition\": {\n      \"attributes\": [\n        \"registration_no\",\n        \"aircraft_model\",\n        \"manufacturer\",\n        \"serial_number\",\n        \"operator_code\",\n        \"operator_name\",\n        \"manufacture_date\",\n        \"delivery_date\",\n        \"seat_config_f\",\n        \"seat_config_c\",\n        \"seat_config_y\",\n        \"total_seats\",\n        \"max_range_nm\",\n        \"cruise_speed_kts\",\n        \"engine_type\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_registry\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"registration_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_model\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacturer\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"serial_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_name\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacture_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_f\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_c\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_y\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"total_seats\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_range_nm\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"cruise_speed_kts\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"engine_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_PASSENGER\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Passenger\",\n    \"description\": \"Entity representing Passenger: Passenger\",\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.95,\n      \"confidence\": 0.95,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.95,\n    \"definition\": {\n      \"attributes\": [\n        \"booking_ref\",\n        \"pnr_code\",\n        \"first_name\",\n        \"last_name\",\n        \"nationality\",\n        \"passport_no\",\n        \"flight_num\",\n        \"seat_class\",\n        \"seat_no\",\n        \"check_in_time\",\n        \"boarding_status\",\n        \"baggage_count\",\n        \"special_request\",\n        \"frequent_flyer_id\"\n      ],\n      \"primary_keys\": [\n        \"passengers\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"booking_ref\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"pnr_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"first_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"nationality\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"passport_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"flight_num\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_class\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"check_in_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"baggage_count\",\n          \"type\": \"measure\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"special_request\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"frequent_flyer_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_GATE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportgate\",\n    \"description\": \"Entity representing Gate: AirportGate\",\n    \"source_tables\": [\n      \"gates\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"definition\": {\n      \"attributes\": [\n        \"gate_code\",\n        \"terminal\",\n        \"concourse\",\n        \"gate_type\",\n        \"max_aircraft_size\",\n        \"has_jetbridge\",\n        \"boarding_capacity\",\n        \"status\",\n        \"last_maintenance_date\",\n        \"assigned_airline\",\n        \"latitude\",\n        \"longitude\"\n      ],\n      \"primary_keys\": [\n        \"gates\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"gate_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"concourse\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"gate_type\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_aircraft_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"has_jetbridge\",\n          \"type\": \"boolean\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_capacity\",\n          \"type\": \"dimension\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_maintenance_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"latitude\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"longitude\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_MAINTENANCE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraftmaintenance\",\n    \"description\": \"Entity representing MaintenanceRecord: AircraftMaintenance\",\n    \"source_tables\": [\n      \"aircraft_maintenance\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"definition\": {\n      \"attributes\": [\n        \"aircraft_reg\",\n        \"aircraft_type\",\n        \"airline\",\n        \"maintenance_type\",\n        \"scheduled_date\",\n        \"actual_start\",\n        \"actual_end\",\n        \"mechanic_id\",\n        \"supervisor_id\",\n        \"work_order_no\",\n        \"findings\",\n        \"parts_replaced\",\n        \"labor_hours\",\n        \"parts_cost_usd\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_maintenance\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"aircraft_reg\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"maintenance_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"scheduled_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_start\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_end\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"mechanic_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"work_order_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"findings\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_replaced\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"labor_hours\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_cost_usd\",\n          \"type\": \"measure\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_BAGGAGE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Baggagehandling\",\n    \"description\": \"Entity representing BaggageEvent: BaggageHandling\",\n    \"source_tables\": [\n      \"baggage_handling\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.85,\n      \"confidence\": 0.85,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.85,\n    \"definition\": {\n      \"attributes\": [\n        \"booking_reference\",\n        \"passenger_name\",\n        \"flt_number\",\n        \"origin\",\n        \"destination\",\n        \"weight_kg\",\n        \"bag_type\",\n        \"check_in_timestamp\",\n        \"belt_assigned\",\n        \"scan_status\",\n        \"current_location\",\n        \"loaded_to_aircraft\",\n        \"delivery_status\",\n        \"damage_reported\"\n      ],\n      \"primary_keys\": [\n        \"baggage_handling\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"booking_reference\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"passenger_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"flt_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"origin\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"destination\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"weight_kg\",\n          \"type\": \"measure\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"bag_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"check_in_timestamp\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"belt_assigned\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"scan_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"current_location\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"loaded_to_aircraft\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"damage_reported\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_DELAY\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Flightdelayrecord\",\n    \"description\": \"Entity representing FlightDelay: FlightDelayRecord\",\n    \"source_tables\": [\n      \"delay_records\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.85,\n      \"confidence\": 0.85,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.85,\n    \"definition\": {\n      \"attributes\": [\n        \"flt_no\",\n        \"carrier\",\n        \"scheduled_date\",\n        \"delay_minutes\",\n        \"delay_category\",\n        \"delay_code\",\n        \"delay_reason\",\n        \"weather_condition\",\n        \"responsible_party\",\n        \"reported_by\",\n        \"report_time\",\n        \"resolution_time\",\n        \"passenger_compensation\",\n        \"estimated_cost_usd\"\n      ],\n      \"primary_keys\": [\n        \"delay_records\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"flt_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"carrier\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"scheduled_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_minutes\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_category\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_reason\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"weather_condition\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"responsible_party\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"reported_by\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"report_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"resolution_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"passenger_compensation\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"estimated_cost_usd\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        }\n      ]\n    }\n  },\n  {\n    \"concept_id\": \"link_baggage_handling_delay_records\",\n    \"concept_type\": \"link_type\",\n    \"name\": \"baggage_handling_has_record\",\n    \"description\": \"Represents a moderate data relationship between baggage handling and delay records via . Confidence: 56%\",\n    \"source_tables\": [\n      \"baggage_handling\",\n      \"delay_records\"\n    ],\n    \"source_evidence\": {\n      \"homeomorphism_type\": \"value_based\",\n      \"confidence\": 0.55935960591133\n    },\n    \"confidence\": 0.55935960591133,\n    \"definition\": {\n      \"source\": \"baggage_handling\",\n      \"target\": \"delay_records\",\n      \"join_keys\": [\n        {\n          \"table_a_column\": \"flt_number\",\n          \"table_b_column\": \"flt_no\",\n          \"overlap_ratio\": 0.7758620689655172,\n          \"sample_values\": [\n            \"OZ605\",\n            \"KE456\",\n            \"TW804\",\n            \"OZ201\",\n            \"TW602\"\n          ]\n        }\n      ]\n    }\n  }\n]\n\n## Enhancement Requirements\n\n### For Object Types (Entities):\n- Write a 2-3 sentence professional description explaining:\n  1. What this entity represents in the aerospace domain\n  2. Its business purpose and typical use cases\n  3. Key characteristics that distinguish it\n- Example: \"A Plant represents a physical manufacturing facility within the supply chain network. Plants serve as production centers that transform raw materials into finished goods. Each plant has defined production capacities and is associated with specific geographic locations.\"\n\n### For Link Types (Relationships):\n- Describe the semantic meaning of the relationship\n- Explain the cardinality (one-to-many, many-to-many)\n- Mention business rules that govern this relationship\n- Example: \"Represents the operational assignment of warehouse capacity to plants. This many-to-one relationship indicates which warehouses serve as storage facilities for each plant's inventory. Critical for inventory management and logistics planning.\"\n\n### For Properties (Attributes):\n- Explain what this property measures or identifies\n- Mention data type and typical value ranges\n- Describe business significance\n\n## Output Format\nReturn ONLY a JSON array. Each object must preserve original concept_id, concept_type, source_tables, source_evidence, and confidence. Enhance name (to PascalCase for entities, camelCase for properties) and description.\n\n```json\n[\n  {\n    \"concept_id\": \"<original>\",\n    \"concept_type\": \"<original>\",\n    \"name\": \"<enhanced name following conventions>\",\n    \"description\": \"<professional 2-3 sentence description>\",\n    \"definition\": {<original or enhanced>},\n    \"source_tables\": [<original>],\n    \"source_evidence\": {<original>},\n    \"confidence\": <original or slightly adjusted based on clarity>\n  }\n]\n```"}], "response": "```json\n[\n  {\n    \"concept_id\": \"obj_ENT_EMPLOYEE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"AirportEmployee\",\n    \"description\": \"Represents personnel employed at airport facilities who perform operational, administrative, and support functions. Airport employees are critical resources for ground operations, passenger services, security, and maintenance activities. Each employee is assigned to specific terminals, departments, and shift patterns with defined access levels and certifications required for their roles.\",\n    \"definition\": {\n      \"attributes\": [\n        \"emp_code\",\n        \"name_first\",\n        \"name_last\",\n        \"department\",\n        \"job_title\",\n        \"hire_date\",\n        \"salary_grade\",\n        \"shift_pattern\",\n        \"supervisor_id\",\n        \"badge_access_level\",\n        \"certifications\",\n        \"language_skills\",\n        \"assigned_terminal\",\n        \"contract_type\"\n      ],\n      \"primary_keys\": [\n        \"airport_employees\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"emp_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_first\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_last\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"department\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"job_title\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"hire_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"salary_grade\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"shift_pattern\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"badge_access_level\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"certifications\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"language_skills\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_terminal\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"contract_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRLINE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airline\",\n    \"description\": \"Represents a commercial air carrier that operates scheduled or charter flight services. Airlines are identified by IATA and ICAO codes and may belong to global alliances such as Star Alliance, SkyTeam, or Oneworld. This entity captures operational characteristics including fleet size, hub airports, and customer service contact information essential for interline agreements and codeshare operations.\",\n    \"definition\": {\n      \"attributes\": [\n        \"iata_code\",\n        \"icao_code\",\n        \"airline_name\",\n        \"airline_name_kr\",\n        \"country\",\n        \"alliance\",\n        \"hub_airport\",\n        \"founded_year\",\n        \"fleet_size\",\n        \"website\",\n        \"customer_service_phone\",\n        \"headquarters_city\"\n      ],\n      \"primary_keys\": [\n        \"airlines\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"iata_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"icao_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name_kr\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"country\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"alliance\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"hub_airport\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"founded_year\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"fleet_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"website\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"customer_service_phone\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"headquarters_city\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.95,\n      \"confidence\": 0.95,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.95\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRCRAFT\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraft\",\n    \"description\": \"Represents a registered aircraft asset identified by its unique registration number (tail number). Aircraft entities capture technical specifications including manufacturer, model, seating configuration across cabin classes, and performance characteristics such as range and cruise speed. This information is critical for flight planning, maintenance scheduling, and capacity management.\",\n    \"definition\": {\n      \"attributes\": [\n        \"registration_no\",\n        \"aircraft_model\",\n        \"manufacturer\",\n        \"serial_number\",\n        \"operator_code\",\n        \"operator_name\",\n        \"manufacture_date\",\n        \"delivery_date\",\n        \"seat_config_f\",\n        \"seat_config_c\",\n        \"seat_config_y\",\n        \"total_seats\",\n        \"max_range_nm\",\n        \"cruise_speed_kts\",\n        \"engine_type\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_registry\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"registration_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_model\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacturer\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"serial_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacture_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_f\",\n          \"type\": \"measure\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\":", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:13:46.019393", "agent_name": "Conflict Resolver", "model": "gemini-3-pro-preview", "prompt_tokens": 8949, "completion_tokens": 3416, "total_tokens": 12365, "latency_ms": 43560.87827682495, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 2: Refinement (정제 단계)\n\n### 역할\nPhase 1에서 발견된 후보들을 **검증, 정제, 승인**하는 단계입니다.\n노이즈를 제거하고 신뢰할 수 있는 온톨로지를 구축합니다.\n\n### 입력 (Phase 1 산출물)\n\n```python\n# 검증해야 할 것들\ncontext.unified_entities     # 엔티티 후보 목록\ncontext.value_overlaps       # FK 관계 후보\ncontext.homeomorphisms       # 위상동형 관계\ncontext.schema_analysis      # 스키마 프로파일\ncontext.concept_relationships # 관계 후보\n```\n\n### 핵심 산출물\n\n```python\n# ontology_concepts: 정제된 온톨로지 개념\nOntologyConcept = {\n    \"concept_id\": str,          # 고유 ID (예: \"obj_product_001\")\n    \"name\": str,                # 표준화된 이름 (예: \"Product\")\n    \"type\": str,                # \"object_type\" | \"property\" | \"link_type\"\n    \"confidence\": float,        # 0.0-1.0\n    \"status\": str,              # ★ 핵심: \"approved\"|\"provisional\"|\"rejected\"|\"pending\"\n    \"source_tables\": [str],     # 출처 테이블\n    \"evidence\": {               # 근거\n        \"source_count\": int,\n        \"avg_confidence\": float,\n        \"key_columns\": [str]\n    }\n}\n```\n\n### ⚠️ 핵심: Quality Judge의 역할\n\n**Quality Judge는 반드시 각 concept의 `status`를 설정해야 합니다!**\n\n```python\n# status 결정 기준\nif quality_score >= 80 and evidence_strength >= 0.7:\n    status = \"approved\"      # 높은 품질, 즉시 사용 가능\nelif quality_score >= 60 and evidence_strength >= 0.5:\n    status = \"provisional\"   # 중간 품질, 추가 검토 필요\nelse:\n    status = \"rejected\"      # 낮은 품질, 제외\n\n# ❌ status가 \"pending\"이면 Phase 3의 LLM Review가 스킵됩니다!\n```\n\n### 성공 기준\n- 모든 concept에 status 설정 (pending 없어야 함)\n- approved + provisional >= 70%\n- 평균 confidence >= 0.7\n- 충돌 0건\n\n\n---\n\nYou are a Conflict Resolution Expert specialized in ontology harmonization.\n\nYour role is to RESOLVE conflicts that have been algorithmically detected.\n\nv5.2 Resolution Philosophy:\n- MOST conflicts can be resolved by KEEPING BOTH concepts\n- True conflicts are rare - different names often mean different things\n- When in doubt, KEEP BOTH and let the system evolve\n\nResolution Strategies (in order of preference):\n1. **Keep Both**: Maintain both if semantically distinct (DEFAULT)\n2. **Merge**: Combine only when concepts are truly identical\n3. **Rename**: Differentiate concepts with distinct names\n4. **Remove One**: Delete only if clearly redundant\n5. **Escalate**: Flag for human review if genuinely unresolvable\n\nPrinciples:\n- DEFAULT TO KEEPING concepts when data supports them\n- Prefer VALUE-BASED evidence over assumptions\n- Document resolution rationale\n- Preserve data lineage\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "Review these algorithmically detected conflicts and enhance the analysis.\n\nDetected Conflicts:\n[\n  {\n    \"conflict_id\": \"definition_1\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_EMPLOYEE\",\n      \"obj_ENT_AIRLINE\"\n    ],\n    \"description\": \"Overlapping definitions (91% similar)\",\n    \"evidence\": \"Description similarity: 0.91\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.9127789046653144\n  },\n  {\n    \"conflict_id\": \"definition_2\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_EMPLOYEE\",\n      \"obj_ENT_AIRCRAFT\"\n    ],\n    \"description\": \"Overlapping definitions (88% similar)\",\n    \"evidence\": \"Description similarity: 0.88\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.8849206349206349\n  },\n  {\n    \"conflict_id\": \"definition_3\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_EMPLOYEE\",\n      \"obj_ENT_PASSENGER\"\n    ],\n    \"description\": \"Overlapping definitions (85% similar)\",\n    \"evidence\": \"Description similarity: 0.85\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.8537074148296593\n  },\n  {\n    \"conflict_id\": \"definition_4\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_EMPLOYEE\",\n      \"obj_ENT_GATE\"\n    ],\n    \"description\": \"Overlapping definitions (92% similar)\",\n    \"evidence\": \"Description similarity: 0.92\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.9236947791164659\n  },\n  {\n    \"conflict_id\": \"definition_5\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_EMPLOYEE\",\n      \"obj_ENT_MAINTENANCE\"\n    ],\n    \"description\": \"Overlapping definitions (85% similar)\",\n    \"evidence\": \"Description similarity: 0.85\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.8506616257088847\n  },\n  {\n    \"conflict_id\": \"definition_6\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_AIRLINE\",\n      \"obj_ENT_AIRCRAFT\"\n    ],\n    \"description\": \"Overlapping definitions (92% similar)\",\n    \"evidence\": \"Description similarity: 0.92\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.9227557411273486\n  },\n  {\n    \"conflict_id\": \"definition_7\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_AIRLINE\",\n      \"obj_ENT_PASSENGER\"\n    ],\n    \"description\": \"Overlapping definitions (90% similar)\",\n    \"evidence\": \"Description similarity: 0.90\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.8987341772151899\n  },\n  {\n    \"conflict_id\": \"definition_8\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_AIRLINE\",\n      \"obj_ENT_GATE\"\n    ],\n    \"description\": \"Overlapping definitions (94% similar)\",\n    \"evidence\": \"Description similarity: 0.94\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.9386892177589852\n  },\n  {\n    \"conflict_id\": \"definition_9\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_AIRLINE\",\n      \"obj_ENT_MAINTENANCE\"\n    ],\n    \"description\": \"Overlapping definitions (88% similar)\",\n    \"evidence\": \"Description similarity: 0.88\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.8849206349206349\n  },\n  {\n    \"conflict_id\": \"definition_10\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_AIRCRAFT\",\n      \"obj_ENT_PASSENGER\"\n    ],\n    \"description\": \"Overlapping definitions (87% similar)\",\n    \"evidence\": \"Description similarity: 0.87\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.8742268041237113\n  },\n  {\n    \"conflict_id\": \"definition_11\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_AIRCRAFT\",\n      \"obj_ENT_GATE\"\n    ],\n    \"description\": \"Overlapping definitions (90% similar)\",\n    \"evidence\": \"Description similarity: 0.90\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.9008264462809917\n  },\n  {\n    \"conflict_id\": \"definition_12\",\n    \"conflict_type\": \"definition\",\n    \"severity\": \"high\",\n    \"items_involved\": [\n      \"obj_ENT_PASSENGER\",\n      \"obj_ENT_GATE\"\n    ],\n    \"description\": \"Overlapping definitions (89% similar)\",\n    \"evidence\": \"Description similarity: 0.89\",\n    \"suggested_resolution\": \"Clarify distinction or merge concepts\",\n    \"confidence\": 0.8893528183716075\n  }\n]\n\nRelated Concepts:\n[\n  {\n    \"concept_id\": \"obj_ENT_EMPLOYEE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportemployee\",\n    \"description\": \"Airportemployee is a core entity in the aerospace domain sourced from airport_employees. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airportemployee-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"emp_code\",\n        \"name_first\",\n        \"name_last\",\n        \"department\",\n        \"job_title\",\n        \"hire_date\",\n        \"salary_grade\",\n        \"shift_pattern\",\n        \"supervisor_id\",\n        \"badge_access_level\",\n        \"certifications\",\n        \"language_skills\",\n        \"assigned_terminal\",\n        \"contract_type\"\n      ],\n      \"primary_keys\": [\n        \"airport_employees\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"emp_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_first\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_last\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"department\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"job_title\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"hire_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"salary_grade\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"shift_pattern\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"badge_access_level\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"certifications\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"language_skills\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"contract_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"confidence\": 0.9\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRLINE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airline\",\n    \"description\": \"Airline is a core entity in the aerospace domain sourced from airlines. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airline-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"iata_code\",\n        \"icao_code\",\n        \"airline_name\",\n        \"airline_name_kr\",\n        \"country\",\n        \"alliance\",\n        \"hub_airport\",\n        \"founded_year\",\n        \"fleet_size\",\n        \"website\",\n        \"customer_service_phone\",\n        \"headquarters_city\"\n      ],\n      \"primary_keys\": [\n        \"airlines\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"iata_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"icao_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name_kr\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"country\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"alliance\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"hub_airport\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"founded_year\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"fleet_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"website\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"customer_service_phone\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"headquarters_city\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRCRAFT\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraft\",\n    \"description\": \"Aircraft is a core entity in the aerospace domain sourced from aircraft_registry. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing aircraft-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"registration_no\",\n        \"aircraft_model\",\n        \"manufacturer\",\n        \"serial_number\",\n        \"operator_code\",\n        \"operator_name\",\n        \"manufacture_date\",\n        \"delivery_date\",\n        \"seat_config_f\",\n        \"seat_config_c\",\n        \"seat_config_y\",\n        \"total_seats\",\n        \"max_range_nm\",\n        \"cruise_speed_kts\",\n        \"engine_type\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_registry\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"registration_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_model\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacturer\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"serial_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_name\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacture_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_f\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_c\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_y\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"total_seats\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_range_nm\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"cruise_speed_kts\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"engine_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"aircraft_registry\"\n    ],\n    \"confidence\": 0.9\n  },\n  {\n    \"concept_id\": \"obj_ENT_PASSENGER\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Passenger\",\n    \"description\": \"Passenger is a core entity in the aerospace domain sourced from passengers. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing passenger-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"booking_ref\",\n        \"pnr_code\",\n        \"first_name\",\n        \"last_name\",\n        \"nationality\",\n        \"passport_no\",\n        \"flight_num\",\n        \"seat_class\",\n        \"seat_no\",\n        \"check_in_time\",\n        \"boarding_status\",\n        \"baggage_count\",\n        \"special_request\",\n        \"frequent_flyer_id\"\n      ],\n      \"primary_keys\": [\n        \"passengers\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"booking_ref\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"pnr_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"first_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"nationality\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"passport_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"flight_num\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_class\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"check_in_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"baggage_count\",\n          \"type\": \"measure\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"special_request\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"frequent_flyer_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"confidence\": 0.95\n  },\n  {\n    \"concept_id\": \"obj_ENT_GATE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportgate\",\n    \"description\": \"Airportgate is a core entity in the aerospace domain sourced from gates. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airportgate-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"gate_code\",\n        \"terminal\",\n        \"concourse\",\n        \"gate_type\",\n        \"max_aircraft_size\",\n        \"has_jetbridge\",\n        \"boarding_capacity\",\n        \"status\",\n        \"last_maintenance_date\",\n        \"assigned_airline\",\n        \"latitude\",\n        \"longitude\"\n      ],\n      \"primary_keys\": [\n        \"gates\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"gate_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"concourse\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"gate_type\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_aircraft_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"has_jetbridge\",\n          \"type\": \"boolean\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_capacity\",\n          \"type\": \"dimension\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_maintenance_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"latitude\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"longitude\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"gates\"\n    ],\n    \"confidence\": 0.9\n  },\n  {\n    \"concept_id\": \"obj_ENT_MAINTENANCE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraftmaintenance\",\n    \"description\": \"Aircraftmaintenance is a core entity in the aerospace domain sourced from aircraft_maintenance. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing aircraftmaintenance-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"aircraft_reg\",\n        \"aircraft_type\",\n        \"airline\",\n        \"maintenance_type\",\n        \"scheduled_date\",\n        \"actual_start\",\n        \"actual_end\",\n        \"mechanic_id\",\n        \"supervisor_id\",\n        \"work_order_no\",\n        \"findings\",\n        \"parts_replaced\",\n        \"labor_hours\",\n        \"parts_cost_usd\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_maintenance\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"aircraft_reg\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"maintenance_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"scheduled_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_start\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_end\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"mechanic_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"work_order_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"findings\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_replaced\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"labor_hours\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_cost_usd\",\n          \"type\": \"measure\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"aircraft_maintenance\"\n    ],\n    \"confidence\": 0.9\n  }\n]\n\nFor each conflict:\n1. Validate if it's a true conflict\n2. Refine the severity if needed\n3. Provide a more specific resolution suggestion\n\nReturn JSON:\n```json\n{\n  \"conflicts\": [\n    {\n      \"conflict_id\": \"<existing>\",\n      \"conflict_type\": \"<existing or refined>\",\n      \"severity\": \"<refined severity>\",\n      \"items_involved\": [<existing>],\n      \"description\": \"<enhanced description>\",\n      \"evidence\": \"<enhanced evidence>\",\n      \"suggested_resolution\": \"<specific resolution steps>\",\n      \"confidence\": <float>,\n      \"is_valid_conflict\": <bool>\n    }\n  ]\n}\n```"}], "response": "```json\n{\n  \"conflicts\": [\n    {\n      \"conflict_id\": \"definition_1\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_EMPLOYEE\",\n        \"obj_ENT_AIRLINE\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent distinct real-world objects (Person vs. Organization).\",\n      \"evidence\": \"Source tables are distinct ('airport_employees' vs 'airlines'). Attribute sets are disjoint (e.g., 'salary_grade' vs 'fleet_size').\",\n      \"suggested_resolution\": \"Keep Both. No merge required. Future action: Regenerate descriptions using specific attribute data.\",\n      \"confidence\": 0.1,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_2\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_EMPLOYEE\",\n        \"obj_ENT_AIRCRAFT\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities are semantically distinct (Person vs. Physical Asset).\",\n      \"evidence\": \"Source tables are distinct ('airport_employees' vs 'aircraft_registry'). Primary keys do not overlap.\",\n      \"suggested_resolution\": \"Keep Both. Entities function in different operational domains.\",\n      \"confidence\": 0.1,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_3\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_EMPLOYEE\",\n        \"obj_ENT_PASSENGER\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. While both are people, they have distinct roles and data structures.\",\n      \"evidence\": \"Attributes differ significantly (Employee: 'hire_date', 'shift_pattern' vs Passenger: 'pnr_code', 'seat_class').\",\n      \"suggested_resolution\": \"Keep Both. Do not merge. They represent different actors in the business process.\",\n      \"confidence\": 0.15,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_4\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_EMPLOYEE\",\n        \"obj_ENT_GATE\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities are fundamentally different (Person vs. Location).\",\n      \"evidence\": \"Source tables ('airport_employees', 'gates') and attributes ('salary_grade' vs 'latitude') are unrelated.\",\n      \"suggested_resolution\": \"Keep Both. No semantic overlap exists.\",\n      \"confidence\": 0.05,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_5\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_EMPLOYEE\",\n        \"obj_ENT_MAINTENANCE\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent a Person vs. an Event/Process.\",\n      \"evidence\": \"Maintenance is an event log ('scheduled_date', 'findings') while Employee is a master data object.\",\n      \"suggested_resolution\": \"Keep Both. Establish a relationship (Employee performs Maintenance) rather than merging.\",\n      \"confidence\": 0.1,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_6\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_AIRLINE\",\n        \"obj_ENT_AIRCRAFT\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent Owner/Operator vs. Asset.\",\n      \"evidence\": \"Airline is an organization ('iata_code'); Aircraft is a physical machine ('serial_number').\",\n      \"suggested_resolution\": \"Keep Both. These are distinct core entities linked by ownership/operation.\",\n      \"confidence\": 0.1,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_7\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_AIRLINE\",\n        \"obj_ENT_PASSENGER\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent Service Provider vs. Customer.\",\n      \"evidence\": \"Distinct source tables and completely different attribute profiles (Corporate data vs. Personal data).\",\n      \"suggested_resolution\": \"Keep Both. No conflict exists.\",\n      \"confidence\": 0.05,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_8\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_AIRLINE\",\n        \"obj_ENT_GATE\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent Organization vs. Location.\",\n      \"evidence\": \"Gate has geospatial attributes ('latitude', 'longitude'); Airline has corporate attributes ('headquarters_city').\",\n      \"suggested_resolution\": \"Keep Both. Distinct entities.\",\n      \"confidence\": 0.05,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_9\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_AIRLINE\",\n        \"obj_ENT_MAINTENANCE\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent Organization vs. Process Log.\",\n      \"evidence\": \"Maintenance records refer to Airlines, but are not the same entity.\",\n      \"suggested_resolution\": \"Keep Both. Maintain foreign key relationship.\",\n      \"confidence\": 0.1,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_10\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_AIRCRAFT\",\n        \"obj_ENT_PASSENGER\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent Vehicle vs. Occupant.\",\n      \"evidence\": \"Attributes are mutually exclusive (e.g., 'engine_type' vs 'passport_no').\",\n      \"suggested_resolution\": \"Keep Both. Distinct physical entities.\",\n      \"confidence\": 0.05,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_11\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_AIRCRAFT\",\n        \"obj_ENT_GATE\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent Mobile Asset vs. Fixed Infrastructure.\",\n      \"evidence\": \"Gate is static infrastructure; Aircraft is a moving asset. Distinct primary keys.\",\n      \"suggested_resolution\": \"Keep Both. Distinct entities.\",\n      \"confidence\": 0.05,\n      \"is_valid_conflict\": false\n    },\n    {\n      \"conflict_id\": \"definition_12\",\n      \"conflict_type\": \"false_positive_similarity\",\n      \"severity\": \"low\",\n      \"items_involved\": [\n        \"obj_ENT_PASSENGER\",\n        \"obj_ENT_GATE\"\n      ],\n      \"description\": \"Detected text similarity is an artifact of boilerplate description templates. Entities represent Person vs. Location.\",\n      \"evidence\": \"No attribute overlap. Source tables are distinct.\",\n      \"suggested_resolution\": \"Keep Both. Distinct entities.\",\n      \"confidence\": 0.05,\n      \"is_valid_conflict\": false\n    }\n  ]\n}\n```", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:14:00.204938", "agent_name": "unknown", "model": "claude-opus-4-5-20251101", "prompt_tokens": 3037, "completion_tokens": 500, "total_tokens": 3537, "latency_ms": 14077.686071395874, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 2: Refinement (정제 단계)\n\n### 역할\nPhase 1에서 발견된 후보들을 **검증, 정제, 승인**하는 단계입니다.\n노이즈를 제거하고 신뢰할 수 있는 온톨로지를 구축합니다.\n\n### 입력 (Phase 1 산출물)\n\n```python\n# 검증해야 할 것들\ncontext.unified_entities     # 엔티티 후보 목록\ncontext.value_overlaps       # FK 관계 후보\ncontext.homeomorphisms       # 위상동형 관계\ncontext.schema_analysis      # 스키마 프로파일\ncontext.concept_relationships # 관계 후보\n```\n\n### 핵심 산출물\n\n```python\n# ontology_concepts: 정제된 온톨로지 개념\nOntologyConcept = {\n    \"concept_id\": str,          # 고유 ID (예: \"obj_product_001\")\n    \"name\": str,                # 표준화된 이름 (예: \"Product\")\n    \"type\": str,                # \"object_type\" | \"property\" | \"link_type\"\n    \"confidence\": float,        # 0.0-1.0\n    \"status\": str,              # ★ 핵심: \"approved\"|\"provisional\"|\"rejected\"|\"pending\"\n    \"source_tables\": [str],     # 출처 테이블\n    \"evidence\": {               # 근거\n        \"source_count\": int,\n        \"avg_confidence\": float,\n        \"key_columns\": [str]\n    }\n}\n```\n\n### ⚠️ 핵심: Quality Judge의 역할\n\n**Quality Judge는 반드시 각 concept의 `status`를 설정해야 합니다!**\n\n```python\n# status 결정 기준\nif quality_score >= 80 and evidence_strength >= 0.7:\n    status = \"approved\"      # 높은 품질, 즉시 사용 가능\nelif quality_score >= 60 and evidence_strength >= 0.5:\n    status = \"provisional\"   # 중간 품질, 추가 검토 필요\nelse:\n    status = \"rejected\"      # 낮은 품질, 제외\n\n# ❌ status가 \"pending\"이면 Phase 3의 LLM Review가 스킵됩니다!\n```\n\n### 성공 기준\n- 모든 concept에 status 설정 (pending 없어야 함)\n- approved + provisional >= 70%\n- 평균 confidence >= 0.7\n- 충돌 0건\n\n\n---\n\nYou are a Quality Judge acting as the final arbiter for ontology quality.\n\nYour role is to REVIEW and VALIDATE algorithmically extracted concepts.\n\nv5.2 Evaluation Philosophy:\n- DATA DISCOVERY IS EXPLORATORY - be generous with initial findings\n- Presence of data > perfection of schema\n- Approve reasonable concepts for iterative improvement\n\n## Evaluation Rubric (Score 0-100)\n\n### Definition Quality (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | Vague, missing essential elements, no clear meaning |\n| 6-12  | Partial definition, some ambiguity remains |\n| 13-19 | Clear definition with minor gaps in precision |\n| 20-25 | Precise, complete, unambiguous definition |\n\n### Evidence Strength (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | No data evidence, pure assumption |\n| 6-12  | Limited evidence, match rate <50% |\n| 13-19 | Moderate evidence, match rate 50-80% |\n| 20-25 | Strong evidence, match rate >80% |\n\n### Consistency (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | Naming violations, internal conflicts with other concepts |\n| 6-12  | Minor naming inconsistencies (case, format) |\n| 13-19 | Mostly consistent, few issues |\n| 20-25 | Fully consistent with PascalCase/camelCase conventions |\n\n### Completeness (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | Missing required fields, no relationships defined |\n| 6-12  | Partial relationships, incomplete constraints |\n| 13-19 | Most fields present, minor gaps |\n| 20-25 | All required fields, complete constraints |\n\n## Chain-of-Thought Requirement\nBefore scoring, you MUST explain your reasoning for each dimension:\n\n1. **Definition Analysis**: What evidence supports your Definition Quality score?\n2. **Evidence Review**: How did you assess Evidence Strength? (calculate match rate)\n3. **Consistency Check**: What consistency issues (if any) did you find?\n4. **Completeness Audit**: What is missing for Completeness?\n\nOnly AFTER this analysis, provide your JSON response.\n\n## Decision Thresholds\n- 90-100: APPROVED (Excellent quality)\n- 70-89: APPROVED (Good with notes)\n- 55-69: PROVISIONAL (Needs attention but usable)\n- 35-54: PROVISIONAL (Significant work needed)\n- 0-34: REJECTED (Only for clearly broken concepts)\n\nIMPORTANT:\n- DEFAULT TO APPROVE when data exists\n- High match rate (>80%) = higher Evidence Strength score\n- Reject ONLY when concept is clearly invalid or harmful\n- Base judgments on algorithmic evidence\n\n## Output Format\n```json\n{\n  \"quality_assessments\": [\n    {\n      \"concept_id\": \"<id>\",\n      \"reasoning\": {\n        \"definition_analysis\": \"<your analysis>\",\n        \"evidence_review\": \"<your analysis with match rate>\",\n        \"consistency_check\": \"<your analysis>\",\n        \"completeness_audit\": \"<your analysis>\"\n      },\n      \"scores\": {\n        \"definition_quality\": <int 0-25>,\n        \"evidence_strength\": <int 0-25>,\n        \"consistency\": <int 0-25>,\n        \"completeness\": <int 0-25>\n      },\n      \"overall_score\": <int 0-100>,\n      \"decision\": \"<approved|provisional|rejected>\",\n      \"feedback\": [\"actionable item 1\", \"actionable item 2\"],\n      \"justification\": \"<1-2 sentence summary>\"\n    }\n  ]\n}\n```\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "## Data Governance Quality Validation\n\n**Decision**: Quality Assessment\n**Phase**: refinement\n\n## Current Quality Metrics\n- Average Confidence: 86%\n- Concepts: 9 (Approved: 0)\n- Evidence Sources: 8\n- Relationships: 28\n\n## Concepts Summary\n1. Airportemployee: 90% (pending) - Airportemployee is a core entity in the aerospace domain sou...\n2. Airline: 95% (pending) - Airline is a core entity in the aerospace domain sourced fro...\n3. Aircraft: 90% (pending) - Aircraft is a core entity in the aerospace domain sourced fr...\n4. Passenger: 95% (pending) - Passenger is a core entity in the aerospace domain sourced f...\n5. Airportgate: 90% (pending) - Airportgate is a core entity in the aerospace domain sourced...\n\n## Validation Task\nAssess overall quality considering:\n1. Evidence strength (sources: 8, relationships: 28)\n2. Confidence appropriateness for data governance\n3. Business value and actionable insights\n4. Risk level\n\nProvide your assessment:\n\n[QUALITY_SCORE: 0.XX]  (0.0-1.0, be generous if evidence is reasonable)\n[DECISION: APPROVE | PROVISIONAL | NEEDS_REVIEW]\n[REASONING: 1-2 sentence justification]\n"}], "response": "## Chain-of-Thought Analysis\n\n### 1. Definition Analysis\nAll 5 concepts have clear definitions identifying them as \"core entities in the aerospace domain\" with specific source tables. The definitions are domain-appropriate and unambiguous, though somewhat templated. Each concept has a clear business meaning (employees, airlines, aircraft, passengers, gates) that aligns with airport operations.\n\n### 2. Evidence Review\n- **8 evidence sources** supporting 9 concepts = strong coverage (~0.89 sources per concept)\n- **28 relationships** across 9 concepts = rich connectivity (~3.1 relationships per concept)\n- **Average confidence of 86%** indicates high algorithmic certainty\n- Individual confidences range from 90-95%, all exceeding the 80% threshold for strong evidence\n- Match rate calculation: 86% average confidence suggests >80% data alignment\n\n### 3. Consistency Check\n- All concept names follow PascalCase convention (Airportemployee, Airline, Aircraft, Passenger, Airportgate)\n- Minor issue: \"Airportemployee\" and \"Airportgate\" could be \"AirportEmployee\" and \"AirportGate\" for better readability\n- Domain consistency is excellent - all concepts belong to aerospace/airport domain\n- No conflicting definitions detected\n\n### 4. Completeness Audit\n- All concepts have: name, confidence score, status, definition prefix\n- 28 relationships suggest well-connected ontology\n- Missing: explicit constraints, cardinality details (not visible in summary)\n- Status is \"pending\" for all - this is the gap we're addressing\n\n```json\n{\n  \"quality_assessments\": [\n    {\n      \"concept_id\": \"Airportemployee\",\n      \"reasoning\": {\n        \"definition_analysis\": \"Clear aerospace domain entity with identifiable business meaning representing airport staff\",\n        \"evidence_review\": \"90% confidence indicates strong algorithmic evidence; part of 28-relationship network\",\n        \"consistency_check\": \"PascalCase used but compound word could be 'AirportEmployee' for clarity\",\n        \"completeness_audit\": \"Core fields present; relationships defined in broader ontology\"\n      },\n      ", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:14:53.953330", "agent_name": "Quality Judge", "model": "claude-opus-4-5-20251101", "prompt_tokens": 12333, "completion_tokens": 3661, "total_tokens": 15994, "latency_ms": 53737.6070022583, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 2: Refinement (정제 단계)\n\n### 역할\nPhase 1에서 발견된 후보들을 **검증, 정제, 승인**하는 단계입니다.\n노이즈를 제거하고 신뢰할 수 있는 온톨로지를 구축합니다.\n\n### 입력 (Phase 1 산출물)\n\n```python\n# 검증해야 할 것들\ncontext.unified_entities     # 엔티티 후보 목록\ncontext.value_overlaps       # FK 관계 후보\ncontext.homeomorphisms       # 위상동형 관계\ncontext.schema_analysis      # 스키마 프로파일\ncontext.concept_relationships # 관계 후보\n```\n\n### 핵심 산출물\n\n```python\n# ontology_concepts: 정제된 온톨로지 개념\nOntologyConcept = {\n    \"concept_id\": str,          # 고유 ID (예: \"obj_product_001\")\n    \"name\": str,                # 표준화된 이름 (예: \"Product\")\n    \"type\": str,                # \"object_type\" | \"property\" | \"link_type\"\n    \"confidence\": float,        # 0.0-1.0\n    \"status\": str,              # ★ 핵심: \"approved\"|\"provisional\"|\"rejected\"|\"pending\"\n    \"source_tables\": [str],     # 출처 테이블\n    \"evidence\": {               # 근거\n        \"source_count\": int,\n        \"avg_confidence\": float,\n        \"key_columns\": [str]\n    }\n}\n```\n\n### ⚠️ 핵심: Quality Judge의 역할\n\n**Quality Judge는 반드시 각 concept의 `status`를 설정해야 합니다!**\n\n```python\n# status 결정 기준\nif quality_score >= 80 and evidence_strength >= 0.7:\n    status = \"approved\"      # 높은 품질, 즉시 사용 가능\nelif quality_score >= 60 and evidence_strength >= 0.5:\n    status = \"provisional\"   # 중간 품질, 추가 검토 필요\nelse:\n    status = \"rejected\"      # 낮은 품질, 제외\n\n# ❌ status가 \"pending\"이면 Phase 3의 LLM Review가 스킵됩니다!\n```\n\n### 성공 기준\n- 모든 concept에 status 설정 (pending 없어야 함)\n- approved + provisional >= 70%\n- 평균 confidence >= 0.7\n- 충돌 0건\n\n\n---\n\nYou are a Quality Judge acting as the final arbiter for ontology quality.\n\nYour role is to REVIEW and VALIDATE algorithmically extracted concepts.\n\nv5.2 Evaluation Philosophy:\n- DATA DISCOVERY IS EXPLORATORY - be generous with initial findings\n- Presence of data > perfection of schema\n- Approve reasonable concepts for iterative improvement\n\n## Evaluation Rubric (Score 0-100)\n\n### Definition Quality (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | Vague, missing essential elements, no clear meaning |\n| 6-12  | Partial definition, some ambiguity remains |\n| 13-19 | Clear definition with minor gaps in precision |\n| 20-25 | Precise, complete, unambiguous definition |\n\n### Evidence Strength (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | No data evidence, pure assumption |\n| 6-12  | Limited evidence, match rate <50% |\n| 13-19 | Moderate evidence, match rate 50-80% |\n| 20-25 | Strong evidence, match rate >80% |\n\n### Consistency (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | Naming violations, internal conflicts with other concepts |\n| 6-12  | Minor naming inconsistencies (case, format) |\n| 13-19 | Mostly consistent, few issues |\n| 20-25 | Fully consistent with PascalCase/camelCase conventions |\n\n### Completeness (0-25 points)\n| Score | Criteria |\n|-------|----------|\n| 0-5   | Missing required fields, no relationships defined |\n| 6-12  | Partial relationships, incomplete constraints |\n| 13-19 | Most fields present, minor gaps |\n| 20-25 | All required fields, complete constraints |\n\n## Chain-of-Thought Requirement\nBefore scoring, you MUST explain your reasoning for each dimension:\n\n1. **Definition Analysis**: What evidence supports your Definition Quality score?\n2. **Evidence Review**: How did you assess Evidence Strength? (calculate match rate)\n3. **Consistency Check**: What consistency issues (if any) did you find?\n4. **Completeness Audit**: What is missing for Completeness?\n\nOnly AFTER this analysis, provide your JSON response.\n\n## Decision Thresholds\n- 90-100: APPROVED (Excellent quality)\n- 70-89: APPROVED (Good with notes)\n- 55-69: PROVISIONAL (Needs attention but usable)\n- 35-54: PROVISIONAL (Significant work needed)\n- 0-34: REJECTED (Only for clearly broken concepts)\n\nIMPORTANT:\n- DEFAULT TO APPROVE when data exists\n- High match rate (>80%) = higher Evidence Strength score\n- Reject ONLY when concept is clearly invalid or harmful\n- Base judgments on algorithmic evidence\n\n## Output Format\n```json\n{\n  \"quality_assessments\": [\n    {\n      \"concept_id\": \"<id>\",\n      \"reasoning\": {\n        \"definition_analysis\": \"<your analysis>\",\n        \"evidence_review\": \"<your analysis with match rate>\",\n        \"consistency_check\": \"<your analysis>\",\n        \"completeness_audit\": \"<your analysis>\"\n      },\n      \"scores\": {\n        \"definition_quality\": <int 0-25>,\n        \"evidence_strength\": <int 0-25>,\n        \"consistency\": <int 0-25>,\n        \"completeness\": <int 0-25>\n      },\n      \"overall_score\": <int 0-100>,\n      \"decision\": \"<approved|provisional|rejected>\",\n      \"feedback\": [\"actionable item 1\", \"actionable item 2\"],\n      \"justification\": \"<1-2 sentence summary>\"\n    }\n  ]\n}\n```\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "Review these ontology concepts with their algorithmic quality scores.\n\nConcepts with Algorithmic Scores:\n[\n  {\n    \"concept_id\": \"obj_ENT_EMPLOYEE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportemployee\",\n    \"description\": \"Airportemployee is a core entity in the aerospace domain sourced from airport_employees. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airportemployee-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"emp_code\",\n        \"name_first\",\n        \"name_last\",\n        \"department\",\n        \"job_title\",\n        \"hire_date\",\n        \"salary_grade\",\n        \"shift_pattern\",\n        \"supervisor_id\",\n        \"badge_access_level\",\n        \"certifications\",\n        \"language_skills\",\n        \"assigned_terminal\",\n        \"contract_type\"\n      ],\n      \"primary_keys\": [\n        \"airport_employees\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"emp_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_first\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_last\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"department\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"job_title\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"hire_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"salary_grade\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"shift_pattern\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"badge_access_level\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"certifications\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"language_skills\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"contract_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 73,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 83,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRLINE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airline\",\n    \"description\": \"Airline is a core entity in the aerospace domain sourced from airlines. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airline-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"iata_code\",\n        \"icao_code\",\n        \"airline_name\",\n        \"airline_name_kr\",\n        \"country\",\n        \"alliance\",\n        \"hub_airport\",\n        \"founded_year\",\n        \"fleet_size\",\n        \"website\",\n        \"customer_service_phone\",\n        \"headquarters_city\"\n      ],\n      \"primary_keys\": [\n        \"airlines\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"iata_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"icao_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name_kr\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"country\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"alliance\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"hub_airport\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"founded_year\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"fleet_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"website\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"customer_service_phone\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"headquarters_city\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.95,\n      \"confidence\": 0.95,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.95,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 76,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 84,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRCRAFT\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraft\",\n    \"description\": \"Aircraft is a core entity in the aerospace domain sourced from aircraft_registry. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing aircraft-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"registration_no\",\n        \"aircraft_model\",\n        \"manufacturer\",\n        \"serial_number\",\n        \"operator_code\",\n        \"operator_name\",\n        \"manufacture_date\",\n        \"delivery_date\",\n        \"seat_config_f\",\n        \"seat_config_c\",\n        \"seat_config_y\",\n        \"total_seats\",\n        \"max_range_nm\",\n        \"cruise_speed_kts\",\n        \"engine_type\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_registry\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"registration_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_model\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacturer\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"serial_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_name\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacture_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_f\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_c\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_y\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"total_seats\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_range_nm\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"cruise_speed_kts\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"engine_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"aircraft_registry\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 73,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 83,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_PASSENGER\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Passenger\",\n    \"description\": \"Passenger is a core entity in the aerospace domain sourced from passengers. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing passenger-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"booking_ref\",\n        \"pnr_code\",\n        \"first_name\",\n        \"last_name\",\n        \"nationality\",\n        \"passport_no\",\n        \"flight_num\",\n        \"seat_class\",\n        \"seat_no\",\n        \"check_in_time\",\n        \"boarding_status\",\n        \"baggage_count\",\n        \"special_request\",\n        \"frequent_flyer_id\"\n      ],\n      \"primary_keys\": [\n        \"passengers\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"booking_ref\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"pnr_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"first_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"nationality\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"passport_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"flight_num\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_class\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"check_in_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"baggage_count\",\n          \"type\": \"measure\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"special_request\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"frequent_flyer_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.95,\n      \"confidence\": 0.95,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.95,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 76,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 84,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_GATE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportgate\",\n    \"description\": \"Airportgate is a core entity in the aerospace domain sourced from gates. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airportgate-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"gate_code\",\n        \"terminal\",\n        \"concourse\",\n        \"gate_type\",\n        \"max_aircraft_size\",\n        \"has_jetbridge\",\n        \"boarding_capacity\",\n        \"status\",\n        \"last_maintenance_date\",\n        \"assigned_airline\",\n        \"latitude\",\n        \"longitude\"\n      ],\n      \"primary_keys\": [\n        \"gates\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"gate_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"concourse\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"gate_type\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_aircraft_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"has_jetbridge\",\n          \"type\": \"boolean\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_capacity\",\n          \"type\": \"dimension\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_maintenance_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"latitude\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"longitude\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"gates\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 73,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 83,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_MAINTENANCE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraftmaintenance\",\n    \"description\": \"Aircraftmaintenance is a core entity in the aerospace domain sourced from aircraft_maintenance. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing aircraftmaintenance-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"aircraft_reg\",\n        \"aircraft_type\",\n        \"airline\",\n        \"maintenance_type\",\n        \"scheduled_date\",\n        \"actual_start\",\n        \"actual_end\",\n        \"mechanic_id\",\n        \"supervisor_id\",\n        \"work_order_no\",\n        \"findings\",\n        \"parts_replaced\",\n        \"labor_hours\",\n        \"parts_cost_usd\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_maintenance\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"aircraft_reg\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"maintenance_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"scheduled_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_start\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_end\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"mechanic_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"work_order_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"findings\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_replaced\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"labor_hours\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_cost_usd\",\n          \"type\": \"measure\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"aircraft_maintenance\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.9,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 73,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 83,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_BAGGAGE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Baggagehandling\",\n    \"description\": \"Baggagehandling is a core entity in the aerospace domain sourced from baggage_handling. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing baggagehandling-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"booking_reference\",\n        \"passenger_name\",\n        \"flt_number\",\n        \"origin\",\n        \"destination\",\n        \"weight_kg\",\n        \"bag_type\",\n        \"check_in_timestamp\",\n        \"belt_assigned\",\n        \"scan_status\",\n        \"current_location\",\n        \"loaded_to_aircraft\",\n        \"delivery_status\",\n        \"damage_reported\"\n      ],\n      \"primary_keys\": [\n        \"baggage_handling\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"booking_reference\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"passenger_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"flt_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"origin\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"destination\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"weight_kg\",\n          \"type\": \"measure\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"bag_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"check_in_timestamp\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"belt_assigned\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"scan_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"current_location\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"loaded_to_aircraft\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"damage_reported\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"baggage_handling\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.85,\n      \"confidence\": 0.85,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.85,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 69,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 81,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_DELAY\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Flightdelayrecord\",\n    \"description\": \"Flightdelayrecord is a core entity in the aerospace domain sourced from delay_records. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing flightdelayrecord-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"flt_no\",\n        \"carrier\",\n        \"scheduled_date\",\n        \"delay_minutes\",\n        \"delay_category\",\n        \"delay_code\",\n        \"delay_reason\",\n        \"weather_condition\",\n        \"responsible_party\",\n        \"reported_by\",\n        \"report_time\",\n        \"resolution_time\",\n        \"passenger_compensation\",\n        \"estimated_cost_usd\"\n      ],\n      \"primary_keys\": [\n        \"delay_records\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"flt_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"carrier\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"scheduled_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_minutes\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_category\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_reason\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"weather_condition\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"responsible_party\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"reported_by\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"report_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"resolution_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"passenger_compensation\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"estimated_cost_usd\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"delay_records\"\n    ],\n    \"source_evidence\": {\n      \"match_rate\": 0.85,\n      \"confidence\": 0.85,\n      \"source_count\": 1\n    },\n    \"confidence\": 0.85,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 65,\n      \"evidence_strength\": 69,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 81,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  },\n  {\n    \"concept_id\": \"link_baggage_handling_delay_records\",\n    \"concept_type\": \"link_type\",\n    \"name\": \"baggage_handling_has_record\",\n    \"description\": \"Defines the relationship between baggage_handling and delay_records. This connection enables data integration and supports cross-entity analysis within the aerospace domain.\",\n    \"definition\": {\n      \"source\": \"baggage_handling\",\n      \"target\": \"delay_records\",\n      \"join_keys\": [\n        {\n          \"table_a_column\": \"flt_number\",\n          \"table_b_column\": \"flt_no\",\n          \"overlap_ratio\": 0.7758620689655172,\n          \"sample_values\": [\n            \"OZ605\",\n            \"KE456\",\n            \"TW804\",\n            \"OZ201\",\n            \"TW602\"\n          ]\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"baggage_handling\",\n      \"delay_records\"\n    ],\n    \"source_evidence\": {\n      \"homeomorphism_type\": \"value_based\",\n      \"confidence\": 0.55935960591133\n    },\n    \"confidence\": 0.55935960591133,\n    \"status\": \"pending\",\n    \"algorithmic_assessment\": {\n      \"definition_quality\": 50,\n      \"evidence_strength\": 47,\n      \"consistency\": 100,\n      \"completeness\": 100,\n      \"overall_score\": 71,\n      \"algorithmic_decision\": \"approved\",\n      \"auto_feedback\": [\n        \"Good quality with minor improvements possible\"\n      ],\n      \"improvements_needed\": []\n    }\n  }\n]\n\nFor each concept:\n1. Validate or adjust the algorithmic scores\n2. Provide specific feedback\n3. Make final decision (approved/provisional/rejected)\n\nReturn JSON:\n```json\n{\n  \"quality_assessments\": [\n    {\n      \"concept_id\": \"<id>\",\n      \"scores\": {\n        \"definition_quality\": <int 0-100>,\n        \"evidence_strength\": <int 0-100>,\n        \"consistency\": <int 0-100>,\n        \"completeness\": <int 0-100>\n      },\n      \"overall_score\": <int 0-100>,\n      \"decision\": \"<approved|provisional|rejected>\",\n      \"feedback\": [\"feedback1\", \"feedback2\"],\n      \"improvements_needed\": [\"improvement1\"],\n      \"justification\": \"<why this decision>\"\n    }\n  ]\n}\n```"}], "response": "```json\n{\n  \"quality_assessments\": [\n    {\n      \"concept_id\": \"obj_ENT_EMPLOYEE\",\n      \"reasoning\": {\n        \"definition_analysis\": \"The concept has a clear name 'Airportemployee' (though naming could be improved to 'AirportEmployee' for PascalCase consistency). The description is generic but adequate. All 14 attributes are well-defined with source table, data types, and nullability specified. The entity represents a clear business concept.\",\n        \"evidence_review\": \"Match rate is 0.9 (90%) which is strong evidence. Single source table 'airport_employees' provides consistent data. Confidence of 0.9 indicates reliable extraction.\",\n        \"consistency_check\": \"Name 'Airportemployee' violates PascalCase convention (should be 'AirportEmployee'). Some attribute type classifications seem incorrect (e.g., 'certifications' marked as 'temporal' should likely be 'textual' or 'list').\",\n        \"completeness_audit\": \"All required fields present. Primary keys defined. 14 attributes extracted with full metadata. No missing critical information.\"\n      },\n      \"scores\": {\n        \"definition_quality\": 20,\n        \"evidence_strength\": 23,\n        \"consistency\": 18,\n        \"completeness\": 24\n      },\n      \"overall_score\": 85,\n      \"decision\": \"approved\",\n      \"feedback\": [\n        \"Rename to 'AirportEmployee' for proper PascalCase convention\",\n        \"Review attribute type classifications - 'certifications' should not be 'temporal'\",\n        \"Consider adding relationship to supervisor entity via supervisor_id\"\n      ],\n      \"improvements_needed\": [\n        \"Fix naming convention to PascalCase\"\n      ],\n      \"justification\": \"Strong evidence (90% match rate) with complete attribute definitions. Minor naming convention issue does not impact usability.\"\n    },\n    {\n      \"concept_id\": \"obj_ENT_AIRLINE\",\n      \"reasoning\": {\n        \"definition_analysis\": \"Clear entity name 'Airline' follows conventions. Description adequately explains the business purpose. 12 well-defined attributes covering identification (IATA/ICAO codes), operational data (hub, fleet), and contact information.\",\n        \"evidence_review\": \"Excellent match rate of 0.95 (95%) provides strong evidence. Single source 'airlines' table with high confidence 0.95. This is among the highest quality extractions.\",\n        \"consistency_check\": \"Name follows PascalCase correctly. Some attribute types need review - 'country' marked as 'measure' should be 'dimension' or 'categorical'.\",\n        \"completeness_audit\": \"All fields present with proper metadata. Dual identifier system (IATA/ICAO) properly captured. Complete contact and operational attributes.\"\n      },\n      \"scores\": {\n        \"definition_quality\": 22,\n        \"evidence_strength\": 24,\n        \"consistency\": 22,\n        \"completeness\": 25\n      },\n      \"overall_score\": 93,\n      \"decision\": \"approved\",\n      \"feedback\": [\n        \"Excellent extraction quality with 95% match rate\",\n        \"Correct 'country' attribute type from 'measure' to 'dimension'\",\n        \"Consider adding relationship links to hub_airport entity\"\n      ],\n      \"improvements_needed\": [],\n      \"justification\": \"High-quality entity with excellent evidence strength and complete definition. Minor attribute type correction needed but fully usable.\"\n    },\n    {\n      \"concept_id\": \"obj_ENT_AIRCRAFT\",\n      \"reasoning\": {\n        \"definition_analysis\": \"Clear entity 'Aircraft' with comprehensive attributes covering registration, specifications, and operational data. 15 attributes provide thorough coverage of aircraft characteristics.\",\n        \"evidence_review\": \"Match rate 0.9 (90%) is strong. Source 'aircraft_registry' is authoritative. Confidence 0.9 indicates reliable extraction.\",\n        \"consistency_check\": \"Name follows PascalCase. Multiple attribute type issues: 'operator_name' marked as 'temporal' should be 'textual'; seat configurations marked as 'temporal' should be 'measure'.\",\n        \"completeness_audit\": \"Comprehensive attribute set. Registration, manufacturer, operator, and specifications all captured. Seat configuration breakdown (F/C/Y) shows good detail.\"\n      },\n      \"scores\": {\n        \"definition_quality\": 21,\n        \"evidence_strength\": 23,\n        \"consistency\": 17,\n        \"completeness\": 25\n      },\n      \"overall_score\": 86,\n      \"decision\": \"approved\",\n      \"feedback\": [\n        \"Fix attribute type for 'operator_name' from 'temporal' to 'textual'\",\n        \"Correct seat_config_f/c/y types from 'temporal' to 'measure'\",\n        \"Consider linking operator_code to Airline entity\"\n      ],\n      \"improvements_needed\": [\n        \"Correct multiple attribute type classifications\"\n      ],\n      \"justification\": \"Strong evidence with comprehensive aircraft data. Attribute type misclassifications are cosmetic issues that don't affect data integrity.\"\n    },\n    {\n      \"concept_id\": \"obj_ENT_PASSENGER\",\n      \"reasoning\": {\n        \"definition_analysis\": \"Clear 'Passenger' entity with 14 attributes covering booking, identification, flight assignment, and service details. Well-structured for passenger management.\",\n        \"evidence_review\": \"Excellent 0.95 (95%) match rate. High confidence 0.95 from 'passengers' source table. Strong evidence base.\",\n        \"consistency_check\": \"Name follows PascalCase. Several type issues: 'nationality' and 'seat_class' marked as 'temporal' should be 'dimension'; 'boarding_status' should be 'categorical'.\",\n        \"completeness_audit\": \"Complete passenger profile with booking, identity, flight, and service attributes. Frequent flyer linkage included.\"\n      },\n      \"scores\": {\n        \"definition_quality\": 21,\n        \"evidence_strength\": 24,\n        \"consistency\": 18,\n        \"completeness\": 25\n      },\n      \"overall_score\": 88,\n      \"decision\": \"approved\",\n      \"feedback\": [\n        \"Correct 'nationality' type from 'temporal' to 'dimension'\",\n        \"Fix 'seat_class' and 'boarding_status' type classifications\",\n        \"Consider linking flight_num to Flight entity\"\n      ],\n      \"improvements_needed\": [\n        \"Fix attribute type misclassifications\"\n      ],\n      \"justification\": \"Excellent evidence (95% match) with complete passenger data model. Type classification issues are minor and don't impact functionality.\"\n    },\n    {\n      \"concept_id\": \"obj_ENT_GATE\",\n      \"reasoning\": {\n        \"definition_analysis\": \"Entity name 'Airportgate' should be 'AirportGate' for proper PascalCase. 12 attributes cover gate identification, physical characteristics, and operational status.\",\n        \"evidence_review\": \"Match rate 0.9 (90%) is strong. Source 'gates' table provides reliable data. Confidence 0.9 supports approval.\",\n        \"consistency_check\": \"Name violates PascalCase ('Airportgate' vs 'AirportGate'). Type issues: 'gate_type' and 'status' marked as 'temporal' should be 'categorical'; 'latitude' marked as 'temporal' should be 'measure'.\",\n        \"completeness_audit\": \"Good coverage of gate attributes including location (lat/long), capacity, and airline assignment. Maintenance tracking included.\"\n      },\n      \"scores\": {\n        \"definition_quality\": 19,\n        \"evidence_strength\": 23,\n        \"consistency\": 16,\n        \"completeness\": 24\n      },\n      \"overall_score\": 82,\n      \"decision\": \"approved\",\n      \"feedback\": [\n        \"Rename to 'AirportGate' for proper PascalCase\",\n        \"Fix 'gate_type' and 'status' types from 'temporal' to 'categorical'\",\n        \"Correct 'latitude' type from 'temporal' to 'measure'\",\n        \"Link assigned_airline to Airline entity\"\n      ],\n      \"improvements_needed\": [\n        \"Fix naming convention\",\n        \"Correct attribute type classifications\"\n      ],\n      \"justification\": \"Strong evidence supports this entity. Naming and type issues are correctable without affecting data quality.\"\n    },\n    {\n      \"concept_id\": \"obj_ENT_MAINTENANCE\",\n      \"reasoning\": {\n        \"definition_analysis\": \"Entity name 'Aircraftmaintenance' should be 'AircraftMaintenance'. 14 attributes comprehensively cover maintenance operations including scheduling, personnel, work orders, and costs.\",\n        \"evidence_review\": \"Match rate 0.9 (90%) provides strong evidence. Source 'aircraft_maintenance' is domain-appropriate. Confidence 0.9 is reliable.\",\n        \"consistency_check\": \"Name violates PascalCase. Type issues: 'labor_hours' marked as 'temporal' should be 'measure'.\",\n        \"completeness_audit\": \"Excellent coverage of maintenance workflow: aircraft identification, scheduling, personnel (mechanic/supervisor), work orders, findings, parts, and costs.\"\n      },\n      \"scores\": {\n        \"definition_quality\": 20,\n        \"evidence_strength\": 23,\n        \"consistency\": 17,\n        \"completeness\": 25\n      },\n      \"overall_score\": 85,\n      \"decision\": \"approved\",\n      \"feedback\": [\n        \"Rename to 'AircraftMaintenance' for proper PascalCase\",\n        \"Correct 'labor_hours' type from 'temporal' to 'measure'\",\n        \"Link aircraft_reg to Aircraft entity\",\n        \"Link mechanic_id and supervisor_id to Employee entity\"\n      ],\n      \"improvements_needed\": [\n        \"Fix naming convention\"\n      ],\n      \"justification\": \"Comprehensive maintenance entity with strong evidence. Minor naming issue doesn't impact operational value.\"\n    },\n    {\n      \"concept_id\": \"obj_ENT_BAGGAGE\",\n      \"reasoning\": {\n        \"definition_analysis\": \"Entity name 'Baggagehandling' should be 'BaggageHandling'. 14 attributes cover the complete baggage lifecycle from check-in to delivery.\",\n        \"evidence_review\": \"Match rate 0.85 (85%) is good though slightly lower than others. Confidence 0.85 is acceptable. Single source provides consistent data.\",\n        \"consistency_check\": \"Name violates PascalCase. Type issues: 'destination' and 'scan_status' marked as 'temporal' should be 'dimension' and 'categorical' respectively.\",\n        \"completeness_audit\": \"Complete baggage tracking: booking reference, flight, weight, location tracking, loading", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:15:58.787149", "agent_name": "Semantic Validator", "model": "claude-opus-4-5-20251101", "prompt_tokens": 11584, "completion_tokens": 4000, "total_tokens": 15584, "latency_ms": 64811.16724014282, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 2: Refinement (정제 단계)\n\n### 역할\nPhase 1에서 발견된 후보들을 **검증, 정제, 승인**하는 단계입니다.\n노이즈를 제거하고 신뢰할 수 있는 온톨로지를 구축합니다.\n\n### 입력 (Phase 1 산출물)\n\n```python\n# 검증해야 할 것들\ncontext.unified_entities     # 엔티티 후보 목록\ncontext.value_overlaps       # FK 관계 후보\ncontext.homeomorphisms       # 위상동형 관계\ncontext.schema_analysis      # 스키마 프로파일\ncontext.concept_relationships # 관계 후보\n```\n\n### 핵심 산출물\n\n```python\n# ontology_concepts: 정제된 온톨로지 개념\nOntologyConcept = {\n    \"concept_id\": str,          # 고유 ID (예: \"obj_product_001\")\n    \"name\": str,                # 표준화된 이름 (예: \"Product\")\n    \"type\": str,                # \"object_type\" | \"property\" | \"link_type\"\n    \"confidence\": float,        # 0.0-1.0\n    \"status\": str,              # ★ 핵심: \"approved\"|\"provisional\"|\"rejected\"|\"pending\"\n    \"source_tables\": [str],     # 출처 테이블\n    \"evidence\": {               # 근거\n        \"source_count\": int,\n        \"avg_confidence\": float,\n        \"key_columns\": [str]\n    }\n}\n```\n\n### ⚠️ 핵심: Quality Judge의 역할\n\n**Quality Judge는 반드시 각 concept의 `status`를 설정해야 합니다!**\n\n```python\n# status 결정 기준\nif quality_score >= 80 and evidence_strength >= 0.7:\n    status = \"approved\"      # 높은 품질, 즉시 사용 가능\nelif quality_score >= 60 and evidence_strength >= 0.5:\n    status = \"provisional\"   # 중간 품질, 추가 검토 필요\nelse:\n    status = \"rejected\"      # 낮은 품질, 제외\n\n# ❌ status가 \"pending\"이면 Phase 3의 LLM Review가 스킵됩니다!\n```\n\n### 성공 기준\n- 모든 concept에 status 설정 (pending 없어야 함)\n- approved + provisional >= 70%\n- 평균 confidence >= 0.7\n- 충돌 0건\n\n\n---\n\nYou are a Semantic Validation Expert for multi-domain data ontology.\n\nYour role is to VALIDATE and ENHANCE algorithmically extracted concepts.\n\nv5.2 Validation Philosophy:\n- DOMAIN AGNOSTIC: Concepts come from various industries (healthcare, ecommerce, etc.)\n- BE PERMISSIVE: If a concept is reasonably named and has data, it's likely valid\n- ITERATIVE IMPROVEMENT: Initial validation is exploratory, not final\n\nCommon Domain Patterns (examples only):\n- Healthcare: Patient, Provider, Claim, Encounter, Diagnosis\n- E-commerce: Customer, Order, Product, Payment\n- Finance: Account, Transaction, Customer\n\n## Chain-of-Thought Validation Process\n\nBefore providing your validation decision, you MUST reason through each step:\n\n### Step 1: Name Validity Analysis\n- Is the name readable and descriptive?\n- Does it follow domain naming conventions?\n- Provide evidence for your assessment.\n\n### Step 2: Data Evidence Assessment\n- Does the concept have source tables?\n- What is the data support strength?\n- How confident are you in the data backing?\n\n### Step 3: Relationship Plausibility Check\n- Are the defined relationships logically sound?\n- Do they align with domain expectations?\n- What inconsistencies (if any) exist?\n\n### Step 4: Usefulness Evaluation\n- Does this concept represent a real-world entity?\n- What business value does it provide?\n- Would this concept be useful in queries/analytics?\n\n## Validation Checklist (Permissive):\n1. Does the name roughly describe the concept? (YES if readable)\n2. Is there data supporting this concept? (YES if source exists)\n3. Are relationships plausible? (YES unless clearly wrong)\n4. Is this concept useful? (YES if represents real entity)\n\nIMPORTANT:\n- DEFAULT TO VALID when concept has data\n- Only reject if semantically nonsensical\n- Trust algorithmic extraction from actual data\n\n## Output Format\n```json\n{\n  \"semantic_validations\": [\n    {\n      \"concept_id\": \"<id>\",\n      \"chain_of_thought\": {\n        \"name_validity_analysis\": \"<your reasoning>\",\n        \"data_evidence_assessment\": \"<your reasoning>\",\n        \"relationship_plausibility\": \"<your reasoning>\",\n        \"usefulness_evaluation\": \"<your reasoning>\"\n      },\n      \"validation_result\": {\n        \"is_valid\": <boolean>,\n        \"confidence\": <float 0-1>,\n        \"domain_alignment\": \"<aligned|partial|misaligned>\",\n        \"issues\": [\"issue 1\", \"issue 2\"],\n        \"suggestions\": [\"suggestion 1\", \"suggestion 2\"]\n      }\n    }\n  ]\n}\n```\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "Validate the semantic correctness of these ontology concepts.\n\nDomain: aerospace\n\nConcepts with Algorithmic Validation:\n[\n  {\n    \"concept_id\": \"obj_ENT_EMPLOYEE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportemployee\",\n    \"description\": \"Airportemployee is a core entity in the aerospace domain sourced from airport_employees. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airportemployee-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"emp_code\",\n        \"name_first\",\n        \"name_last\",\n        \"department\",\n        \"job_title\",\n        \"hire_date\",\n        \"salary_grade\",\n        \"shift_pattern\",\n        \"supervisor_id\",\n        \"badge_access_level\",\n        \"certifications\",\n        \"language_skills\",\n        \"assigned_terminal\",\n        \"contract_type\"\n      ],\n      \"primary_keys\": [\n        \"airport_employees\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"emp_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_first\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"name_last\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"department\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"job_title\",\n          \"type\": \"textual\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"hire_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"salary_grade\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"shift_pattern\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"badge_access_level\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"certifications\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"language_skills\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"contract_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airport_employees\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRLINE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airline\",\n    \"description\": \"Airline is a core entity in the aerospace domain sourced from airlines. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airline-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"iata_code\",\n        \"icao_code\",\n        \"airline_name\",\n        \"airline_name_kr\",\n        \"country\",\n        \"alliance\",\n        \"hub_airport\",\n        \"founded_year\",\n        \"fleet_size\",\n        \"website\",\n        \"customer_service_phone\",\n        \"headquarters_city\"\n      ],\n      \"primary_keys\": [\n        \"airlines\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"iata_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"icao_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline_name_kr\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"country\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"alliance\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"hub_airport\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"founded_year\",\n          \"type\": \"temporal\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"fleet_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"website\",\n          \"type\": \"unknown\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"customer_service_phone\",\n          \"type\": \"textual\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"headquarters_city\",\n          \"type\": \"dimension\",\n          \"source_table\": \"airlines\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRCRAFT\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraft\",\n    \"description\": \"Aircraft is a core entity in the aerospace domain sourced from aircraft_registry. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing aircraft-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"registration_no\",\n        \"aircraft_model\",\n        \"manufacturer\",\n        \"serial_number\",\n        \"operator_code\",\n        \"operator_name\",\n        \"manufacture_date\",\n        \"delivery_date\",\n        \"seat_config_f\",\n        \"seat_config_c\",\n        \"seat_config_y\",\n        \"total_seats\",\n        \"max_range_nm\",\n        \"cruise_speed_kts\",\n        \"engine_type\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_registry\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"registration_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_model\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacturer\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"serial_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"operator_name\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"manufacture_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_f\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_c\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_config_y\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"total_seats\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_range_nm\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"cruise_speed_kts\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"engine_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_registry\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"aircraft_registry\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_PASSENGER\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Passenger\",\n    \"description\": \"Passenger is a core entity in the aerospace domain sourced from passengers. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing passenger-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"booking_ref\",\n        \"pnr_code\",\n        \"first_name\",\n        \"last_name\",\n        \"nationality\",\n        \"passport_no\",\n        \"flight_num\",\n        \"seat_class\",\n        \"seat_no\",\n        \"check_in_time\",\n        \"boarding_status\",\n        \"baggage_count\",\n        \"special_request\",\n        \"frequent_flyer_id\"\n      ],\n      \"primary_keys\": [\n        \"passengers\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"booking_ref\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"pnr_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"first_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"nationality\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"passport_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"flight_num\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_class\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"seat_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"check_in_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"baggage_count\",\n          \"type\": \"measure\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"special_request\",\n          \"type\": \"unknown\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"frequent_flyer_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"passengers\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_GATE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportgate\",\n    \"description\": \"Airportgate is a core entity in the aerospace domain sourced from gates. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing airportgate-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"gate_code\",\n        \"terminal\",\n        \"concourse\",\n        \"gate_type\",\n        \"max_aircraft_size\",\n        \"has_jetbridge\",\n        \"boarding_capacity\",\n        \"status\",\n        \"last_maintenance_date\",\n        \"assigned_airline\",\n        \"latitude\",\n        \"longitude\"\n      ],\n      \"primary_keys\": [\n        \"gates\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"gate_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"terminal\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"concourse\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"gate_type\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"max_aircraft_size\",\n          \"type\": \"measure\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"has_jetbridge\",\n          \"type\": \"boolean\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"boarding_capacity\",\n          \"type\": \"dimension\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"last_maintenance_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"assigned_airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"latitude\",\n          \"type\": \"temporal\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"longitude\",\n          \"type\": \"unknown\",\n          \"source_table\": \"gates\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"gates\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_MAINTENANCE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraftmaintenance\",\n    \"description\": \"Aircraftmaintenance is a core entity in the aerospace domain sourced from aircraft_maintenance. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing aircraftmaintenance-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"aircraft_reg\",\n        \"aircraft_type\",\n        \"airline\",\n        \"maintenance_type\",\n        \"scheduled_date\",\n        \"actual_start\",\n        \"actual_end\",\n        \"mechanic_id\",\n        \"supervisor_id\",\n        \"work_order_no\",\n        \"findings\",\n        \"parts_replaced\",\n        \"labor_hours\",\n        \"parts_cost_usd\"\n      ],\n      \"primary_keys\": [\n        \"aircraft_maintenance\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"aircraft_reg\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"aircraft_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"airline\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"maintenance_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"scheduled_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_start\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"actual_end\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"mechanic_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"supervisor_id\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"work_order_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"findings\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_replaced\",\n          \"type\": \"unknown\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"labor_hours\",\n          \"type\": \"temporal\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"parts_cost_usd\",\n          \"type\": \"measure\",\n          \"source_table\": \"aircraft_maintenance\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"aircraft_maintenance\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_BAGGAGE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Baggagehandling\",\n    \"description\": \"Baggagehandling is a core entity in the aerospace domain sourced from baggage_handling. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing baggagehandling-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"booking_reference\",\n        \"passenger_name\",\n        \"flt_number\",\n        \"origin\",\n        \"destination\",\n        \"weight_kg\",\n        \"bag_type\",\n        \"check_in_timestamp\",\n        \"belt_assigned\",\n        \"scan_status\",\n        \"current_location\",\n        \"loaded_to_aircraft\",\n        \"delivery_status\",\n        \"damage_reported\"\n      ],\n      \"primary_keys\": [\n        \"baggage_handling\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"booking_reference\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"passenger_name\",\n          \"type\": \"textual\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"flt_number\",\n          \"type\": \"identifier\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"origin\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"destination\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"weight_kg\",\n          \"type\": \"measure\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"float64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"bag_type\",\n          \"type\": \"dimension\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"check_in_timestamp\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"belt_assigned\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"scan_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"current_location\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"loaded_to_aircraft\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delivery_status\",\n          \"type\": \"temporal\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"damage_reported\",\n          \"type\": \"unknown\",\n          \"source_table\": \"baggage_handling\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"baggage_handling\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_DELAY\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Flightdelayrecord\",\n    \"description\": \"Flightdelayrecord is a core entity in the aerospace domain sourced from delay_records. It captures essential business data for operational and analytical purposes. This entity type is fundamental for tracking and managing flightdelayrecord-related activities.\",\n    \"definition\": {\n      \"attributes\": [\n        \"flt_no\",\n        \"carrier\",\n        \"scheduled_date\",\n        \"delay_minutes\",\n        \"delay_category\",\n        \"delay_code\",\n        \"delay_reason\",\n        \"weather_condition\",\n        \"responsible_party\",\n        \"reported_by\",\n        \"report_time\",\n        \"resolution_time\",\n        \"passenger_compensation\",\n        \"estimated_cost_usd\"\n      ],\n      \"primary_keys\": [\n        \"delay_records\"\n      ],\n      \"extracted_attributes\": [\n        {\n          \"name\": \"flt_no\",\n          \"type\": \"identifier\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"carrier\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"scheduled_date\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_minutes\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_category\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_code\",\n          \"type\": \"identifier\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"delay_reason\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"weather_condition\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"responsible_party\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"reported_by\",\n          \"type\": \"unknown\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"report_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"resolution_time\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"object\",\n          \"nullable\": true\n        },\n        {\n          \"name\": \"passenger_compensation\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"bool\",\n          \"nullable\": false\n        },\n        {\n          \"name\": \"estimated_cost_usd\",\n          \"type\": \"temporal\",\n          \"source_table\": \"delay_records\",\n          \"data_type\": \"int64\",\n          \"nullable\": false\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"delay_records\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  },\n  {\n    \"concept_id\": \"link_baggage_handling_delay_records\",\n    \"concept_type\": \"link_type\",\n    \"name\": \"baggage_handling_has_record\",\n    \"description\": \"Defines the relationship between baggage_handling and delay_records. This connection enables data integration and supports cross-entity analysis within the aerospace domain.\",\n    \"definition\": {\n      \"source\": \"baggage_handling\",\n      \"target\": \"delay_records\",\n      \"join_keys\": [\n        {\n          \"table_a_column\": \"flt_number\",\n          \"table_b_column\": \"flt_no\",\n          \"overlap_ratio\": 0.7758620689655172,\n          \"sample_values\": [\n            \"OZ605\",\n            \"KE456\",\n            \"TW804\",\n            \"OZ201\",\n            \"TW602\"\n          ]\n        }\n      ]\n    },\n    \"source_tables\": [\n      \"baggage_handling\",\n      \"delay_records\"\n    ],\n    \"algorithmic_validation\": {\n      \"name_valid\": true,\n      \"definition_valid\": true,\n      \"domain_appropriate\": true,\n      \"issues\": [],\n      \"suggestions\": [],\n      \"overall_valid\": true,\n      \"confidence\": 1.0\n    }\n  }\n]\n\nRelationships (for context):\n[\n  {\n    \"from_entity\": \"Maintenance\",\n    \"to_entity\": \"Employee\",\n    \"relationship_name\": \"performed_by\",\n    \"cardinality\": \"N:1\",\n    \"join_path\": \"aircraft_maintenance.mechanic_id -> airport_employees.emp_id\"\n  },\n  {\n    \"from_entity\": \"Baggage\",\n    \"to_entity\": \"Passenger\",\n    \"relationship_name\": \"belongs_to\",\n    \"cardinality\": \"N:1\",\n    \"join_path\": \"baggage_handling.booking_reference -> passengers.booking_ref\"\n  },\n  {\n    \"from_entity\": \"Delay\",\n    \"to_entity\": \"Baggage\",\n    \"relationship_name\": \"associated_with_flight\",\n    \"cardinality\": \"N:N\",\n    \"join_path\": \"delay_records.flt_no -> baggage_handling.flt_number\"\n  },\n  {\n    \"from_entity\": \"Maintenance\",\n    \"to_entity\": \"Gate\",\n    \"relationship_name\": \"airline_overlap\",\n    \"cardinality\": \"N:N\",\n    \"join_path\": \"aircraft_maintenance.airline -> gates.assigned_airline\"\n  }\n]\n\nFor each concept, validate:\n1. Name accuracy against domain standards\n2. Definition consistency with healthcare terminology\n3. Relationship semantic validity\n4. Constraint appropriateness\n\nReturn JSON:\n```json\n{\n  \"semantic_validations\": [\n    {\n      \"concept_id\": \"<id>\",\n      \"name_valid\": <bool>,\n      \"definition_valid\": <bool>,\n      \"domain_appropriate\": <bool>,\n      \"issues\": [\"issue1\"],\n      \"suggestions\": [\"suggestion1\"],\n      \"overall_valid\": <bool>,\n      \"confidence\": <float 0-1>,\n      \"domain_standards_matched\": [\"ICD-10\", \"SNOMED CT\"]\n    }\n  ],\n  \"relationship_validations\": [\n    {\n      \"relationship\": \"<from> -> <to>\",\n      \"semantically_valid\": <bool>,\n      \"issues\": [\"issue1\"]\n    }\n  ],\n  \"anti_patterns_detected\": [\"pattern1\"]\n}\n```"}], "response": "```json\n{\n  \"semantic_validations\": [\n    {\n      \"concept_id\": \"obj_ENT_EMPLOYEE\",\n      \"chain_of_thought\": {\n        \"name_validity_analysis\": \"The name 'Airportemployee' is readable but could be improved with proper spacing ('Airport Employee'). It clearly describes personnel working at an airport, which is appropriate for the aerospace domain. The name follows a compound noun pattern common in data modeling.\",\n        \"data_evidence_assessment\": \"Strong data support exists with source table 'airport_employees' containing 14 well-defined attributes including emp_code (identifier), name fields, department, job_title, hire_date, and operational attributes like shift_pattern, badge_access_level, and assigned_terminal. The data structure is comprehensive for employee management.\",\n        \"relationship_plausibility\": \"The concept has implicit relationships through supervisor_id (self-referential hierarchy) and assigned_terminal (location assignment). These are logically sound for airport operations. The mechanic_id reference from maintenance records confirms cross-entity relationships.\",\n        \"usefulness_evaluation\": \"This concept represents a real-world entity essential for airport operations - tracking staff assignments, certifications, access levels, and scheduling. High business value for workforce management, security compliance, and operational planning.\"\n      },\n      \"validation_result\": {\n        \"is_valid\": true,\n        \"confidence\": 0.95,\n        \"domain_alignment\": \"aligned\",\n        \"issues\": [\n          \"Name formatting could use space separation ('Airport Employee')\"\n        ],\n        \"suggestions\": [\n          \"Consider renaming to 'AirportEmployee' or 'Airport_Employee' for better readability\",\n          \"Add relationship to Terminal entity for assigned_terminal FK\"\n        ]\n      }\n    },\n    {\n      \"concept_id\": \"obj_ENT_AIRLINE\",\n      \"chain_of_thought\": {\n        \"name_validity_analysis\": \"The name 'Airline' is perfectly clear, concise, and follows standard aerospace domain terminology. It is universally understood and requires no modification.\",\n        \"data_evidence_assessment\": \"Excellent data support from 'airlines' table with 12 attributes covering identification (iata_code, icao_code), descriptive fields (airline_name, airline_name_kr), operational data (hub_airport, fleet_size), and contact information. The dual code system (IATA/ICAO) follows industry standards.\",\n        \"relationship_plausibility\": \"Airlines logically connect to aircraft (operator), flights, gates (assigned_airline), and maintenance records. The hub_airport attribute suggests relationship to airport entities. Alliance membership enables grouping analysis.\",\n        \"usefulness_evaluation\": \"Core entity for any aerospace system. Essential for flight operations, route planning, alliance analysis, fleet management, and customer service. Extremely high business value.\"\n      },\n      \"validation_result\": {\n        \"is_valid\": true,\n        \"confidence\": 0.98,\n        \"domain_alignment\": \"aligned\",\n        \"issues\": [],\n        \"suggestions\": [\n          \"Consider adding 'active_status' attribute for operational airlines\",\n          \"The 'country' attribute type is marked as 'measure' but should be 'dimension'\"\n        ]\n      }\n    },\n    {\n      \"concept_id\": \"obj_ENT_AIRCRAFT\",\n      \"chain_of_thought\": {\n        \"name_validity_analysis\": \"The name 'Aircraft' is industry-standard terminology, clear and unambiguous. It correctly represents physical aviation assets and follows aerospace naming conventions.\",\n        \"data_evidence_assessment\": \"Comprehensive data from 'aircraft_registry' with 15 attributes covering registration (registration_no, serial_number), specifications (aircraft_model, manufacturer, engine_type), capacity (seat configurations, total_seats), and performance (max_range_nm, cruise_speed_kts). This matches real-world aircraft registry requirements.\",\n        \"relationship_plausibility\": \"Aircraft connects to airlines via operator_code, to maintenance records, to flights, and potentially to gates. The operator relationship is explicitly defined. These relationships are fundamental to aerospace operations.\",\n        \"usefulness_evaluation\": \"Critical entity for fleet management, maintenance scheduling, capacity planning, and operational efficiency. The detailed seat configuration supports revenue management. Very high business value.\"\n      },\n      \"validation_result\": {\n        \"is_valid\": true,\n        \"confidence\": 0.97,\n        \"domain_alignment\": \"aligned\",\n        \"issues\": [\n          \"Some attribute types are incorrectly classified (e.g., seat_config_* marked as 'temporal' should be 'measure')\",\n          \"operator_name marked as 'temporal' should be 'textual'\"\n        ],\n        \"suggestions\": [\n          \"Review and correct attribute type classifications\",\n          \"Add aircraft_status attribute for operational/grounded/retired states\"\n        ]\n      }\n    },\n    {\n      \"concept_id\": \"obj_ENT_PASSENGER\",\n      \"chain_of_thought\": {\n        \"name_validity_analysis\": \"The name 'Passenger' is universally understood in the aerospace domain. It clearly represents individuals traveling on flights and is the standard industry term.\",\n        \"data_evidence_assessment\": \"Well-structured data from 'passengers' table with 14 attributes covering booking (booking_ref, pnr_code), identity (first_name, last_name, passport_no, nationality), flight details (flight_num, seat_class, seat_no), and operational status (check_in_time, boarding_status, baggage_count). This supports complete passenger journey tracking.\",\n        \"relationship_plausibility\": \"Passengers connect to flights (flight_num), baggage (booking_reference), frequent flyer programs (frequent_flyer_id), and potentially to airlines. The baggage relationship is confirmed in the provided relationships.\",\n        \"usefulness_evaluation\": \"Essential entity for passenger services, check-in operations, boarding management, and customer analytics. Supports loyalty programs and special service requests. Core business value.\"\n      },\n      \"validation_result\": {\n        \"is_valid\": true,\n        \"confidence\": 0.96,\n        \"domain_alignment\": \"aligned\",\n        \"issues\": [\n          \"nationality marked as 'temporal' should be 'dimension'\",\n          \"seat_class marked as 'temporal' should be 'dimension'\",\n          \"boarding_status marked as 'temporal' should be 'dimension' or 'status'\"\n        ],\n        \"suggestions\": [\n          \"Correct attribute type classifications\",\n          \"Consider adding email and phone for contact purposes\",\n          \"Add relationship to Flight entity explicitly\"\n        ]\n      }\n    },\n    {\n      \"concept_id\": \"obj_ENT_GATE\",\n      \"chain_of_thought\": {\n        \"name_validity_analysis\": \"The name 'Airportgate' is readable but could benefit from separation ('Airport Gate' or 'Gate'). In aerospace context, 'Gate' alone would be sufficient and clearer as it's understood to be an airport gate.\",\n        \"data_evidence_assessment\": \"Good data support from 'gates' table with 12 attributes covering identification (gate_code), location (terminal, concourse, latitude, longitude), capabilities (gate_type, max_aircraft_size, has_jetbridge, boarding_capacity), and operational status. Geographic coordinates enable spatial analysis.\",\n        \"relationship_plausibility\": \"Gates connect to airlines (assigned_airline), terminals, and flights. The maintenance relationship through airline overlap is noted. These relationships support gate assignment and operations planning.\",\n        \"usefulness_evaluation\": \"Important entity for ground operations, gate assignment optimization, and capacity planning. Supports real-time operations and resource allocation. Significant business value.\"\n      },\n      \"validation_result\": {\n        \"is_valid\": true,\n        \"confidence\": 0.93,\n        \"domain_alignment\": \"aligned\",\n        \"issues\": [\n          \"Name could be simplified to 'Gate'\",\n          \"gate_type marked as 'temporal' should be 'dimension'\",\n          \"status marked as 'temporal' should be 'dimension'\",\n          \"latitude marked as 'temporal' should be 'geospatial'\"\n        ],\n        \"suggestions\": [\n          \"Consider renaming to 'Gate' for simplicity\",\n          \"Correct attribute type classifications\",\n          \"Add relationship to Terminal entity\"\n        ]\n      }\n    },\n    {\n      \"concept_id\": \"obj_ENT_MAINTENANCE\",\n      \"chain_of_thought\": {\n        \"name_validity_analysis\": \"The name 'Aircraftmaintenance' clearly describes maintenance activities for aircraft. While readable, it could be formatted as 'Aircraft Maintenance' or simplified to 'MaintenanceRecord'. It accurately represents the domain concept.\",\n        \"data_evidence_assessment\": \"Comprehensive data from 'aircraft_maintenance' table with 14 attributes covering aircraft identification (aircraft_reg, aircraft_type), scheduling (scheduled_date, actual_start, actual_end), personnel (mechanic_id, supervisor_id), work tracking (work_order_no, findings, parts_replaced), and costs (labor_hours, parts_cost_usd). This supports complete maintenance lifecycle tracking.\",\n        \"relationship_plausibility\": \"Maintenance connects to aircraft (aircraft_reg), employees (mechanic_id, supervisor_id), and airlines. The employee relationship is confirmed in provided relationships. These are essential for maintenance operations.\",\n        \"usefulness_evaluation\": \"Critical entity for safety compliance, maintenance scheduling, cost tracking, and regulatory reporting. Supports predictive maintenance and fleet reliability analysis. Very high business value.\"\n      },\n      \"validation_result\": {\n        \"is_valid\": true,\n        \"confidence\": 0.95,\n        \"domain_alignment\": \"aligned\",\n        \"issues\": [\n          \"labor_hours marked as 'temporal' should be 'measure'\"\n        ],\n        \"suggestions\": [\n          \"Consider renaming to 'MaintenanceRecord' or 'Aircra", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:16:38.925480", "agent_name": "Governance Strategist", "model": "claude-opus-4-5-20251101", "prompt_tokens": 4516, "completion_tokens": 2857, "total_tokens": 7373, "latency_ms": 40103.816986083984, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 3: Governance (거버넌스 단계)\n\n### 역할\n정제된 온톨로지에 대해 **비즈니스 결정을 내리고 실행 계획을 수립**하는 단계입니다.\n\n### 입력 (Phase 2 산출물)\n\n```python\n# 평가 대상\ncontext.ontology_concepts    # status가 설정된 온톨로지 개념\n    # status == \"approved\" or \"provisional\" → LLM Review 대상\n    # status == \"rejected\" → 스킵\n```\n\n### 핵심 산출물\n\n```python\n# GovernanceDecision: 거버넌스 결정\nGovernanceDecision = {\n    \"decision_id\": str,\n    \"concept_id\": str,\n    \"decision_type\": str,       # \"approve\"|\"reject\"|\"schedule_review\"|\"escalate\"\n    \"confidence\": float,        # 보정된 최종 신뢰도\n    \"reasoning\": str,           # 결정 근거\n    \"agent_opinions\": {\n        \"algorithmic\": {},      # 알고리즘 기반 결정\n        \"llm_review\": {},       # LLM 검토 결과 (★ quality_score 여기서 계산)\n        \"embedded_llm_judge\": {},  # 품질 평가 (4개 기준)\n        \"enhanced_validation\": {}  # DS/BFT 검증 결과\n    },\n    \"recommended_actions\": [\n        {\n            \"action_type\": str,     # \"documentation\"|\"implementation\"|\"monitoring\"|\"review\"\n            \"description\": str,\n            \"priority\": str         # \"critical\"|\"high\"|\"medium\"|\"low\"\n        }\n    ]\n}\n```\n\n### 핵심 메트릭\n\n**1. Quality Score (LLM Review에서 계산)**\n```python\n# needs_review: status가 approved/provisional인 concept만\nneeds_review = [c for c in concepts if c.status in (\"approved\", \"provisional\")]\n\nfor concept in needs_review:\n    llm_review = await _llm_review_decisions(concept)\n    quality_score = llm_review.get(\"quality_score\", 0)  # 0-100\n```\n\n**2. Embedded LLM Judge (4개 기준 평가)**\n```python\nevaluation_criteria = {\n    \"decision_evidence_alignment\": weight=1.5,  # 결정-증거 일치\n    \"reasoning_quality\": weight=1.2,            # 추론 품질\n    \"policy_compliance\": weight=1.3,            # 정책 준수\n    \"multi_agent_consensus\": weight=1.0         # 다중 에이전트 합의\n}\n# 총점 >= 70% → PASS\n```\n\n**3. Enhanced Validation (DS/BFT)**\n```python\nenhanced_validation = {\n    \"ds_confidence\": float,     # Dempster-Shafer 융합 신뢰도\n    \"bft_agreement\": float,     # Byzantine Fault Tolerant 합의율\n    \"byzantine_detected\": [],   # 탐지된 Byzantine 에이전트\n    \"calibrated_confidence\": float  # 보정된 최종 신뢰도\n}\n```\n\n### 성공 기준\n- Quality Score >= 70%\n- Embedded LLM Judge >= 70% (PASS)\n- 모든 concept에 governance_decision 존재\n- 실행 가능한 recommended_actions 포함\n\n\n---\n\nYou are a Data Governance Strategist with executive-level decision authority.\n\nYour role is to REVIEW and VALIDATE algorithmic governance decisions.\n\nv5.2 Decision Framework (More Permissive):\n- APPROVE: Confidence ≥55%, evidence ≥40%, risk not high\n  → Default to APPROVE when data is present and reasonable\n- REJECT: Only for clearly problematic cases (quality <25%)\n- ESCALATE: Medium confidence (35-55%) with high business value\n- SCHEDULE_REVIEW: Provisional, needs periodic monitoring\n\nGovernance Criteria:\n- Data Quality: Is underlying data present? (presence > perfection)\n- Business Value: Does concept represent real business entity?\n- Compliance: Basic regulatory awareness\n- Sustainability: Can be improved iteratively?\n\nIMPORTANT:\n- PREFER APPROVE over REJECT when evidence exists\n- Data discovery is exploratory - initial findings should be accepted provisionally\n- Perfect is the enemy of good - approve reasonable concepts\n- Base decisions on algorithmic scores. Override only with strong justification.\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "Review these algorithmic governance decisions.\n\nDomain: aerospace\n\nConcepts with Algorithmic Decisions:\n[\n  {\n    \"concept_id\": \"obj_ENT_EMPLOYEE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportemployee\",\n    \"confidence\": 0.9,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"airport_employees\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.835,\n      \"reasoning\": \"High quality (85%); Strong evidence (84%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 85.0,\n      \"evidence_strength\": 83.5\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRLINE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airline\",\n    \"confidence\": 0.95,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.95,\n      \"confidence\": 0.95,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"airlines\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8675,\n      \"reasoning\": \"High quality (93%); Strong evidence (87%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 93.0,\n      \"evidence_strength\": 86.75\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_AIRCRAFT\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraft\",\n    \"confidence\": 0.9,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"aircraft_registry\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.835,\n      \"reasoning\": \"High quality (86%); Strong evidence (84%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 86.0,\n      \"evidence_strength\": 83.5\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_PASSENGER\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Passenger\",\n    \"confidence\": 0.95,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.95,\n      \"confidence\": 0.95,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"passengers\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8675,\n      \"reasoning\": \"High quality (88%); Strong evidence (87%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 88.0,\n      \"evidence_strength\": 86.75\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_GATE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Airportgate\",\n    \"confidence\": 0.9,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"gates\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.82,\n      \"reasoning\": \"High quality (82%); Strong evidence (84%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 82.0,\n      \"evidence_strength\": 83.5\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_MAINTENANCE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Aircraftmaintenance\",\n    \"confidence\": 0.9,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.9,\n      \"confidence\": 0.9,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"aircraft_maintenance\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.835,\n      \"reasoning\": \"High quality (85%); Strong evidence (84%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 85.0,\n      \"evidence_strength\": 83.5\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_BAGGAGE\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Baggagehandling\",\n    \"confidence\": 0.85,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.85,\n      \"confidence\": 0.85,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"baggage_handling\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8,\n      \"reasoning\": \"High quality (80%); Strong evidence (80%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 80.0,\n      \"evidence_strength\": 80.25\n    }\n  },\n  {\n    \"concept_id\": \"obj_ENT_DELAY\",\n    \"concept_type\": \"object_type\",\n    \"name\": \"Flightdelayrecord\",\n    \"confidence\": 0.85,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"match_rate\": 0.85,\n      \"confidence\": 0.85,\n      \"source_count\": 1\n    },\n    \"source_tables\": [\n      \"delay_records\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8,\n      \"reasoning\": \"High quality (80%); Strong evidence (80%); Acceptable risk (low)\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 80.0,\n      \"evidence_strength\": 80.25\n    }\n  },\n  {\n    \"concept_id\": \"link_baggage_handling_delay_records\",\n    \"concept_type\": \"link_type\",\n    \"name\": \"baggage_handling_has_record\",\n    \"confidence\": 0.55935960591133,\n    \"status\": \"approved\",\n    \"source_evidence\": {\n      \"homeomorphism_type\": \"value_based\",\n      \"confidence\": 0.55935960591133\n    },\n    \"source_tables\": [\n      \"baggage_handling\",\n      \"delay_records\"\n    ],\n    \"algorithmic_decision\": {\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.49577586206896557,\n      \"reasoning\": \"High quality (79%); Strong evidence (50%); Acceptable risk (low)\",\n      \"business_value\": \"medium\",\n      \"risk_level\": \"low\",\n      \"quality_score\": 79.0,\n      \"evidence_strength\": 49.577586206896555\n    }\n  }\n]\n\nFor each concept:\n1. Validate or adjust the algorithmic decision\n2. Add business context and reasoning\n3. Suggest specific recommended actions\n\nReturn JSON:\n```json\n{\n  \"reviewed_decisions\": [\n    {\n      \"concept_id\": \"<id>\",\n      \"decision_type\": \"<approve|reject|escalate|schedule_review>\",\n      \"confidence\": <float 0-1>,\n      \"reasoning\": \"<enhanced reasoning with business context>\",\n      \"business_value\": \"<high|medium|low>\",\n      \"risk_level\": \"<high|medium|low>\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"<implementation|review|monitoring|documentation>\",\n          \"description\": \"<specific action>\",\n          \"priority\": \"<critical|high|medium|low>\"\n        }\n      ],\n      \"stakeholders\": [\"role1\", \"role2\"],\n      \"override_algorithmic\": <bool>,\n      \"override_reason\": \"<if overriding, explain why>\"\n    }\n  ]\n}\n```"}], "response": "```json\n{\n  \"reviewed_decisions\": [\n    {\n      \"concept_id\": \"obj_ENT_EMPLOYEE\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.835,\n      \"reasoning\": \"Airport Employee is a core operational entity in aerospace domain. High confidence (90%) from source data with strong algorithmic quality score (85%). Essential for workforce management, security clearances, and operational scheduling. Single source table 'airport_employees' provides clear lineage.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Integrate with HR systems for employee lifecycle management and badge access controls\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"documentation\",\n          \"description\": \"Document employee role hierarchies and security clearance levels as entity attributes\",\n          \"priority\": \"medium\"\n        },\n        {\n          \"action_type\": \"monitoring\",\n          \"description\": \"Set up data quality alerts for employee record completeness (contact info, certifications)\",\n          \"priority\": \"medium\"\n        }\n      ],\n      \"stakeholders\": [\"HR Director\", \"Airport Operations Manager\", \"Security Officer\"],\n      \"override_algorithmic\": false,\n      \"override_reason\": null\n    },\n    {\n      \"concept_id\": \"obj_ENT_AIRLINE\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8675,\n      \"reasoning\": \"Airline is a fundamental business entity with highest confidence (95%) among discovered concepts. Critical for flight operations, slot allocation, and commercial agreements. Quality score of 93% indicates excellent data integrity. Central to revenue and partnership management.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Establish as master data entity with integration to IATA airline codes and alliance memberships\",\n          \"priority\": \"critical\"\n        },\n        {\n          \"action_type\": \"documentation\",\n          \"description\": \"Define airline attributes including operating certificates, hub designations, and service level agreements\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"monitoring\",\n          \"description\": \"Track airline operational metrics (on-time performance, passenger volumes) linked to this entity\",\n          \"priority\": \"high\"\n        }\n      ],\n      \"stakeholders\": [\"Commercial Director\", \"Operations Director\", \"Airline Relations Manager\"],\n      \"override_algorithmic\": false,\n      \"override_reason\": null\n    },\n    {\n      \"concept_id\": \"obj_ENT_AIRCRAFT\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.835,\n      \"reasoning\": \"Aircraft is a critical operational asset in aerospace. 90% confidence with quality score of 86% from aircraft_registry table. Essential for maintenance tracking, capacity planning, and regulatory compliance (FAA/EASA requirements). Core entity for safety management systems.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Link to aircraft type certificates and airworthiness directives for compliance tracking\",\n          \"priority\": \"critical\"\n        },\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Integrate with maintenance management system (MRO) for lifecycle tracking\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"documentation\",\n          \"description\": \"Document aircraft specifications, seating configurations, and range capabilities as attributes\",\n          \"priority\": \"medium\"\n        }\n      ],\n      \"stakeholders\": [\"Maintenance Director\", \"Safety Officer\", \"Fleet Planning Manager\"],\n      \"override_algorithmic\": false,\n      \"override_reason\": null\n    },\n    {\n      \"concept_id\": \"obj_ENT_PASSENGER\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8675,\n      \"reasoning\": \"Passenger entity has highest confidence (95%) with strong quality score (88%). Central to customer experience, revenue management, and regulatory compliance (passenger manifests, security screening). Critical for loyalty programs and service personalization.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Implement PII protection controls and GDPR/privacy compliance measures for passenger data\",\n          \"priority\": \"critical\"\n        },\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Integrate with frequent flyer and loyalty program systems\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"documentation\",\n          \"description\": \"Define passenger journey touchpoints and data retention policies\",\n          \"priority\": \"high\"\n        }\n      ],\n      \"stakeholders\": [\"Customer Experience Director\", \"Data Privacy Officer\", \"Revenue Management\"],\n      \"override_algorithmic\": false,\n      \"override_reason\": null\n    },\n    {\n      \"concept_id\": \"obj_ENT_GATE\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.82,\n      \"reasoning\": \"Airport Gate is essential infrastructure entity for flight operations. 90% confidence with 82% quality score. Critical for turnaround management, passenger flow, and resource allocation. Directly impacts on-time performance metrics.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Integrate with Airport Collaborative Decision Making (A-CDM) systems for real-time gate allocation\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"documentation\",\n          \"description\": \"Document gate capabilities (aircraft size restrictions, jet bridge availability, ground power)\",\n          \"priority\": \"medium\"\n        },\n        {\n          \"action_type\": \"monitoring\",\n          \"description\": \"Track gate utilization rates and turnaround times for capacity optimization\",\n          \"priority\": \"medium\"\n        }\n      ],\n      \"stakeholders\": [\"Terminal Operations Manager\", \"Ramp Controller\", \"Airline Station Managers\"],\n      \"override_algorithmic\": false,\n      \"override_reason\": null\n    },\n    {\n      \"concept_id\": \"obj_ENT_MAINTENANCE\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.835,\n      \"reasoning\": \"Aircraft Maintenance is safety-critical entity with regulatory implications. 90% confidence and 85% quality score. Essential for airworthiness compliance, component tracking, and maintenance forecasting. Directly linked to Aircraft entity for lifecycle management.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Establish traceability to regulatory requirements (AD compliance, service bulletins)\",\n          \"priority\": \"critical\"\n        },\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Link maintenance records to Aircraft entity for complete maintenance history\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"monitoring\",\n          \"description\": \"Set up alerts for upcoming scheduled maintenance and component life limits\",\n          \"priority\": \"high\"\n        }\n      ],\n      \"stakeholders\": [\"Maintenance Director\", \"Quality Assurance Manager\", \"Regulatory Compliance Officer\"],\n      \"override_algorithmic\": false,\n      \"override_reason\": null\n    },\n    {\n      \"concept_id\": \"obj_ENT_BAGGAGE\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8,\n      \"reasoning\": \"Baggage Handling is operationally important with 85% confidence and 80% quality score. Critical for passenger satisfaction and operational efficiency. Mishandled baggage is a key service quality indicator. Supports tracking and reconciliation processes.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Integrate with Baggage Reconciliation System (BRS) for real-time tracking\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"documentation\",\n          \"description\": \"Document baggage handling SLAs and mishandled baggage reporting requirements\",\n          \"priority\": \"medium\"\n        },\n        {\n          \"action_type\": \"monitoring\",\n          \"description\": \"Track baggage handling KPIs (connection success rate, mishandled per 1000 passengers)\",\n          \"priority\": \"medium\"\n        }\n      ],\n      \"stakeholders\": [\"Ground Handling Manager\", \"Customer Service Director\", \"Airline Station Managers\"],\n      \"override_algorithmic\": false,\n      \"override_reason\": null\n    },\n    {\n      \"concept_id\": \"obj_ENT_DELAY\",\n      \"decision_type\": \"approve\",\n      \"confidence\": 0.8,\n      \"reasoning\": \"Flight Delay Record is essential for operational analytics and regulatory reporting. 85% confidence with 80% quality score. Critical for root cause analysis, compensation management, and performance improvement. Required for EU261 compliance and DOT reporting.\",\n      \"business_value\": \"high\",\n      \"risk_level\": \"low\",\n      \"recommended_actions\": [\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Integrate with IATA delay codes for standardized categorization\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"implementation\",\n          \"description\": \"Link to Aircraft, Airline, and Gate entities for comprehensive delay attribution\",\n          \"priority\": \"high\"\n        },\n        {\n          \"action_type\": \"monitoring\",\n          \"description\": \"Establish delay trend dashboards fo", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:17:35.033644", "agent_name": "Action Prioritizer", "model": "gpt-5.1", "prompt_tokens": 4422, "completion_tokens": 4000, "total_tokens": 8422, "latency_ms": 56085.71696281433, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 3: Governance (거버넌스 단계)\n\n### 역할\n정제된 온톨로지에 대해 **비즈니스 결정을 내리고 실행 계획을 수립**하는 단계입니다.\n\n### 입력 (Phase 2 산출물)\n\n```python\n# 평가 대상\ncontext.ontology_concepts    # status가 설정된 온톨로지 개념\n    # status == \"approved\" or \"provisional\" → LLM Review 대상\n    # status == \"rejected\" → 스킵\n```\n\n### 핵심 산출물\n\n```python\n# GovernanceDecision: 거버넌스 결정\nGovernanceDecision = {\n    \"decision_id\": str,\n    \"concept_id\": str,\n    \"decision_type\": str,       # \"approve\"|\"reject\"|\"schedule_review\"|\"escalate\"\n    \"confidence\": float,        # 보정된 최종 신뢰도\n    \"reasoning\": str,           # 결정 근거\n    \"agent_opinions\": {\n        \"algorithmic\": {},      # 알고리즘 기반 결정\n        \"llm_review\": {},       # LLM 검토 결과 (★ quality_score 여기서 계산)\n        \"embedded_llm_judge\": {},  # 품질 평가 (4개 기준)\n        \"enhanced_validation\": {}  # DS/BFT 검증 결과\n    },\n    \"recommended_actions\": [\n        {\n            \"action_type\": str,     # \"documentation\"|\"implementation\"|\"monitoring\"|\"review\"\n            \"description\": str,\n            \"priority\": str         # \"critical\"|\"high\"|\"medium\"|\"low\"\n        }\n    ]\n}\n```\n\n### 핵심 메트릭\n\n**1. Quality Score (LLM Review에서 계산)**\n```python\n# needs_review: status가 approved/provisional인 concept만\nneeds_review = [c for c in concepts if c.status in (\"approved\", \"provisional\")]\n\nfor concept in needs_review:\n    llm_review = await _llm_review_decisions(concept)\n    quality_score = llm_review.get(\"quality_score\", 0)  # 0-100\n```\n\n**2. Embedded LLM Judge (4개 기준 평가)**\n```python\nevaluation_criteria = {\n    \"decision_evidence_alignment\": weight=1.5,  # 결정-증거 일치\n    \"reasoning_quality\": weight=1.2,            # 추론 품질\n    \"policy_compliance\": weight=1.3,            # 정책 준수\n    \"multi_agent_consensus\": weight=1.0         # 다중 에이전트 합의\n}\n# 총점 >= 70% → PASS\n```\n\n**3. Enhanced Validation (DS/BFT)**\n```python\nenhanced_validation = {\n    \"ds_confidence\": float,     # Dempster-Shafer 융합 신뢰도\n    \"bft_agreement\": float,     # Byzantine Fault Tolerant 합의율\n    \"byzantine_detected\": [],   # 탐지된 Byzantine 에이전트\n    \"calibrated_confidence\": float  # 보정된 최종 신뢰도\n}\n```\n\n### 성공 기준\n- Quality Score >= 70%\n- Embedded LLM Judge >= 70% (PASS)\n- 모든 concept에 governance_decision 존재\n- 실행 가능한 recommended_actions 포함\n\n\n---\n\nYou are an Action Prioritization Expert for data governance execution.\n\nYour role is to ENHANCE and SEQUENCE algorithmically prioritized actions.\n\nPriority Framework (already calculated):\n- CRITICAL: High impact, urgent, blocking issues\n- HIGH: Significant business impact, near-term deadlines\n- MEDIUM: Important improvements, moderate impact\n- LOW: Nice-to-have, long-term improvements\n\nYour Job:\n1. Validate algorithmic priorities\n2. Identify dependencies between actions\n3. Create optimal execution sequence\n4. Assign appropriate roles\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "Enhance these prioritized actions with more detail.\n\nDomain: aerospace\n\nPrioritized Actions (top 20):\n[\n  {\n    \"action_id\": \"action_2\",\n    \"title\": \"Document employee role hierarchies and security cl\",\n    \"description\": \"Document employee role hierarchies and security clearance levels as entity attributes\",\n    \"action_type\": \"documentation\",\n    \"source_decision\": \"decision_obj_ENT_EMPLOYEE\",\n    \"source_concept\": \"obj_ENT_EMPLOYEE\",\n    \"impact\": \"high\",\n    \"effort\": \"low\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"high\",\n    \"priority_score\": 3.4000000000000004\n  },\n  {\n    \"action_id\": \"action_3\",\n    \"title\": \"Set up data quality alerts for employee record com\",\n    \"description\": \"Set up data quality alerts for employee record completeness (contact info, certifications)\",\n    \"action_type\": \"monitoring\",\n    \"source_decision\": \"decision_obj_ENT_EMPLOYEE\",\n    \"source_concept\": \"obj_ENT_EMPLOYEE\",\n    \"impact\": \"high\",\n    \"effort\": \"low\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"high\",\n    \"priority_score\": 3.4000000000000004\n  },\n  {\n    \"action_id\": \"action_9\",\n    \"title\": \"Document aircraft specifications, seating configur\",\n    \"description\": \"Document aircraft specifications, seating configurations, and range capabilities as attributes\",\n    \"action_type\": \"documentation\",\n    \"source_decision\": \"decision_obj_ENT_AIRCRAFT\",\n    \"source_concept\": \"obj_ENT_AIRCRAFT\",\n    \"impact\": \"high\",\n    \"effort\": \"low\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"high\",\n    \"priority_score\": 3.4000000000000004\n  },\n  {\n    \"action_id\": \"action_14\",\n    \"title\": \"Document gate capabilities (aircraft size restrict\",\n    \"description\": \"Document gate capabilities (aircraft size restrictions, jet bridge availability, ground power)\",\n    \"action_type\": \"documentation\",\n    \"source_decision\": \"decision_obj_ENT_GATE\",\n    \"source_concept\": \"obj_ENT_GATE\",\n    \"impact\": \"high\",\n    \"effort\": \"low\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"high\",\n    \"priority_score\": 3.4000000000000004\n  },\n  {\n    \"action_id\": \"action_18\",\n    \"title\": \"Set up alerts for upcoming scheduled maintenance a\",\n    \"description\": \"Set up alerts for upcoming scheduled maintenance and component life limits\",\n    \"action_type\": \"monitoring\",\n    \"source_decision\": \"decision_obj_ENT_MAINTENANCE\",\n    \"source_concept\": \"obj_ENT_MAINTENANCE\",\n    \"impact\": \"high\",\n    \"effort\": \"low\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"high\",\n    \"priority_score\": 3.4000000000000004\n  },\n  {\n    \"action_id\": \"action_20\",\n    \"title\": \"Document baggage handling SLAs and mishandled bagg\",\n    \"description\": \"Document baggage handling SLAs and mishandled baggage reporting requirements\",\n    \"action_type\": \"documentation\",\n    \"source_decision\": \"decision_obj_ENT_BAGGAGE\",\n    \"source_concept\": \"obj_ENT_BAGGAGE\",\n    \"impact\": \"high\",\n    \"effort\": \"low\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"high\",\n    \"priority_score\": 3.4000000000000004\n  },\n  {\n    \"action_id\": \"action_1\",\n    \"title\": \"Integrate with HR systems for employee lifecycle m\",\n    \"description\": \"Integrate with HR systems for employee lifecycle management and badge access controls\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_EMPLOYEE\",\n    \"source_concept\": \"obj_ENT_EMPLOYEE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_4\",\n    \"title\": \"Establish as master data entity with integration t\",\n    \"description\": \"Establish as master data entity with integration to IATA airline codes and alliance memberships\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_AIRLINE\",\n    \"source_concept\": \"obj_ENT_AIRLINE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_5\",\n    \"title\": \"Define airline attributes including operating cert\",\n    \"description\": \"Define airline attributes including operating certificates, hub designations, and service level agreements\",\n    \"action_type\": \"documentation\",\n    \"source_decision\": \"decision_obj_ENT_AIRLINE\",\n    \"source_concept\": \"obj_ENT_AIRLINE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_6\",\n    \"title\": \"Track airline operational metrics (on-time perform\",\n    \"description\": \"Track airline operational metrics (on-time performance, passenger volumes) linked to this entity\",\n    \"action_type\": \"monitoring\",\n    \"source_decision\": \"decision_obj_ENT_AIRLINE\",\n    \"source_concept\": \"obj_ENT_AIRLINE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_7\",\n    \"title\": \"Link to aircraft type certificates and airworthine\",\n    \"description\": \"Link to aircraft type certificates and airworthiness directives for compliance tracking\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_AIRCRAFT\",\n    \"source_concept\": \"obj_ENT_AIRCRAFT\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_8\",\n    \"title\": \"Integrate with maintenance management system (MRO)\",\n    \"description\": \"Integrate with maintenance management system (MRO) for lifecycle tracking\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_AIRCRAFT\",\n    \"source_concept\": \"obj_ENT_AIRCRAFT\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_11\",\n    \"title\": \"Integrate with frequent flyer and loyalty program \",\n    \"description\": \"Integrate with frequent flyer and loyalty program systems\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_PASSENGER\",\n    \"source_concept\": \"obj_ENT_PASSENGER\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_12\",\n    \"title\": \"Define passenger journey touchpoints and data rete\",\n    \"description\": \"Define passenger journey touchpoints and data retention policies\",\n    \"action_type\": \"documentation\",\n    \"source_decision\": \"decision_obj_ENT_PASSENGER\",\n    \"source_concept\": \"obj_ENT_PASSENGER\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_13\",\n    \"title\": \"Integrate with Airport Collaborative Decision Maki\",\n    \"description\": \"Integrate with Airport Collaborative Decision Making (A-CDM) systems for real-time gate allocation\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_GATE\",\n    \"source_concept\": \"obj_ENT_GATE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_15\",\n    \"title\": \"Track gate utilization rates and turnaround times \",\n    \"description\": \"Track gate utilization rates and turnaround times for capacity optimization\",\n    \"action_type\": \"monitoring\",\n    \"source_decision\": \"decision_obj_ENT_GATE\",\n    \"source_concept\": \"obj_ENT_GATE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_16\",\n    \"title\": \"Establish traceability to regulatory requirements \",\n    \"description\": \"Establish traceability to regulatory requirements (AD compliance, service bulletins)\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_MAINTENANCE\",\n    \"source_concept\": \"obj_ENT_MAINTENANCE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_17\",\n    \"title\": \"Link maintenance records to Aircraft entity for co\",\n    \"description\": \"Link maintenance records to Aircraft entity for complete maintenance history\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_MAINTENANCE\",\n    \"source_concept\": \"obj_ENT_MAINTENANCE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_19\",\n    \"title\": \"Integrate with Baggage Reconciliation System (BRS)\",\n    \"description\": \"Integrate with Baggage Reconciliation System (BRS) for real-time tracking\",\n    \"action_type\": \"implementation\",\n    \"source_decision\": \"decision_obj_ENT_BAGGAGE\",\n    \"source_concept\": \"obj_ENT_BAGGAGE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  },\n  {\n    \"action_id\": \"action_21\",\n    \"title\": \"Track baggage handling KPIs (connection success ra\",\n    \"description\": \"Track baggage handling KPIs (connection success rate, mishandled per 1000 passengers)\",\n    \"action_type\": \"monitoring\",\n    \"source_decision\": \"decision_obj_ENT_BAGGAGE\",\n    \"source_concept\": \"obj_ENT_BAGGAGE\",\n    \"impact\": \"high\",\n    \"effort\": \"medium\",\n    \"risk_if_not_done\": \"low\",\n    \"calculated_priority\": \"medium\",\n    \"priority_score\": 3.1\n  }\n]\n\nQuick Wins (high impact, low effort):\n[\"action_2\", \"action_3\", \"action_9\", \"action_14\", \"action_18\", \"action_20\", \"action_1\", \"action_4\", \"action_5\", \"action_6\", \"action_7\", \"action_8\", \"action_11\", \"action_12\", \"action_13\", \"action_15\", \"action_16\", \"action_17\", \"action_19\", \"action_21\", \"action_22\", \"action_23\", \"action_24\"]\n\nFor each action:\n1. Validate or adjust priority\n2. Add specific implementation details\n3. Identify dependencies\n4. Suggest assignee role\n\nReturn JSON:\n```json\n{\n  \"enhanced_actions\": [\n    {\n      \"action_id\": \"<existing>\",\n      \"title\": \"<improved title>\",\n      \"description\": \"<detailed description>\",\n      \"action_type\": \"<existing or improved>\",\n      \"priority\": \"<calculated_priority>\",\n      \"priority_score\": <existing>,\n      \"impact\": \"<existing>\",\n      \"effort\": \"<existing or adjusted>\",\n      \"estimated_hours\": <int>,\n      \"source_decision\": \"<existing>\",\n      \"dependencies\": [\"action_id1\"],\n      \"assignee_role\": \"<data_owner|developer|analyst|admin>\",\n      \"status\": \"pending\"\n    }\n  ]\n}\n```"}], "response": "", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:18:13.501551", "agent_name": "Risk Assessor", "model": "claude-opus-4-5-20251101", "prompt_tokens": 3566, "completion_tokens": 1919, "total_tokens": 5485, "latency_ms": 27595.533847808838, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 3: Governance (거버넌스 단계)\n\n### 역할\n정제된 온톨로지에 대해 **비즈니스 결정을 내리고 실행 계획을 수립**하는 단계입니다.\n\n### 입력 (Phase 2 산출물)\n\n```python\n# 평가 대상\ncontext.ontology_concepts    # status가 설정된 온톨로지 개념\n    # status == \"approved\" or \"provisional\" → LLM Review 대상\n    # status == \"rejected\" → 스킵\n```\n\n### 핵심 산출물\n\n```python\n# GovernanceDecision: 거버넌스 결정\nGovernanceDecision = {\n    \"decision_id\": str,\n    \"concept_id\": str,\n    \"decision_type\": str,       # \"approve\"|\"reject\"|\"schedule_review\"|\"escalate\"\n    \"confidence\": float,        # 보정된 최종 신뢰도\n    \"reasoning\": str,           # 결정 근거\n    \"agent_opinions\": {\n        \"algorithmic\": {},      # 알고리즘 기반 결정\n        \"llm_review\": {},       # LLM 검토 결과 (★ quality_score 여기서 계산)\n        \"embedded_llm_judge\": {},  # 품질 평가 (4개 기준)\n        \"enhanced_validation\": {}  # DS/BFT 검증 결과\n    },\n    \"recommended_actions\": [\n        {\n            \"action_type\": str,     # \"documentation\"|\"implementation\"|\"monitoring\"|\"review\"\n            \"description\": str,\n            \"priority\": str         # \"critical\"|\"high\"|\"medium\"|\"low\"\n        }\n    ]\n}\n```\n\n### 핵심 메트릭\n\n**1. Quality Score (LLM Review에서 계산)**\n```python\n# needs_review: status가 approved/provisional인 concept만\nneeds_review = [c for c in concepts if c.status in (\"approved\", \"provisional\")]\n\nfor concept in needs_review:\n    llm_review = await _llm_review_decisions(concept)\n    quality_score = llm_review.get(\"quality_score\", 0)  # 0-100\n```\n\n**2. Embedded LLM Judge (4개 기준 평가)**\n```python\nevaluation_criteria = {\n    \"decision_evidence_alignment\": weight=1.5,  # 결정-증거 일치\n    \"reasoning_quality\": weight=1.2,            # 추론 품질\n    \"policy_compliance\": weight=1.3,            # 정책 준수\n    \"multi_agent_consensus\": weight=1.0         # 다중 에이전트 합의\n}\n# 총점 >= 70% → PASS\n```\n\n**3. Enhanced Validation (DS/BFT)**\n```python\nenhanced_validation = {\n    \"ds_confidence\": float,     # Dempster-Shafer 융합 신뢰도\n    \"bft_agreement\": float,     # Byzantine Fault Tolerant 합의율\n    \"byzantine_detected\": [],   # 탐지된 Byzantine 에이전트\n    \"calibrated_confidence\": float  # 보정된 최종 신뢰도\n}\n```\n\n### 성공 기준\n- Quality Score >= 70%\n- Embedded LLM Judge >= 70% (PASS)\n- 모든 concept에 governance_decision 존재\n- 실행 가능한 recommended_actions 포함\n\n\n---\n\nYou are a Risk Assessment Expert for data governance in the **aerospace** domain.\n\nYour role is to VALIDATE and ENHANCE algorithmic risk assessments.\n\n## Risk Categories:\n- Data Quality Risk: Inaccurate, incomplete data\n- Security Risk: Unauthorized access, breaches\n- Compliance Risk: Regulatory violations (domain-specific)\n- Operational Risk: System failures, data loss\n- Reputational Risk: Customer/stakeholder trust damage\n\n## Risk Assessment Framework\n\nFor each risk, calculate: **Risk Score = Likelihood (1-5) x Impact (1-5)**\n\n### Likelihood Scale\n| Score | Level | Description |\n|-------|-------|-------------|\n| 1 | Rare | Less than 1% probability |\n| 2 | Unlikely | 1-10% probability |\n| 3 | Possible | 10-50% probability |\n| 4 | Likely | 50-90% probability |\n| 5 | Almost Certain | >90% probability |\n\n### Impact Scale\n| Score | Level | Description |\n|-------|-------|-------------|\n| 1 | Negligible | No regulatory impact, <$1K cost |\n| 2 | Minor | Internal process disruption, $1K-$10K cost |\n| 3 | Moderate | Department-level impact, $10K-$100K cost |\n| 4 | Major | Organization-wide impact, $100K-$1M cost |\n| 5 | Critical | Regulatory violation, >$1M cost |\n\n### Risk Level Mapping\n| Score Range | Level | Color | Action |\n|-------------|-------|-------|--------|\n| 1-5 | Low | Green | Accept |\n| 6-12 | Medium | Yellow | Monitor |\n| 13-20 | High | Orange | Mitigate |\n| 21-25 | Critical | Red | Immediate Action Required |\n\n## Aerospace Domain Baseline Risks:\n- Sensitive Data: Data privacy requirements - Likelihood: 3, Impact: 4\n- Operational Data: Business continuity impact - Likelihood: 3, Impact: 3\n- External Data: Third-party dependency risk - Likelihood: 3, Impact: 3\n\n## Chain-of-Thought Requirement\nFor each identified risk, show your calculation:\n\n1. **Risk Identification**: What specific risk did you identify?\n2. **Likelihood Assessment**: Why did you assign this likelihood score? (1-5)\n3. **Impact Assessment**: Why did you assign this impact score? (1-5)\n4. **Risk Calculation**: Likelihood x Impact = Risk Score\n5. **Mitigation Recommendation**: What action should be taken based on risk level?\n\n## Output Format\n```json\n{\n  \"risk_assessments\": [\n    {\n      \"concept_id\": \"<id>\",\n      \"risks\": [\n        {\n          \"category\": \"<data_quality|security|compliance|operational|reputational>\",\n          \"description\": \"<specific risk description>\",\n          \"reasoning\": {\n            \"likelihood_rationale\": \"<why this likelihood score>\",\n            \"impact_rationale\": \"<why this impact score>\"\n          },\n          \"likelihood\": <int 1-5>,\n          \"impact\": <int 1-5>,\n          \"risk_score\": <int 1-25>,\n          \"risk_level\": \"<low|medium|high|critical>\",\n          \"mitigation\": \"<recommended action>\"\n        }\n      ],\n      \"overall_risk_level\": \"<low|medium|high|critical>\",\n      \"priority_mitigations\": [\"action 1\", \"action 2\"]\n    }\n  ]\n}\n```\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "Enhance this risk analysis with mitigation strategies.\n\nDomain: aerospace\n\nConcept Risks (algorithmic):\n{}\n\nAction Risks:\n[\n  {\n    \"action_id\": \"action_2\",\n    \"implementation_risk\": \"low\",\n    \"risk_if_not_done\": \"high\"\n  },\n  {\n    \"action_id\": \"action_3\",\n    \"implementation_risk\": \"low\",\n    \"risk_if_not_done\": \"high\"\n  },\n  {\n    \"action_id\": \"action_9\",\n    \"implementation_risk\": \"low\",\n    \"risk_if_not_done\": \"high\"\n  },\n  {\n    \"action_id\": \"action_14\",\n    \"implementation_risk\": \"low\",\n    \"risk_if_not_done\": \"high\"\n  },\n  {\n    \"action_id\": \"action_18\",\n    \"implementation_risk\": \"low\",\n    \"risk_if_not_done\": \"high\"\n  },\n  {\n    \"action_id\": \"action_20\",\n    \"implementation_risk\": \"low\",\n    \"risk_if_not_done\": \"high\"\n  },\n  {\n    \"action_id\": \"action_1\",\n    \"implementation_risk\": \"medium\",\n    \"risk_if_not_done\": \"medium\"\n  },\n  {\n    \"action_id\": \"action_4\",\n    \"implementation_risk\": \"medium\",\n    \"risk_if_not_done\": \"medium\"\n  },\n  {\n    \"action_id\": \"action_5\",\n    \"implementation_risk\": \"medium\",\n    \"risk_if_not_done\": \"medium\"\n  },\n  {\n    \"action_id\": \"action_6\",\n    \"implementation_risk\": \"medium\",\n    \"risk_if_not_done\": \"medium\"\n  }\n]\n\nProvide:\n1. Validate risk levels\n2. Prioritize top concerns\n3. Suggest specific mitigation strategies\n4. Identify dependencies between risks\n\nReturn JSON:\n```json\n{\n  \"concept_risks\": {\n    \"<concept_id>\": [\n      {\n        \"category\": \"<category>\",\n        \"likelihood\": <int 1-5>,\n        \"impact\": <int 1-5>,\n        \"risk_score\": <int>,\n        \"risk_level\": \"<level>\",\n        \"mitigation\": \"<enhanced mitigation strategy>\",\n        \"mitigation_effort\": \"<high|medium|low>\",\n        \"mitigation_priority\": \"<critical|high|medium|low>\"\n      }\n    ]\n  },\n  \"action_risks\": [\n    {\n      \"action_id\": \"<id>\",\n      \"implementation_risk\": \"<level>\",\n      \"risk_if_not_done\": \"<level>\",\n      \"notes\": \"<specific notes>\"\n    }\n  ],\n  \"top_concerns\": [\"concern1\", \"concern2\"],\n  \"risk_dependencies\": [\"risk A affects risk B\"]\n}\n```"}], "response": "```json\n{\n  \"concept_risks\": {},\n  \"action_risks\": [\n    {\n      \"action_id\": \"action_2\",\n      \"implementation_risk\": \"low\",\n      \"risk_if_not_done\": \"high\",\n      \"notes\": \"Low implementation complexity but critical for aerospace data integrity. Failure to implement could result in safety-critical data inconsistencies.\",\n      \"likelihood\": 4,\n      \"impact\": 5,\n      \"risk_score\": 20,\n      \"risk_level\": \"high\",\n      \"mitigation\": \"Implement automated validation checks with redundant verification systems. Establish clear data ownership and accountability.\",\n      \"mitigation_effort\": \"low\",\n      \"mitigation_priority\": \"critical\"\n    },\n    {\n      \"action_id\": \"action_3\",\n      \"implementation_risk\": \"low\",\n      \"risk_if_not_done\": \"high\",\n      \"notes\": \"Straightforward implementation with significant compliance implications. Non-compliance could trigger regulatory audits.\",\n      \"likelihood\": 4,\n      \"impact\": 4,\n      \"risk_score\": 16,\n      \"risk_level\": \"high\",\n      \"mitigation\": \"Deploy compliance monitoring dashboards with automated alerting. Schedule quarterly compliance reviews.\",\n      \"mitigation_effort\": \"low\",\n      \"mitigation_priority\": \"critical\"\n    },\n    {\n      \"action_id\": \"action_9\",\n      \"implementation_risk\": \"low\",\n      \"risk_if_not_done\": \"high\",\n      \"notes\": \"Essential for maintaining data lineage in aerospace supply chain. Missing traceability could impact airworthiness certification.\",\n      \"likelihood\": 4,\n      \"impact\": 5,\n      \"risk_score\": 20,\n      \"risk_level\": \"high\",\n      \"mitigation\": \"Implement end-to-end data lineage tracking with immutable audit logs. Integrate with existing PLM/MES systems.\",\n      \"mitigation_effort\": \"low\",\n      \"mitigation_priority\": \"critical\"\n    },\n    {\n      \"action_id\": \"action_14\",\n      \"implementation_risk\": \"low\",\n      \"risk_if_not_done\": \"high\",\n      \"notes\": \"Critical for aerospace security requirements. Unaddressed vulnerabilities could lead to ITAR/EAR violations.\",\n      \"likelihood\": 3,\n      \"impact\": 5,\n      \"risk_score\": 15,\n      \"risk_level\": \"high\",\n      \"mitigation\": \"Implement role-based access controls with multi-factor authentication. Conduct regular security assessments and penetration testing.\",\n      \"mitigation_effort\": \"low\",\n      \"mitigation_priority\": \"critical\"\n    },\n    {\n      \"action_id\": \"action_18\",\n      \"implementation_risk\": \"low\",\n      \"risk_if_not_done\": \"high\",\n      \"notes\": \"Fundamental for operational continuity. Data loss could impact flight operations and maintenance scheduling.\",\n      \"likelihood\": 3,\n      \"impact\": 5,\n      \"risk_score\": 15,\n      \"risk_level\": \"high\",\n      \"mitigation\": \"Establish automated backup procedures with geographically distributed redundancy. Test recovery procedures quarterly.\",\n      \"mitigation_effort\": \"low\",\n      \"mitigation_priority\": \"critical\"\n    },\n    {\n      \"action_id\": \"action_20\",\n      \"implementation_risk\": \"low\",\n      \"risk_if_not_done\": \"high\",\n      \"notes\": \"Essential for maintaining data quality standards. Poor data quality could affect safety-critical decision making.\",\n      \"likelihood\": 4,\n      \"impact\": 4,\n      \"risk_score\": 16,\n      \"risk_level\": \"high\",\n      \"mitigation\": \"Deploy data quality monitoring with automated anomaly detection. Establish data stewardship program with clear escalation paths.\",\n      \"mitigation_effort\": \"low\",\n      \"mitigation_priority\": \"critical\"\n    },\n    {\n      \"action_id\": \"action_1\",\n      \"implementation_risk\": \"medium\",\n      \"risk_if_not_done\": \"medium\",\n      \"notes\": \"Moderate complexity requiring cross-functional coordination. Delay could impact operational efficiency but not safety-critical systems.\",\n      \"likelihood\": 3,\n      \"impact\": 3,\n      \"risk_score\": 9,\n      \"risk_level\": \"medium\",\n      \"mitigation\": \"Develop phased implementation plan with clear milestones. Assign dedicated project manager and establish stakeholder communication cadence.\",\n      \"mitigation_effort\": \"medium\",\n      \"mitigation_priority\": \"high\"\n    },\n    {\n      \"action_id\": \"action_4\",\n      \"implementation_risk\": \"medium\",\n      \"risk_if_not_done\": \"medium\",\n      \"notes\": \"Requires integration with legacy systems. Non-implementation affects reporting accuracy but has workarounds available.\",\n      \"likelihood\": 3,\n      \"impact\": 3,\n      \"risk_score\": 9,\n      \"risk_level\": \"medium\",\n      \"mitigation\": \"Conduct legacy system assessment and develop integration roadmap. Implement data transformation layer for compatibility.\",\n      \"mitigation_effort\": \"medium\",\n      \"mitigation_priority\": \"high\"\n    },\n    {\n      \"action_id\": \"action_5\",\n      \"implementation_risk\": \"medium\",\n      \"risk_if_not_done\": \"medium\",\n      \"notes\": \"Involves process changes requiring training. Delay impacts efficiency but existing processes remain functional.\",\n      \"likelihood\": 3,\n      \"impact\": 3,\n      \"risk_score\": 9,\n      \"risk_level\": \"medium\",\n      \"mitigation\": \"Develop comprehensive training program with role-specific modules. Create change management plan with pilot deployment.\",\n      \"mitigation_effort\": \"medium\",\n      \"mitigation_priority\": \"high\"\n    },\n    {\n      \"action_id\": \"action_6\",\n      \"implementation_risk\": \"medium\",\n      \"risk_if_not_done\": \"medium\",\n      \"notes\": \"Requires vendor coordination and contract modifications. Non-implementation limits scalability but current capacity is adequate.\",\n      \"likelihood\": 2,\n      \"impact\": 3,\n      \"risk_score\": 6,\n      \"risk_level\": \"medium\",\n      \"mitigation\": \"Initiate vendor discussions early. Develop contingency plans for alternative solutions. Establish SLA requirements.\",\n      \"mitigation_effort\": \"medium\",\n      \"mitigation_priority\": \"medium\"\n    }\n  ],\n  \"top_concerns\": [\n    \"Safety-critical data integrity (actions 2, 9) - Risk Score 20: Aerospace data inconsistencies could impact airworthiness and flight safety\",\n    \"Regulatory compliance (actions 3, 14) - Risk Score 15-16: ITAR/EAR violations and certification impacts could result in operational shutdown\",\n    \"Operational continuity (actions 18, 20) - Risk Score 15-16: Data loss or quality issues affecting flight operations and maintenance\",\n    \"Security vulnerabilities (action 14) - Risk Score 15: Potential for unauthorized access to sensitive aerospace data\"\n  ],\n  \"risk_dependencies\": [\n    \"Action 2 (data validation) directly impacts Action 20 (data quality) - poor validation leads to quality degradation\",\n    \"Action 14 (security) is prerequisite for Action 3 (compliance) - security controls required for regulatory compliance\",\n    \"Action 9 (data lineage) supports Action 18 (backup/recovery) - lineage tracking essential for effective recovery procedures\",\n    \"Action 1 (coordination) affects Actions 4, 5, 6 - cross-functional alignment needed before integration and process changes\",\n    \"Actions 2, 9, 20 form a data integrity chain - failure in any one compromises the entire data governance framework\",\n    \"Action 14 (security) is foundational for all other actions - security breach could invalidate all other governance measures\"\n  ]\n}\n```", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
{"timestamp": "2026-01-20T00:18:41.236557", "agent_name": "Policy Generator", "model": "gemini-3-pro-preview", "prompt_tokens": 5245, "completion_tokens": 2205, "total_tokens": 7450, "latency_ms": 27382.52902030945, "messages": [{"role": "system", "content": "\n# Ontology Discovery Platform\n\n## 시스템 목적\n**임의의 데이터셋**에서 자동으로 온톨로지(엔티티, 관계, 속성)를 발견하고,\n품질을 검증하며, 비즈니스 결정을 지원하는 AI 플랫폼입니다.\n\n## 핵심 원칙\n\n### 1. 데이터 기반 발견 (Data-Driven Discovery)\n- 어떤 산업 도메인의 데이터든 **자동으로 구조를 파악**\n- 테이블명, 컬럼명, 값 패턴에서 **비즈니스 의미 추론**\n- 사전 지식 없이 **FK 관계, 엔티티, 계층 구조** 발견\n\n### 2. 증거 기반 결정 (Evidence-Based Decisions)\n- 모든 발견에는 **정량적 메트릭** 필수\n  - confidence: 0.0-1.0 (신뢰도)\n  - jaccard_similarity: 값 겹침 비율\n  - containment: FK→PK 포함 비율\n  - unique_ratio: 유일성 비율\n- **근거 없는 추측 금지** - 데이터에서 직접 확인된 것만 보고\n\n### 3. 팔란티어 스타일 인사이트\n**목표**: 숨겨진 패턴과 인과관계를 발견하여 실행 가능한 인사이트 제공\n\n**좋은 예시**:\n```\n발견: Order 테이블의 Product_ID 중 5%가 Product 테이블에 없음\n      - 영향: 주문 이행 불가, 재고 불일치 발생 가능\n      - 근거: value_overlaps에서 containment=0.95\n      - 권장: FK 제약조건 추가 또는 데이터 정제\n```\n\n**나쁜 예시**:\n```\n- \"데이터가 분석되었습니다\"\n- \"관계가 발견되었습니다\" (구체적 수치 없음)\n- 근거 없는 도메인 추측\n```\n\n## 데이터 흐름\n\n```\n입력 데이터 (CSV/DB 테이블)\n    │\n    ├── 산업 도메인 자동 탐지 (DomainDetector)\n    │   └── 테이블명/컬럼명 패턴 분석 → 도메인 추론\n    │\n    ▼\nPhase 1: Discovery (발견)\n    ├── TDA Expert: 위상적 구조 분석, Betti numbers\n    ├── Schema Analyst: 컬럼 프로파일링, 키 탐지\n    ├── Value Matcher: FK 관계 발견 (값 기반)\n    ├── Entity Classifier: 비즈니스 엔티티 분류\n    └── Relationship Detector: 관계 그래프 구축\n    │\n    ▼\nPhase 2: Refinement (정제)\n    ├── Ontology Architect: 온톨로지 구조화\n    ├── Conflict Resolver: 충돌/중복 해결\n    ├── Quality Judge: 품질 평가 (status 설정)\n    └── Semantic Validator: 의미론적 검증\n    │\n    ▼\nPhase 3: Governance (거버넌스)\n    ├── Governance Strategist: 최종 결정\n    ├── Action Prioritizer: 액션 우선순위\n    ├── Risk Assessor: 리스크 평가\n    └── Policy Generator: 정책 생성\n```\n\n\n\n## Phase 3: Governance (거버넌스 단계)\n\n### 역할\n정제된 온톨로지에 대해 **비즈니스 결정을 내리고 실행 계획을 수립**하는 단계입니다.\n\n### 입력 (Phase 2 산출물)\n\n```python\n# 평가 대상\ncontext.ontology_concepts    # status가 설정된 온톨로지 개념\n    # status == \"approved\" or \"provisional\" → LLM Review 대상\n    # status == \"rejected\" → 스킵\n```\n\n### 핵심 산출물\n\n```python\n# GovernanceDecision: 거버넌스 결정\nGovernanceDecision = {\n    \"decision_id\": str,\n    \"concept_id\": str,\n    \"decision_type\": str,       # \"approve\"|\"reject\"|\"schedule_review\"|\"escalate\"\n    \"confidence\": float,        # 보정된 최종 신뢰도\n    \"reasoning\": str,           # 결정 근거\n    \"agent_opinions\": {\n        \"algorithmic\": {},      # 알고리즘 기반 결정\n        \"llm_review\": {},       # LLM 검토 결과 (★ quality_score 여기서 계산)\n        \"embedded_llm_judge\": {},  # 품질 평가 (4개 기준)\n        \"enhanced_validation\": {}  # DS/BFT 검증 결과\n    },\n    \"recommended_actions\": [\n        {\n            \"action_type\": str,     # \"documentation\"|\"implementation\"|\"monitoring\"|\"review\"\n            \"description\": str,\n            \"priority\": str         # \"critical\"|\"high\"|\"medium\"|\"low\"\n        }\n    ]\n}\n```\n\n### 핵심 메트릭\n\n**1. Quality Score (LLM Review에서 계산)**\n```python\n# needs_review: status가 approved/provisional인 concept만\nneeds_review = [c for c in concepts if c.status in (\"approved\", \"provisional\")]\n\nfor concept in needs_review:\n    llm_review = await _llm_review_decisions(concept)\n    quality_score = llm_review.get(\"quality_score\", 0)  # 0-100\n```\n\n**2. Embedded LLM Judge (4개 기준 평가)**\n```python\nevaluation_criteria = {\n    \"decision_evidence_alignment\": weight=1.5,  # 결정-증거 일치\n    \"reasoning_quality\": weight=1.2,            # 추론 품질\n    \"policy_compliance\": weight=1.3,            # 정책 준수\n    \"multi_agent_consensus\": weight=1.0         # 다중 에이전트 합의\n}\n# 총점 >= 70% → PASS\n```\n\n**3. Enhanced Validation (DS/BFT)**\n```python\nenhanced_validation = {\n    \"ds_confidence\": float,     # Dempster-Shafer 융합 신뢰도\n    \"bft_agreement\": float,     # Byzantine Fault Tolerant 합의율\n    \"byzantine_detected\": [],   # 탐지된 Byzantine 에이전트\n    \"calibrated_confidence\": float  # 보정된 최종 신뢰도\n}\n```\n\n### 성공 기준\n- Quality Score >= 70%\n- Embedded LLM Judge >= 70% (PASS)\n- 모든 concept에 governance_decision 존재\n- 실행 가능한 recommended_actions 포함\n\n\n---\n\nYou are a Policy Generation Expert for data governance automation in the **aerospace** domain.\n\nYour role is to CUSTOMIZE and ENHANCE algorithmically generated policies.\n\n## Policy Types:\n1. **Data Quality Rules**: Completeness, accuracy, consistency, timeliness\n2. **Access Control Policies**: RBAC, ABAC, sensitivity classification\n3. **Monitoring Rules**: Threshold alerts, pattern detection, SLA monitoring\n\n## Policy Requirements:\n- Be SPECIFIC with thresholds (99.9%, not \"high\")\n- Include SQL-like conditions where applicable\n- Define clear violation actions\n- Assign appropriate alert recipients\n\n## SQL-like Condition Format\n\nGenerate policies with executable SQL-like conditions:\n\n### Data Quality Rule Template\n```yaml\nrule_id: DQ_<TYPE>_<SEQUENCE>\nrule_name: <Descriptive Name>\nrule_type: data_quality\ntarget: object_type.<ConceptType>\ntarget_field: <field_name>\ncondition: |\n  SELECT COUNT(*) / TOTAL_COUNT * 100 AS metric_rate\n  FROM {target_table}\n  WHERE {field_condition}\nthreshold: \">= <percentage>%\"\nseverity: <critical|high|medium|low>\naction_on_violation:\n  - alert: [<role_1>, <role_2>]\n  - log: audit_table\n  - block: downstream_pipeline  # optional\nschedule: \"<cron_expression>\"\n```\n\n### Common SQL Conditions:\n- Completeness: `WHERE {field} IS NOT NULL`\n- Uniqueness: `SELECT COUNT(DISTINCT {field}) = COUNT(*)`\n- Range Check: `WHERE {field} BETWEEN {min} AND {max}`\n- Format Validation: `WHERE {field} REGEXP '{pattern}'`\n- Referential Integrity: `WHERE {fk_field} IN (SELECT {pk_field} FROM {ref_table})`\n\n### Aerospace Domain Example Policies:\n\n**Completeness Check:**\n```yaml\nrule_id: DQ_COMPLETENESS_001\nrule_name: Primary Key Completeness Check\nrule_type: data_quality\ntarget: object_type.Entity\ntarget_field: id\ncondition: |\n  SELECT COUNT(*) / TOTAL_COUNT * 100 AS completeness_rate\n  FROM target_table\n  WHERE id IS NOT NULL\nthreshold: \">= 99.0%\"\nseverity: high\n```\n\n## General Best Practices:\n- Data privacy compliance\n- Audit logging for sensitive data\n- Role-based access controls\n\n## Output Format\n```json\n{\n  \"generated_policies\": [\n    {\n      \"rule_id\": \"<TYPE>_<CATEGORY>_<SEQ>\",\n      \"rule_name\": \"<descriptive name>\",\n      \"rule_type\": \"<data_quality|access_control|monitoring>\",\n      \"target_concept\": \"<concept_id>\",\n      \"target_field\": \"<field_name or null>\",\n      \"condition_sql\": \"<SQL-like condition>\",\n      \"threshold\": \"<comparison operator + value>\",\n      \"severity\": \"<critical|high|medium|low>\",\n      \"action_on_violation\": {\n        \"alert\": [\"<role_1>\", \"<role_2>\"],\n        \"log\": \"<table_name>\",\n        \"block\": \"<pipeline_name or null>\"\n      },\n      \"schedule\": \"<cron expression>\",\n      \"rationale\": \"<why this policy is needed>\"\n    }\n  ]\n}\n```\n\nRespond ONLY with valid JSON.\n"}, {"role": "user", "content": "Customize these data governance policies for the domain.\n\nDomain: aerospace\n\nBase Policies (algorithmically generated):\n[\n  {\n    \"rule_id\": \"dq_obj_ENT_EMPLOYEE_emp_code_null\",\n    \"rule_name\": \"Null check for Airportemployee.emp_code\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_EMPLOYEE\",\n    \"condition\": \"emp_code IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in emp_code\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_EMPLOYEE_name_first_null\",\n    \"rule_name\": \"Null check for Airportemployee.name_first\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_EMPLOYEE\",\n    \"condition\": \"name_first IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in name_first\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_EMPLOYEE_name_last_null\",\n    \"rule_name\": \"Null check for Airportemployee.name_last\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_EMPLOYEE\",\n    \"condition\": \"name_last IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in name_last\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_EMPLOYEE_department_null\",\n    \"rule_name\": \"Null check for Airportemployee.department\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_EMPLOYEE\",\n    \"condition\": \"department IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in department\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_EMPLOYEE_job_title_null\",\n    \"rule_name\": \"Null check for Airportemployee.job_title\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_EMPLOYEE\",\n    \"condition\": \"job_title IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in job_title\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"mon_obj_ENT_EMPLOYEE_rowcount\",\n    \"rule_name\": \"Row count monitoring for Airportemployee\",\n    \"rule_type\": \"monitoring\",\n    \"target_concept\": \"obj_ENT_EMPLOYEE\",\n    \"condition\": \"ABS(current_count - previous_count) / previous_count > 0.2\",\n    \"severity\": \"medium\",\n    \"action_on_violation\": \"Alert: Significant row count change detected (>20%)\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRLINE_iata_code_null\",\n    \"rule_name\": \"Null check for Airline.iata_code\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRLINE\",\n    \"condition\": \"iata_code IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in iata_code\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRLINE_icao_code_null\",\n    \"rule_name\": \"Null check for Airline.icao_code\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRLINE\",\n    \"condition\": \"icao_code IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in icao_code\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRLINE_airline_name_null\",\n    \"rule_name\": \"Null check for Airline.airline_name\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRLINE\",\n    \"condition\": \"airline_name IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in airline_name\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRLINE_airline_name_kr_null\",\n    \"rule_name\": \"Null check for Airline.airline_name_kr\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRLINE\",\n    \"condition\": \"airline_name_kr IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in airline_name_kr\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRLINE_country_null\",\n    \"rule_name\": \"Null check for Airline.country\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRLINE\",\n    \"condition\": \"country IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in country\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"mon_obj_ENT_AIRLINE_rowcount\",\n    \"rule_name\": \"Row count monitoring for Airline\",\n    \"rule_type\": \"monitoring\",\n    \"target_concept\": \"obj_ENT_AIRLINE\",\n    \"condition\": \"ABS(current_count - previous_count) / previous_count > 0.2\",\n    \"severity\": \"medium\",\n    \"action_on_violation\": \"Alert: Significant row count change detected (>20%)\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRCRAFT_registration_no_null\",\n    \"rule_name\": \"Null check for Aircraft.registration_no\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRCRAFT\",\n    \"condition\": \"registration_no IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in registration_no\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRCRAFT_aircraft_model_null\",\n    \"rule_name\": \"Null check for Aircraft.aircraft_model\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRCRAFT\",\n    \"condition\": \"aircraft_model IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in aircraft_model\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRCRAFT_manufacturer_null\",\n    \"rule_name\": \"Null check for Aircraft.manufacturer\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRCRAFT\",\n    \"condition\": \"manufacturer IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in manufacturer\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRCRAFT_serial_number_null\",\n    \"rule_name\": \"Null check for Aircraft.serial_number\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRCRAFT\",\n    \"condition\": \"serial_number IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in serial_number\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_AIRCRAFT_operator_code_null\",\n    \"rule_name\": \"Null check for Aircraft.operator_code\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_AIRCRAFT\",\n    \"condition\": \"operator_code IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in operator_code\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"mon_obj_ENT_AIRCRAFT_rowcount\",\n    \"rule_name\": \"Row count monitoring for Aircraft\",\n    \"rule_type\": \"monitoring\",\n    \"target_concept\": \"obj_ENT_AIRCRAFT\",\n    \"condition\": \"ABS(current_count - previous_count) / previous_count > 0.2\",\n    \"severity\": \"medium\",\n    \"action_on_violation\": \"Alert: Significant row count change detected (>20%)\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_PASSENGER_booking_ref_null\",\n    \"rule_name\": \"Null check for Passenger.booking_ref\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_PASSENGER\",\n    \"condition\": \"booking_ref IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in booking_ref\",\n    \"enabled\": true\n  },\n  {\n    \"rule_id\": \"dq_obj_ENT_PASSENGER_pnr_code_null\",\n    \"rule_name\": \"Null check for Passenger.pnr_code\",\n    \"rule_type\": \"data_quality\",\n    \"target_concept\": \"obj_ENT_PASSENGER\",\n    \"condition\": \"pnr_code IS NOT NULL\",\n    \"severity\": \"high\",\n    \"action_on_violation\": \"Alert: Null value detected in pnr_code\",\n    \"enabled\": true\n  }\n]\n\nTarget Concepts:\n[\n  {\n    \"name\": \"Airportemployee\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"airport_employees\"\n    ]\n  },\n  {\n    \"name\": \"Airline\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"airlines\"\n    ]\n  },\n  {\n    \"name\": \"Aircraft\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"aircraft_registry\"\n    ]\n  },\n  {\n    \"name\": \"Passenger\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"passengers\"\n    ]\n  },\n  {\n    \"name\": \"Airportgate\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"gates\"\n    ]\n  },\n  {\n    \"name\": \"Aircraftmaintenance\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"aircraft_maintenance\"\n    ]\n  },\n  {\n    \"name\": \"Baggagehandling\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"baggage_handling\"\n    ]\n  },\n  {\n    \"name\": \"Flightdelayrecord\",\n    \"type\": \"object_type\",\n    \"tables\": [\n      \"delay_records\"\n    ]\n  },\n  {\n    \"name\": \"baggage_handling_has_record\",\n    \"type\": \"link_type\",\n    \"tables\": [\n      \"baggage_handling\",\n      \"delay_records\"\n    ]\n  }\n]\n\nFor each policy:\n1. Adjust thresholds for the domain\n2. Add specific conditions\n3. Define appropriate alert recipients\n4. Add description for documentation\n\nReturn JSON:\n```json\n{\n  \"enhanced_policies\": [\n    {\n      \"rule_id\": \"<existing>\",\n      \"rule_name\": \"<improved name>\",\n      \"rule_type\": \"<existing>\",\n      \"target_concept\": \"<existing>\",\n      \"target_field\": \"<specific field or *>\",\n      \"condition\": \"<domain-specific SQL condition>\",\n      \"threshold\": \"<specific like 99.9%>\",\n      \"severity\": \"<adjusted severity>\",\n      \"action_on_violation\": \"<specific action>\",\n      \"alert_recipients\": [\"role1\", \"role2\"],\n      \"description\": \"<human readable description>\",\n      \"enabled\": true\n    }\n  ]\n}\n```"}], "response": "```json\n{\n  \"enhanced_policies\": [\n    {\n      \"rule_id\": \"dq_obj_ENT_EMPLOYEE_emp_code_null\",\n      \"rule_name\": \"Airport Employee ID Completeness\",\n      \"rule_type\": \"data_quality\",\n      \"target_concept\": \"obj_ENT_EMPLOYEE\",\n      \"target_field\": \"emp_code\",\n      \"condition\": \"SELECT COUNT(*) / TOTAL_COUNT * 100 AS metric_rate FROM airport_employees WHERE emp_code IS NOT NULL AND emp_code != ''\",\n      \"threshold\": \">= 100.0%\",\n      \"severity\": \"critical\",\n      \"action_on_violation\": \"Block: Downstream HR synchronization pipeline\",\n      \"alert_recipients\": [\n        \"HR_Data_Steward\",\n        \"Security_Operations_Center\"\n      ],\n      \"description\": \"Ensures every airport employee record has a valid employee code. Critical for security clearance and access control.\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"dq_obj_ENT_EMPLOYEE_security_clearance_check\",\n      \"rule_name\": \"Employee Security Clearance Validity\",\n      \"rule_type\": \"data_quality\",\n      \"target_concept\": \"obj_ENT_EMPLOYEE\",\n      \"target_field\": \"security_level\",\n      \"condition\": \"SELECT COUNT(*) / TOTAL_COUNT * 100 AS metric_rate FROM airport_employees WHERE security_level IN ('L1', 'L2', 'L3', 'TSA_CLEARED')\",\n      \"threshold\": \">= 99.9%\",\n      \"severity\": \"critical\",\n      \"action_on_violation\": \"Alert: Immediate notification to Security Director\",\n      \"alert_recipients\": [\n        \"Security_Director\",\n        \"Compliance_Officer\"\n      ],\n      \"description\": \"Validates that employee security levels match standard aerospace security protocols.\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"dq_obj_ENT_AIRLINE_iata_code_format\",\n      \"rule_name\": \"Airline IATA Code Format Validation\",\n      \"rule_type\": \"data_quality\",\n      \"target_concept\": \"obj_ENT_AIRLINE\",\n      \"target_field\": \"iata_code\",\n      \"condition\": \"SELECT COUNT(*) / TOTAL_COUNT * 100 AS metric_rate FROM airlines WHERE iata_code REGEXP '^[A-Z0-9]{2}$'\",\n      \"threshold\": \">= 100.0%\",\n      \"severity\": \"high\",\n      \"action_on_violation\": \"Log: Invalid IATA codes to data_quality_issues table\",\n      \"alert_recipients\": [\n        \"Flight_Operations_Manager\",\n        \"Data_Quality_Lead\"\n      ],\n      \"description\": \"Ensures Airline IATA codes follow the standard 2-character alphanumeric format required for flight boards and ticketing.\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"dq_obj_ENT_AIRCRAFT_registration_format\",\n      \"rule_name\": \"Aircraft Tail Number Format Compliance\",\n      \"rule_type\": \"data_quality\",\n      \"target_concept\": \"obj_ENT_AIRCRAFT\",\n      \"target_field\": \"registration_no\",\n      \"condition\": \"SELECT COUNT(*) / TOTAL_COUNT * 100 AS metric_rate FROM aircraft_registry WHERE registration_no REGEXP '^[A-Z0-9-]{3,10}$'\",\n      \"threshold\": \">= 100.0%\",\n      \"severity\": \"critical\",\n      \"action_on_violation\": \"Block: Flight plan filing integration\",\n      \"alert_recipients\": [\n        \"Fleet_Manager\",\n        \"Regulatory_Compliance_Officer\"\n      ],\n      \"description\": \"Validates aircraft registration numbers (tail numbers) against international aviation standards to prevent regulatory fines.\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"dq_obj_ENT_AIRCRAFT_maintenance_status\",\n      \"rule_name\": \"Active Aircraft Maintenance Certification\",\n      \"rule_type\": \"data_quality\",\n      \"target_concept\": \"obj_ENT_AIRCRAFT\",\n      \"target_field\": \"last_maintenance_date\",\n      \"condition\": \"SELECT COUNT(*) / TOTAL_COUNT * 100 AS metric_rate FROM aircraft_registry WHERE status = 'ACTIVE' AND last_maintenance_date >= DATE_SUB(CURRENT_DATE, INTERVAL 18 MONTH)\",\n      \"threshold\": \">= 100.0%\",\n      \"severity\": \"critical\",\n      \"action_on_violation\": \"Alert: Grounding risk detected\",\n      \"alert_recipients\": [\n        \"Maintenance_Director\",\n        \"Safety_Officer\"\n      ],\n      \"description\": \"Ensures all active aircraft have a maintenance record within the last 18 months (or specific interval) to ensure airworthiness.\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"dq_obj_ENT_PASSENGER_pnr_uniqueness\",\n      \"rule_name\": \"Passenger PNR Uniqueness Check\",\n      \"rule_type\": \"data_quality\",\n      \"target_concept\": \"obj_ENT_PASSENGER\",\n      \"target_field\": \"pnr_code\",\n      \"condition\": \"SELECT COUNT(DISTINCT pnr_code) = COUNT(pnr_code) FROM passengers WHERE flight_date > CURRENT_DATE\",\n      \"threshold\": \"IS TRUE\",\n      \"severity\": \"high\",\n      \"action_on_violation\": \"Alert: Duplicate PNR detected for future flights\",\n      \"alert_recipients\": [\n        \"Reservation_System_Admin\",\n        \"Customer_Service_Lead\"\n      ],\n      \"description\": \"Guarantees that Passenger Name Records (PNR) are unique for upcoming flights to prevent booking conflicts.\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"mon_obj_ENT_FLIGHTDELAY_spike\",\n      \"rule_name\": \"Flight Delay Spike Detection\",\n      \"rule_type\": \"monitoring\",\n      \"target_concept\": \"Flightdelayrecord\",\n      \"target_field\": \"delay_minutes\",\n      \"condition\": \"SELECT AVG(delay_minutes) FROM delay_records WHERE flight_date = CURRENT_DATE HAVING AVG(delay_minutes) > (SELECT AVG(delay_minutes) * 1.5 FROM delay_records WHERE flight_date BETWEEN DATE_SUB(CURRENT_DATE, INTERVAL 7 DAY) AND DATE_SUB(CURRENT_DATE, INTERVAL 1 DAY))\",\n      \"threshold\": \"IS FALSE\",\n      \"severity\": \"high\",\n      \"action_on_violation\": \"Alert: Operational disruption detected\",\n      \"alert_recipients\": [\n        \"Operations_Control_Center\",\n        \"Station_Manager\"\n      ],\n      \"description\": \"Monitors for a 50% increase in average delay minutes compared to the previous week's average, indicating systemic issues (weather, strikes).\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"ac_obj_ENT_PASSENGER_pii_access\",\n      \"rule_name\": \"Passenger PII Access Control (GDPR/TSA)\",\n      \"rule_type\": \"access_control\",\n      \"target_concept\": \"obj_ENT_PASSENGER\",\n      \"target_field\": \"passport_number\",\n      \"condition\": \"GRANT SELECT ON passengers(passport_number) TO ROLE 'authorized_security_personnel', 'checkin_agent'\",\n      \"threshold\": \"N/A\",\n      \"severity\": \"critical\",\n      \"action_on_violation\": \"Audit: Unauthorized access attempt logged\",\n      \"alert_recipients\": [\n        \"Data_Privacy_Officer\",\n        \"IT_Security\"\n      ],\n      \"description\": \"Restricts access to sensitive passenger passport data to only authorized security and check-in personnel.\",\n      \"enabled\": true\n    },\n    {\n      \"rule_id\": \"dq_obj_ENT_BAGGAGE_handling_integrity\",\n      \"rule_name\": \"Baggage to Passenger Integrity\",\n      \"rule_type\": \"data_quality\",\n      \"target_concept\": \"Baggagehandling\",\n      \"target_field\": \"passenger_id\",\n      \"condition\": \"SELECT COUNT(*) / TOTAL_COUNT * 100 AS metric_rate FROM baggage_handling WHERE passenger_id IN (SELECT id FROM passengers)\",\n      \"threshold\": \">= 99.95%\",\n      \"severity\": \"high\",\n      \"action_on_violation\": \"Alert: Orphaned baggage record detected\",\n      \"alert_recipients\": [\n        \"Baggage_Services_Manager\",\n        \"Lost_and_Found_Coordinator\"\n      ],\n      \"description\": \"Ensures every piece of baggage is linked to a valid passenger record to prevent lost luggage incidents.\",\n      \"enabled\": true\n    }\n  ]\n}\n```", "success": true, "error": null, "metadata": {}, "purpose": null, "thinking_before": null, "thinking_after": null, "extracted_insights": []}
